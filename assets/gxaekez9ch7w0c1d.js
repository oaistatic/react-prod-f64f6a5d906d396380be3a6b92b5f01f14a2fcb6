import{bT as ve,n as Le}from"./g670b8vtkhx0yc6d.js";import{T as te,au as Ue,r as G}from"./gg0tb34p9fzo1omt.js";var z={},M={},X={},de;function m(){return de||(de=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isEventSourceSupported=e.isReactNative=e.ReadyState=e.DEFAULT_HEARTBEAT=e.UNPARSABLE_JSON_OBJECT=e.DEFAULT_RECONNECT_INTERVAL_MS=e.DEFAULT_RECONNECT_LIMIT=e.SOCKET_IO_PING_CODE=e.SOCKET_IO_PATH=e.SOCKET_IO_PING_INTERVAL=e.DEFAULT_EVENT_SOURCE_OPTIONS=e.EMPTY_EVENT_HANDLERS=e.DEFAULT_OPTIONS=void 0;var d=1,E=1e3*d;e.DEFAULT_OPTIONS={},e.EMPTY_EVENT_HANDLERS={},e.DEFAULT_EVENT_SOURCE_OPTIONS={withCredentials:!1,events:e.EMPTY_EVENT_HANDLERS},e.SOCKET_IO_PING_INTERVAL=25*E,e.SOCKET_IO_PATH="/socket.io/?EIO=3&transport=websocket",e.SOCKET_IO_PING_CODE="2",e.DEFAULT_RECONNECT_LIMIT=20,e.DEFAULT_RECONNECT_INTERVAL_MS=5e3,e.UNPARSABLE_JSON_OBJECT={},e.DEFAULT_HEARTBEAT={message:"ping",timeout:6e4,interval:25e3},function(l){l[l.UNINSTANTIATED=-1]="UNINSTANTIATED",l[l.CONNECTING=0]="CONNECTING",l[l.OPEN=1]="OPEN",l[l.CLOSING=2]="CLOSING",l[l.CLOSED=3]="CLOSED"}(e.ReadyState||(e.ReadyState={}));var _=function(){try{return"EventSource"in globalThis}catch{return!1}};e.isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative",e.isEventSourceSupported=!e.isReactNative&&_()}(X)),X}var J={},Z={},Se;function re(){return Se||(Se=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetWebSockets=e.sharedWebSockets=void 0,e.sharedWebSockets={};var d=function(E){if(E&&e.sharedWebSockets.hasOwnProperty(E))delete e.sharedWebSockets[E];else for(var _ in e.sharedWebSockets)e.sharedWebSockets.hasOwnProperty(_)&&delete e.sharedWebSockets[_]};e.resetWebSockets=d}(Z)),Z}var k={},p={},_e;function ne(){if(_e)return p;_e=1,Object.defineProperty(p,"__esModule",{value:!0}),p.setUpSocketIOPing=p.appendQueryParams=p.parseSocketIOUrl=void 0;var e=m(),d=function(l){if(l){var O=/^https|wss/.test(l),S=l.replace(/^(https?|wss?)(:\/\/)?/,""),v=S.replace(/\/$/,""),c=O?"wss":"ws";return"".concat(c,"://").concat(v).concat(e.SOCKET_IO_PATH)}else if(l===""){var O=/^https/.test(window.location.protocol),c=O?"wss":"ws",a=window.location.port?":".concat(window.location.port):"";return"".concat(c,"://").concat(window.location.hostname).concat(a).concat(e.SOCKET_IO_PATH)}return l};p.parseSocketIOUrl=d;var E=function(l,O){O===void 0&&(O={});var S=/\?([\w]+=[\w]+)/,v=S.test(l),c="".concat(Object.entries(O).reduce(function(a,i){var t=i[0],r=i[1];return a+"".concat(t,"=").concat(r,"&")},"").slice(0,-1));return"".concat(l).concat(v?"&":"?").concat(c)};p.appendQueryParams=E;var _=function(l,O){O===void 0&&(O=e.SOCKET_IO_PING_INTERVAL);var S=function(){return l(e.SOCKET_IO_PING_CODE)};return window.setInterval(S,O)};return p.setUpSocketIOPing=_,p}var V={},Oe;function pe(){if(Oe)return V;Oe=1,Object.defineProperty(V,"__esModule",{value:!0}),V.heartbeat=void 0;var e=m();function d(E,_){var l=_||{},O=l.interval,S=O===void 0?e.DEFAULT_HEARTBEAT.interval:O,v=l.timeout,c=v===void 0?e.DEFAULT_HEARTBEAT.timeout:v,a=l.message,i=a===void 0?e.DEFAULT_HEARTBEAT.message:a,t=!1,r=setInterval(function(){try{typeof i=="function"?E.send(i()):E.send(i)}catch{}},S),o=setInterval(function(){t?t=!1:E.close()},c);return E.addEventListener("close",function(){clearInterval(r),clearInterval(o)}),function(){t=!0}}return V.heartbeat=d,V}var L={},x={},Ee;function ae(){return Ee||(Ee=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetSubscribers=e.removeSubscriber=e.addSubscriber=e.hasSubscribers=e.getSubscribers=void 0;var d={},E=[],_=function(c){return(0,e.hasSubscribers)(c)?Array.from(d[c]):E};e.getSubscribers=_;var l=function(c){var a;return((a=d[c])===null||a===void 0?void 0:a.size)>0};e.hasSubscribers=l;var O=function(c,a){d[c]=d[c]||new Set,d[c].add(a)};e.addSubscriber=O;var S=function(c,a){d[c].delete(a)};e.removeSubscriber=S;var v=function(c){if(c&&d.hasOwnProperty(c))delete d[c];else for(var a in d)d.hasOwnProperty(a)&&delete d[a]};e.resetSubscribers=v}(x)),x}var ge;function ue(){if(ge)return L;ge=1,Object.defineProperty(L,"__esModule",{value:!0}),L.resetGlobalState=L.assertIsWebSocket=void 0;var e=re(),d=ae();function E(l,O){if(!O&&!(l instanceof WebSocket))throw new Error("")}L.assertIsWebSocket=E;function _(l){(0,d.resetSubscribers)(l),(0,e.resetWebSockets)(l)}return L.resetGlobalState=_,L}var be;function We(){if(be)return k;be=1;var e=k&&k.__assign||function(){return e=Object.assign||function(i){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},e.apply(this,arguments)};Object.defineProperty(k,"__esModule",{value:!0}),k.attachListeners=void 0;var d=ne(),E=pe(),_=m(),l=ue(),O=function(i,t,r){var o;if(t.current.heartbeat&&i instanceof WebSocket){var n=typeof t.current.heartbeat=="boolean"?void 0:t.current.heartbeat;o=(0,E.heartbeat)(i,n)}i.onmessage=function(f){var u;o?.(),t.current.onMessage&&t.current.onMessage(f),!(typeof t.current.filter=="function"&&t.current.filter(f)!==!0)&&(t.current.heartbeat&&typeof t.current.heartbeat!="boolean"&&((u=t.current.heartbeat)===null||u===void 0?void 0:u.returnMessage)===f.data||r(f))}},S=function(i,t,r,o){i.onopen=function(n){t.current.onOpen&&t.current.onOpen(n),o.current=0,r(_.ReadyState.OPEN)}},v=function(i,t,r,o,n){if(_.isEventSourceSupported&&i instanceof EventSource)return function(){};(0,l.assertIsWebSocket)(i,t.current.skipAssert);var f;return i.onclose=function(u){var s;if(t.current.onClose&&t.current.onClose(u),r(_.ReadyState.CLOSED),t.current.shouldReconnect&&t.current.shouldReconnect(u)){var g=(s=t.current.reconnectAttempts)!==null&&s!==void 0?s:_.DEFAULT_RECONNECT_LIMIT;if(n.current<g){var y=typeof t.current.reconnectInterval=="function"?t.current.reconnectInterval(n.current):t.current.reconnectInterval;f=window.setTimeout(function(){n.current++,o()},y??_.DEFAULT_RECONNECT_INTERVAL_MS)}else t.current.onReconnectStop&&t.current.onReconnectStop(g),console.warn("Max reconnect attempts of ".concat(g," exceeded"))}},function(){return f&&window.clearTimeout(f)}},c=function(i,t,r,o,n){var f;return i.onerror=function(u){var s;if(t.current.onError&&t.current.onError(u),_.isEventSourceSupported&&i instanceof EventSource&&(t.current.onClose&&t.current.onClose(e(e({},u),{code:1006,reason:"An error occurred with the EventSource: ".concat(u),wasClean:!1})),r(_.ReadyState.CLOSED),i.close()),t.current.retryOnError)if(n.current<((s=t.current.reconnectAttempts)!==null&&s!==void 0?s:_.DEFAULT_RECONNECT_LIMIT)){var g=typeof t.current.reconnectInterval=="function"?t.current.reconnectInterval(n.current):t.current.reconnectInterval;f=window.setTimeout(function(){n.current++,o()},g??_.DEFAULT_RECONNECT_INTERVAL_MS)}else t.current.onReconnectStop&&t.current.onReconnectStop(t.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(t.current.reconnectAttempts," exceeded"))},function(){return f&&window.clearTimeout(f)}},a=function(i,t,r,o,n,f){var u=t.setLastMessage,s=t.setReadyState,g,y,I;return r.current.fromSocketIO&&(g=(0,d.setUpSocketIOPing)(f)),O(i,r,u),S(i,r,s,n),y=v(i,r,s,o,n),I=c(i,r,s,o,n),function(){s(_.ReadyState.CLOSING),y(),I(),i.close(),g&&clearInterval(g)}};return k.attachListeners=a,k}var U={},he;function De(){if(he)return U;he=1;var e=U&&U.__assign||function(){return e=Object.assign||function(t){for(var r,o=1,n=arguments.length;o<n;o++){r=arguments[o];for(var f in r)Object.prototype.hasOwnProperty.call(r,f)&&(t[f]=r[f])}return t},e.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0}),U.attachSharedListeners=void 0;var d=re(),E=m(),_=ae(),l=ne(),O=pe(),S=function(t,r,o){var n;o&&t instanceof WebSocket&&(n=(0,O.heartbeat)(t,typeof o=="boolean"?void 0:o)),t.onmessage=function(f){n?.(),(0,_.getSubscribers)(r).forEach(function(u){u.optionsRef.current.onMessage&&u.optionsRef.current.onMessage(f),!(typeof u.optionsRef.current.filter=="function"&&u.optionsRef.current.filter(f)!==!0)&&(o&&typeof o!="boolean"&&o?.returnMessage===f.data||u.setLastMessage(f))})}},v=function(t,r){t.onopen=function(o){(0,_.getSubscribers)(r).forEach(function(n){n.reconnectCount.current=0,n.optionsRef.current.onOpen&&n.optionsRef.current.onOpen(o),n.setReadyState(E.ReadyState.OPEN)})}},c=function(t,r){t instanceof WebSocket&&(t.onclose=function(o){(0,_.getSubscribers)(r).forEach(function(n){n.optionsRef.current.onClose&&n.optionsRef.current.onClose(o),n.setReadyState(E.ReadyState.CLOSED)}),delete d.sharedWebSockets[r],(0,_.getSubscribers)(r).forEach(function(n){var f;if(n.optionsRef.current.shouldReconnect&&n.optionsRef.current.shouldReconnect(o)){var u=(f=n.optionsRef.current.reconnectAttempts)!==null&&f!==void 0?f:E.DEFAULT_RECONNECT_LIMIT;if(n.reconnectCount.current<u){var s=typeof n.optionsRef.current.reconnectInterval=="function"?n.optionsRef.current.reconnectInterval(n.reconnectCount.current):n.optionsRef.current.reconnectInterval;setTimeout(function(){n.reconnectCount.current++,n.reconnect.current()},s??E.DEFAULT_RECONNECT_INTERVAL_MS)}else n.optionsRef.current.onReconnectStop&&n.optionsRef.current.onReconnectStop(n.optionsRef.current.reconnectAttempts),console.warn("Max reconnect attempts of ".concat(u," exceeded"))}})})},a=function(t,r){t.onerror=function(o){(0,_.getSubscribers)(r).forEach(function(n){n.optionsRef.current.onError&&n.optionsRef.current.onError(o),E.isEventSourceSupported&&t instanceof EventSource&&(n.optionsRef.current.onClose&&n.optionsRef.current.onClose(e(e({},o),{code:1006,reason:"An error occurred with the EventSource: ".concat(o),wasClean:!1})),n.setReadyState(E.ReadyState.CLOSED))}),E.isEventSourceSupported&&t instanceof EventSource&&t.close()}},i=function(t,r,o,n){var f;return o.current.fromSocketIO&&(f=(0,l.setUpSocketIOPing)(n)),S(t,r,o.current.heartbeat),c(t,r),v(t,r),a(t,r),function(){f&&clearInterval(f)}};return U.attachSharedListeners=i,U}var ye;function Re(){if(ye)return J;ye=1,Object.defineProperty(J,"__esModule",{value:!0}),J.createOrJoinSocket=void 0;var e=re(),d=m(),E=We(),_=De(),l=ae(),O=function(v,c,a,i,t){return function(){if((0,l.removeSubscriber)(v,c),!(0,l.hasSubscribers)(v)){try{var r=e.sharedWebSockets[v];r instanceof WebSocket&&(r.onclose=function(o){a.current.onClose&&a.current.onClose(o),i(d.ReadyState.CLOSED)}),r.close()}catch{}t&&t(),delete e.sharedWebSockets[v]}}},S=function(v,c,a,i,t,r,o,n){if(!d.isEventSourceSupported&&i.current.eventSourceOptions)throw d.isReactNative?new Error("EventSource is not supported in ReactNative"):new Error("EventSource is not supported");if(i.current.share){var f=null;e.sharedWebSockets[c]===void 0?(e.sharedWebSockets[c]=i.current.eventSourceOptions?new EventSource(c,i.current.eventSourceOptions):new WebSocket(c,i.current.protocols),v.current=e.sharedWebSockets[c],a(d.ReadyState.CONNECTING),f=(0,_.attachSharedListeners)(e.sharedWebSockets[c],c,i,n)):(v.current=e.sharedWebSockets[c],a(e.sharedWebSockets[c].readyState));var u={setLastMessage:t,setReadyState:a,optionsRef:i,reconnectCount:o,reconnect:r};return(0,l.addSubscriber)(c,u),O(c,u,i,a,f)}else{if(v.current=i.current.eventSourceOptions?new EventSource(c,i.current.eventSourceOptions):new WebSocket(c,i.current.protocols),a(d.ReadyState.CONNECTING),!v.current)throw new Error("WebSocket failed to be created");return(0,E.attachListeners)(v.current,{setLastMessage:t,setReadyState:a},i,r.current,o,n)}};return J.createOrJoinSocket=S,J}var W={},Te;function je(){return Te||(Te=1,function(e){var d=W&&W.__awaiter||function(v,c,a,i){function t(r){return r instanceof a?r:new a(function(o){o(r)})}return new(a||(a=Promise))(function(r,o){function n(s){try{u(i.next(s))}catch(g){o(g)}}function f(s){try{u(i.throw(s))}catch(g){o(g)}}function u(s){s.done?r(s.value):t(s.value).then(n,f)}u((i=i.apply(v,c||[])).next())})},E=W&&W.__generator||function(v,c){var a={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},i,t,r,o;return o={next:n(0),throw:n(1),return:n(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function n(u){return function(s){return f([u,s])}}function f(u){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,t&&(r=u[0]&2?t.return:u[0]?t.throw||((r=t.return)&&r.call(t),0):t.next)&&!(r=r.call(t,u[1])).done)return r;switch(t=0,r&&(u=[u[0]&2,r.value]),u[0]){case 0:case 1:r=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,t=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(r=a.trys,!(r=r.length>0&&r[r.length-1])&&(u[0]===6||u[0]===2)){a=0;continue}if(u[0]===3&&(!r||u[1]>r[0]&&u[1]<r[3])){a.label=u[1];break}if(u[0]===6&&a.label<r[1]){a.label=r[1],r=u;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(u);break}r[2]&&a.ops.pop(),a.trys.pop();continue}u=c.call(v,a)}catch(s){u=[6,s],t=0}finally{i=r=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}};Object.defineProperty(e,"__esModule",{value:!0}),e.getUrl=void 0;var _=ne(),l=m(),O=function(v){return new Promise(function(c){return window.setTimeout(c,v)})},S=function(v,c,a){return a===void 0&&(a=0),d(void 0,void 0,void 0,function(){var i,t,r,o,n,f,u,s;return E(this,function(g){switch(g.label){case 0:if(typeof v!="function")return[3,10];g.label=1;case 1:return g.trys.push([1,3,,9]),[4,v()];case 2:return i=g.sent(),[3,9];case 3:return g.sent(),c.current.retryOnError?(t=(f=c.current.reconnectAttempts)!==null&&f!==void 0?f:l.DEFAULT_RECONNECT_LIMIT,a<t?(r=typeof c.current.reconnectInterval=="function"?c.current.reconnectInterval(a):c.current.reconnectInterval,[4,O(r??l.DEFAULT_RECONNECT_INTERVAL_MS)]):[3,5]):[3,7];case 4:return g.sent(),[2,(0,e.getUrl)(v,c,a+1)];case 5:return(s=(u=c.current).onReconnectStop)===null||s===void 0||s.call(u,a),[2,null];case 6:return[3,8];case 7:return[2,null];case 8:return[3,9];case 9:return[3,11];case 10:i=v,g.label=11;case 11:return o=c.current.fromSocketIO?(0,_.parseSocketIOUrl)(i):i,n=c.current.queryParams?(0,_.appendQueryParams)(o,c.current.queryParams):o,[2,n]}})})};e.getUrl=S}(W)),W}var ee={},Ne;function qe(){return Ne||(Ne=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.websocketWrapper=void 0;var d=function(E,_){return new Proxy(E,{get:function(l,O){var S=l[O];return O==="reconnect"?_:typeof S=="function"?(console.error("Calling methods directly on the websocket is not supported at this moment. You must use the methods returned by useWebSocket."),function(){}):S},set:function(l,O,S){return/^on/.test(O)?(console.warn("The websocket's event handlers should be defined through the options object passed into useWebSocket."),!1):(l[O]=S,!0)}})};e.websocketWrapper=d,e.default=e.websocketWrapper}(ee)),ee}var Me;function ce(){if(Me)return M;Me=1;var e=M&&M.__assign||function(){return e=Object.assign||function(r){for(var o,n=1,f=arguments.length;n<f;n++){o=arguments[n];for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(r[u]=o[u])}return r},e.apply(this,arguments)},d=M&&M.__awaiter||function(r,o,n,f){function u(s){return s instanceof n?s:new n(function(g){g(s)})}return new(n||(n=Promise))(function(s,g){function y(h){try{b(f.next(h))}catch(N){g(N)}}function I(h){try{b(f.throw(h))}catch(N){g(N)}}function b(h){h.done?s(h.value):u(h.value).then(y,I)}b((f=f.apply(r,o||[])).next())})},E=M&&M.__generator||function(r,o){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},f,u,s,g;return g={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function y(b){return function(h){return I([b,h])}}function I(b){if(f)throw new TypeError("Generator is already executing.");for(;n;)try{if(f=1,u&&(s=b[0]&2?u.return:b[0]?u.throw||((s=u.return)&&s.call(u),0):u.next)&&!(s=s.call(u,b[1])).done)return s;switch(u=0,s&&(b=[b[0]&2,s.value]),b[0]){case 0:case 1:s=b;break;case 4:return n.label++,{value:b[1],done:!1};case 5:n.label++,u=b[1],b=[0];continue;case 7:b=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(b[0]===6||b[0]===2)){n=0;continue}if(b[0]===3&&(!s||b[1]>s[0]&&b[1]<s[3])){n.label=b[1];break}if(b[0]===6&&n.label<s[1]){n.label=s[1],s=b;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(b);break}s[2]&&n.ops.pop(),n.trys.pop();continue}b=o.call(r,n)}catch(h){b=[6,h],u=0}finally{f=s=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},_=M&&M.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(M,"__esModule",{value:!0}),M.useWebSocket=void 0;var l=te(),O=Ue(),S=m(),v=Re(),c=je(),a=_(qe()),i=ue(),t=function(r,o,n){o===void 0&&(o=S.DEFAULT_OPTIONS),n===void 0&&(n=!0);var f=(0,l.useState)(null),u=f[0],s=f[1],g=(0,l.useState)({}),y=g[0],I=g[1],b=(0,l.useMemo)(function(){if(u)try{return JSON.parse(u.data)}catch{return S.UNPARSABLE_JSON_OBJECT}return null},[u]),h=(0,l.useRef)(null),N=(0,l.useRef)(null),Q=(0,l.useRef)(function(){}),oe=(0,l.useRef)(0),ie=(0,l.useRef)([]),A=(0,l.useRef)(null),R=(0,l.useRef)(o);R.current=o;var Y=h.current&&y[h.current]!==void 0?y[h.current]:r!==null&&n===!0?S.ReadyState.CONNECTING:S.ReadyState.UNINSTANTIATED,we=o.queryParams?JSON.stringify(o.queryParams):null,j=(0,l.useCallback)(function(T,C){var q;if(C===void 0&&(C=!0),S.isEventSourceSupported&&N.current instanceof EventSource){console.warn("Unable to send a message from an eventSource");return}((q=N.current)===null||q===void 0?void 0:q.readyState)===S.ReadyState.OPEN?((0,i.assertIsWebSocket)(N.current,R.current.skipAssert),N.current.send(T)):C&&ie.current.push(T)},[]),Pe=(0,l.useCallback)(function(T,C){C===void 0&&(C=!0),j(JSON.stringify(T),C)},[j]),Ae=(0,l.useCallback)(function(){return R.current.share!==!0||S.isEventSourceSupported&&N.current instanceof EventSource?N.current:(A.current===null&&N.current&&((0,i.assertIsWebSocket)(N.current,R.current.skipAssert),A.current=(0,a.default)(N.current,Q)),A.current)},[]);return(0,l.useEffect)(function(){if(r!==null&&n===!0){var T,C=!1,q=!0,se=function(){return d(void 0,void 0,void 0,function(){var K,F,le;return E(this,function(fe){switch(fe.label){case 0:return K=h,[4,(0,c.getUrl)(r,R)];case 1:return K.current=fe.sent(),h.current===null?(console.error("Failed to get a valid URL. WebSocket connection aborted."),h.current="ABORTED",(0,O.flushSync)(function(){return I(function(H){return e(e({},H),{ABORTED:S.ReadyState.CLOSED})})}),[2]):(F=function(H){C||(0,O.flushSync)(function(){return s(H)})},le=function(H){C||(0,O.flushSync)(function(){return I(function(ke){var $;return e(e({},ke),h.current&&($={},$[h.current]=H,$))})})},q&&(T=(0,v.createOrJoinSocket)(N,h.current,le,R,F,Q,oe,j)),[2])}})})};return Q.current=function(){C||(A.current&&(A.current=null),T?.(),se())},se(),function(){C=!0,q=!1,A.current&&(A.current=null),T?.(),s(null)}}else(r===null||n===!1)&&(oe.current=0,I(function(K){var F;return e(e({},K),h.current&&(F={},F[h.current]=S.ReadyState.CLOSED,F))}))},[r,n,we,j]),(0,l.useEffect)(function(){Y===S.ReadyState.OPEN&&ie.current.splice(0).forEach(function(T){j(T)})},[Y]),{sendMessage:j,sendJsonMessage:Pe,lastMessage:u,lastJsonMessage:b,readyState:Y,getWebSocket:Ae}};return M.useWebSocket=t,M}var D={},Ie;function Fe(){if(Ie)return D;Ie=1;var e=D&&D.__assign||function(){return e=Object.assign||function(v){for(var c,a=1,i=arguments.length;a<i;a++){c=arguments[a];for(var t in c)Object.prototype.hasOwnProperty.call(c,t)&&(v[t]=c[t])}return v},e.apply(this,arguments)};Object.defineProperty(D,"__esModule",{value:!0}),D.useSocketIO=void 0;var d=te(),E=ce(),_=m(),l={type:"empty",payload:null},O=function(v){if(!v||!v.data)return l;var c=v.data.match(/\[.*]/);if(!c)return l;var a=JSON.parse(c);return!Array.isArray(a)||!a[1]?l:{type:a[0],payload:a[1]}},S=function(v,c,a){c===void 0&&(c=_.DEFAULT_OPTIONS),a===void 0&&(a=!0);var i=(0,d.useMemo)(function(){return e(e({},c),{fromSocketIO:!0})},[]),t=(0,E.useWebSocket)(v,i,a),r=t.sendMessage,o=t.sendJsonMessage,n=t.lastMessage,f=t.readyState,u=t.getWebSocket,s=(0,d.useMemo)(function(){return O(n)},[n]);return{sendMessage:r,sendJsonMessage:o,lastMessage:s,lastJsonMessage:s,readyState:f,getWebSocket:u}};return D.useSocketIO=S,D}var w={},Ce;function Ge(){if(Ce)return w;Ce=1;var e=w&&w.__assign||function(){return e=Object.assign||function(S){for(var v,c=1,a=arguments.length;c<a;c++){v=arguments[c];for(var i in v)Object.prototype.hasOwnProperty.call(v,i)&&(S[i]=v[i])}return S},e.apply(this,arguments)},d=w&&w.__rest||function(S,v){var c={};for(var a in S)Object.prototype.hasOwnProperty.call(S,a)&&v.indexOf(a)<0&&(c[a]=S[a]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(S);i<a.length;i++)v.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(S,a[i])&&(c[a[i]]=S[a[i]]);return c};Object.defineProperty(w,"__esModule",{value:!0}),w.useEventSource=void 0;var E=te(),_=ce(),l=m(),O=function(S,v,c){v===void 0&&(v=l.DEFAULT_EVENT_SOURCE_OPTIONS);var a=v.withCredentials,i=v.events,t=d(v,["withCredentials","events"]);c===void 0&&(c=!0);var r=e(e({},t),{eventSourceOptions:{withCredentials:a}}),o=(0,E.useRef)(l.EMPTY_EVENT_HANDLERS);i&&(o.current=i);var n=(0,_.useWebSocket)(S,r,c),f=n.lastMessage,u=n.readyState,s=n.getWebSocket;return(0,E.useEffect)(function(){f?.type&&Object.entries(o.current).forEach(function(g){var y=g[0],I=g[1];y===f.type&&I(f)})},[f]),{lastEvent:f,readyState:u,getEventSource:s}};return w.useEventSource=O,w}var me;function He(){return me||(me=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.resetGlobalState=e.useEventSource=e.ReadyState=e.useSocketIO=e.default=void 0;var d=ce();Object.defineProperty(e,"default",{enumerable:!0,get:function(){return d.useWebSocket}});var E=Fe();Object.defineProperty(e,"useSocketIO",{enumerable:!0,get:function(){return E.useSocketIO}});var _=m();Object.defineProperty(e,"ReadyState",{enumerable:!0,get:function(){return _.ReadyState}});var l=Ge();Object.defineProperty(e,"useEventSource",{enumerable:!0,get:function(){return l.useEventSource}});var O=ue();Object.defineProperty(e,"resetGlobalState",{enumerable:!0,get:function(){return O.resetGlobalState}})}(z)),z}var Je=He();const Ve=G.createContext({waitingForNewTurn:!1,sessionUser:null,userMetadata:{cf_connecting_ip:null,ip_city:null,time_zone:null,user_country:null,user_locale:null,user_region:null,user_region_code:null,latitude:null,longitude:null,locationAccuracy:null},submitFollowup:()=>Promise.resolve(),submitSearch:()=>Promise.resolve(),retrySearch:()=>Promise.resolve(),resetSearch:ve,prefetch:ve,readyState:Je.ReadyState.UNINSTANTIATED}),Ze=()=>G.useContext(Ve),Be={version:0,useLocation:!1,temperatureUnit:void 0},Ke=G.createContext({settings:Be,setSettings:()=>{}}),Qe={suggestions:!0,showInlineFollowups:!1},Ye=G.createContext({settings:Qe,setSettings:()=>{}});function xe(){const{settings:e,setSettings:d}=G.useContext(Ke);return[e,d]}function et(){const{settings:e,setSettings:d}=G.useContext(Ye);return[e,d]}const $e={isInternalSettingsModalOpen:!1,isSettingsModalOpen:!1,isDebugModalOpen:!1,isUsageNuxModalOpen:!1,isWelcomePageOpen:!1},P=Le()(()=>({...$e})),B={isInternalSettingsModalOpen:e=>e.isInternalSettingsModalOpen,isSettingsModalOpen:e=>e.isSettingsModalOpen,isDebugModalOpen:e=>e.isDebugModalOpen,isUsageNuxModalOpen:e=>e.isUsageNuxModalOpen,isWelcomePageOpen:e=>e.isWelcomePageOpen,isModalOpen:e=>B.isInternalSettingsModalOpen(e)||B.isSettingsModalOpen(e)||B.isDebugModalOpen(e)||B.isUsageNuxModalOpen(e)||B.isWelcomePageOpen(e)},tt={toggleInternalSettingsModalOpen(){P.setState(e=>({isInternalSettingsModalOpen:!e.isInternalSettingsModalOpen}))},setInternalSettingsModalOpen(e){P.setState({isInternalSettingsModalOpen:e})},toggleSettingsModalOpen(){P.setState(e=>({isSettingsModalOpen:!e.isSettingsModalOpen}))},setSettingsModalOpen(e){P.setState({isSettingsModalOpen:e})},toggleDebugModalOpen(){P.setState(e=>({isDebugModalOpen:!e.isDebugModalOpen}))},setDebugModalOpen(e){P.setState({isDebugModalOpen:e})},setUsageNuxModalOpen(e){P.setState({isUsageNuxModalOpen:e})},setWelcomePageOpen(e){P.setState({isWelcomePageOpen:e})}};export{Qe as I,B as U,tt as a,et as b,Ze as c,Je as d,xe as e,P as u};
//# sourceMappingURL=gxaekez9ch7w0c1d.js.map
