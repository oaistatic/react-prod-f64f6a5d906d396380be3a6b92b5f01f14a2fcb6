import{f as Q,r as l,ao as X,h as p,b as B,j as e,M as m,e as R,l as H,n as N}from"./gg0tb34p9fzo1omt.js";import{oi as $,oj as J,fy as ee,ok as te,Y as ae,X as se,cD as S,d as x,m as w,ol as ne,R as ie,aG as re,cI as f,kM as oe,aB as P,om as ce,ch as le,eV as de,bg as ue,c2 as b,bU as A,G as L,c6 as me,H as ge,P as xe,dn as pe,eC as D,e0 as T,eX as fe,on as Ce,dj as _,cy as y,dL as he,dW as ve,el as be,dX as je}from"./g670b8vtkhx0yc6d.js";import{gK as W,lo as we,lp as ye,lq as ke,lr as Se,bE as Ae,ls as Le,lt as Me,av as Ne,cs as Pe,am as E,cl as _e,bf as Ee,lu as Be,w as I,lv as Re,lw as He}from"./forbprkns1cohsbl.js";import{b as De}from"./dkpt9rl3nmxrd3k2.js";import{W as Te}from"./b45t2szdibt7lu65.js";import{d as O,a as F}from"./o02mhmgcyrsuseq4.js";import{S as We}from"./bznan1jknv1y4qru.js";import{L as G}from"./fz8lyjvdpywhlf94.js";function Ie({cycleReferenceDate:t,cycleIndex:s,targetDate:a=new Date,period:n}){const i=n==="yearly"?$:J,r=i(a,s),o=j(t,r,n);return ee(o,r)?{start:j(t,i(r,-1),n),end:o}:{start:o,end:j(t,i(r,1),n)}}function j(t,s,a){return te(t,{year:se(s),...a==="monthly"&&{month:ae(s)}})}function ct(t=0){const s=W();return l.useMemo(()=>{if(s.status==="pending")return"pending";const a=s.data;if(!a)return;const n=a.next_credit_grant_update??a.active_start??a.active_until;if(!n)return;let i=a.billing_period??"monthly";if(a.last_credit_grant_update&&a.next_credit_grant_update){const r=new Date(a.last_credit_grant_update),o=new Date(a.next_credit_grant_update);if(i=ne(o,r)>1?"yearly":"monthly",t===0)return{start:r,end:o,period:i}}return{...Ie({cycleReferenceDate:new Date(n),cycleIndex:t,period:i}),period:i}},[s,t])}function Oe(){const t=S(),s=x(),n=w(s,"2861925050")&&t!=null&&t.isEnterprisey()&&(t.isAdminOfAccount()||t.isOwnerOfAccount())&&t.organizationId!=null,i=Q({queryKey:Fe(t?.organizationId),queryFn:()=>ie.safeGet("/subscriptions/{organization_id}/at_overage_limit",{parameters:{path:{organization_id:t?.organizationId}}}),enabled:n});return n&&i.data?.organization_at_overage_limit===!0}function Fe(t){return["is-at-overage-limit",t]}const Ge=t=>l.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},l.createElement("path",{d:"M16.0012 10.6653H13.7502C13.5355 10.6653 13.3341 10.5608 13.2092 10.386L11.7288 8.31476L8.9104 13.2464C8.79795 13.4432 8.59283 13.5689 8.36646 13.5804C8.14022 13.5917 7.92391 13.4874 7.79224 13.303L5.90845 10.6653H3.99829V12.6663C3.99829 13.3772 3.9992 13.8707 4.03052 14.2542C4.0612 14.6298 4.11803 14.8413 4.19849 14.9993L4.2688 15.1263C4.44511 15.4137 4.69813 15.6481 5.00024 15.8021L5.13013 15.8577C5.2739 15.9092 5.46341 15.947 5.74536 15.97C6.12888 16.0014 6.62222 16.0013 7.33325 16.0013H12.6663C13.3771 16.0013 13.8707 16.0013 14.2542 15.97C14.6295 15.9394 14.8413 15.8824 14.9993 15.8021L15.1262 15.7308C15.4136 15.5545 15.6481 15.3014 15.802 14.9993L15.8577 14.8694C15.9091 14.7257 15.9469 14.536 15.97 14.2542C16.0013 13.8707 16.0012 13.3772 16.0012 12.6663V10.6653ZM16.0012 7.33331C16.0012 6.62228 16.0013 6.12894 15.97 5.74542C15.9469 5.46347 15.9091 5.27396 15.8577 5.13019L15.802 5.00031C15.6481 4.6982 15.4137 4.44517 15.1262 4.26886L14.9993 4.19855C14.8413 4.11809 14.6297 4.06127 14.2542 4.03058C13.8707 3.99926 13.3771 3.99835 12.6663 3.99835H7.33325C6.62221 3.99835 6.12888 3.99924 5.74536 4.03058C5.46351 4.05361 5.27388 4.09047 5.13013 4.14191L5.00024 4.19855C4.69799 4.35257 4.44511 4.58669 4.2688 4.87433L4.19849 5.00031C4.11798 5.15831 4.06122 5.36972 4.03052 5.74542C3.99918 6.12894 3.99829 6.62228 3.99829 7.33331V9.33527H6.25024L6.32935 9.34015C6.51363 9.36232 6.68197 9.46059 6.79126 9.61359L8.27075 11.6849L11.0891 6.75324L11.136 6.68292C11.2537 6.52696 11.4351 6.42927 11.6331 6.41925C11.8593 6.40783 12.0755 6.51238 12.2073 6.6966L14.092 9.33527H16.0012V7.33331ZM17.3313 12.6663C17.3313 13.3553 17.3319 13.9124 17.2952 14.3626C17.2624 14.7636 17.1974 15.1247 17.053 15.4612L16.9866 15.6038C16.7211 16.1248 16.3172 16.5605 15.8215 16.8646L15.6038 16.9866C15.227 17.1786 14.8206 17.2578 14.3625 17.2952C13.9123 17.332 13.3553 17.3314 12.6663 17.3314H7.33325C6.64416 17.3314 6.0872 17.332 5.63696 17.2952C5.23628 17.2625 4.87563 17.1973 4.53931 17.053L4.39673 16.9866C3.87561 16.7211 3.43911 16.3174 3.13501 15.8216L3.01294 15.6038C2.82097 15.2271 2.74177 14.8206 2.70435 14.3626C2.66758 13.9124 2.66821 13.3553 2.66821 12.6663V7.33331C2.66821 6.64422 2.66756 6.08727 2.70435 5.63702C2.74176 5.17923 2.82113 4.77341 3.01294 4.39679L3.13501 4.17804C3.4391 3.68233 3.87569 3.27848 4.39673 3.013L4.53931 2.9466C4.8756 2.80236 5.23632 2.73715 5.63696 2.70441C6.0872 2.66762 6.64416 2.66827 7.33325 2.66827H12.6663C13.3553 2.66827 13.9123 2.66764 14.3625 2.70441C14.8206 2.74183 15.227 2.82103 15.6038 3.013L15.8215 3.13507C16.3174 3.43917 16.7211 3.87567 16.9866 4.39679L17.053 4.53937C17.1973 4.87569 17.2624 5.23634 17.2952 5.63702C17.332 6.08727 17.3313 6.64422 17.3313 7.33331V12.6663Z"})),Ue=t=>l.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},l.createElement("path",{d:"M16.835 8.16669C16.835 7.45565 16.8341 6.96232 16.8027 6.5788C16.772 6.20309 16.7153 5.99169 16.6348 5.83368C16.4588 5.48844 16.1783 5.20784 15.833 5.03192C15.675 4.95141 15.4636 4.89466 15.0879 4.86395C14.7044 4.83262 14.211 4.83173 13.5 4.83173H6.5C5.78896 4.83173 5.29563 4.83262 4.91211 4.86395C4.5364 4.89466 4.325 4.95141 4.16699 5.03192C3.82175 5.20784 3.54116 5.48844 3.36524 5.83368C3.28473 5.99169 3.22797 6.20309 3.19727 6.5788C3.16593 6.96232 3.16504 7.45565 3.16504 8.16669V11.8337C3.16504 12.5445 3.16594 13.0381 3.19727 13.4216C3.22797 13.7971 3.28475 14.0087 3.36524 14.1667C3.54117 14.5118 3.82182 14.7926 4.16699 14.9684C4.32499 15.0489 4.53646 15.1057 4.91211 15.1364C5.29563 15.1677 5.78896 15.1686 6.5 15.1686H13.5C14.211 15.1686 14.7044 15.1677 15.0879 15.1364C15.4635 15.1057 15.675 15.0489 15.833 14.9684C16.1782 14.7926 16.4588 14.5118 16.6348 14.1667C16.7153 14.0087 16.772 13.7971 16.8027 13.4216C16.8341 13.0381 16.835 12.5445 16.835 11.8337V8.16669ZM18.165 11.8337C18.165 12.5226 18.1657 13.0798 18.1289 13.53C18.0915 13.9877 18.0122 14.3936 17.8203 14.7702C17.5169 15.3657 17.0321 15.8496 16.4365 16.153C16.0598 16.3449 15.6542 16.4242 15.1963 16.4616C14.746 16.4984 14.1891 16.4987 13.5 16.4987H6.5C5.81091 16.4987 5.25395 16.4984 4.80371 16.4616C4.34583 16.4242 3.94015 16.3449 3.56348 16.153C2.96794 15.8496 2.48313 15.3657 2.17969 14.7702C1.98783 14.3936 1.90853 13.9877 1.87109 13.53C1.83431 13.0798 1.83496 12.5226 1.83496 11.8337V8.16669C1.83496 7.4776 1.83431 6.92064 1.87109 6.4704C1.90851 6.01261 1.98788 5.60678 2.17969 5.23016C2.48313 4.63463 2.96794 4.14981 3.56348 3.84638C3.94009 3.65457 4.34592 3.57519 4.80371 3.53778C5.25395 3.501 5.81091 3.50165 6.5 3.50165H13.5C14.1891 3.50165 14.746 3.501 15.1963 3.53778C15.6541 3.57519 16.0599 3.65457 16.4365 3.84638C17.0321 4.14981 17.5169 4.63463 17.8203 5.23016C18.0121 5.60678 18.0915 6.01261 18.1289 6.4704C18.1657 6.92064 18.165 7.4776 18.165 8.16669V11.8337Z"}),l.createElement("path",{d:"M17.5 7.66832L17.6338 7.68199C17.9369 7.74392 18.165 8.01192 18.165 8.33335C18.165 8.65479 17.9369 8.92279 17.6338 8.98472L17.5 8.99839H2.5C2.13273 8.99839 1.83496 8.70062 1.83496 8.33335C1.83496 7.96608 2.13273 7.66832 2.5 7.66832H17.5Z"}),l.createElement("path",{d:"M14.167 11.835L14.3008 11.8487C14.6038 11.9107 14.832 12.1787 14.832 12.5C14.832 12.8213 14.6038 13.0893 14.3008 13.1514L14.167 13.1651H12.5C12.1327 13.1651 11.835 12.8673 11.835 12.5C11.835 12.1328 12.1327 11.835 12.5 11.835H14.167Z"}));function lt(){return re(X("routes/admin"))}function dt(){const t=f(n=>n.currentWorkspace),s=t!=null?F(t.role):void 0,a=p();l.useEffect(()=>{s===!1&&a("/admin")},[s,a])}function ut(){const t=f(n=>n.currentWorkspace),s=t!=null?O(t.role):void 0,a=p();l.useEffect(()=>{s===!1&&a("/admin")},[s,a])}function Ve(){const t=oe(),s=x(),a=P(s,"3131667714").get("regions",[]),n=ce(),i=P(s,"1001765573");return t&&!a.includes(n)?!1:i.get("ca_admin_enabled",!1)}function ze({accountId:t,subscription:s}){const a=B(),n=le(),i=we(t),[r,o]=l.useState(!1),c=ye(t),g=async()=>{o(!0);try{await i.mutateAsync(t)}catch{n.warning(a.formatMessage(v.errorRenewingSubscription),{hasCloseButton:!0})}finally{o(!1)}};return e.jsx("div",{className:"bg-token-main-surface-secondary",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-between px-2 py-4 md:px-6 lg:px-10 lg:py-6",children:[e.jsxs("div",{className:"mx-2 grow md:mx-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(de,{className:"me-4 hidden text-orange-500 md:block"}),e.jsx("p",{className:"text-lg font-semibold",children:e.jsx(m,{...v.workspaceWillBeDeactivated})})]}),s.active_until!=null&&e.jsx("p",{className:"md:ms-8",children:e.jsx(m,{...v.retainAccessUntil,values:{expiryDate:new Date(s.active_until)}})})]}),c&&e.jsx(ue,{color:"primary",onClick:g,loading:r,children:e.jsx(m,{...v.reactivateBtn})})]})})}const v=R({retainAccessUntil:{id:"adminPage.retainAccessUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},workspaceWillBeDeactivated:{id:"adminPage.workspaceWillBeDeactivated",defaultMessage:"This workspace will be deactivated."},reactivateBtn:{id:"adminPage.reactivateBtn",defaultMessage:"Reactivate"},errorRenewingSubscription:{id:"adminPage.errorRenewingSubscription",defaultMessage:"There was an error reactivating your subscription."}}),k="/admin/billing";function u({route:t,icon:s,upsellEnterprise:a=!1,...n}){const i=H().pathname.replace(/\/$/,"")||"/",r=p();return a?e.jsx(je,{label:e.jsx(m,{...d.availableForEnterprise}),side:"right",contentClassName:"cant-hover:hidden",children:e.jsx(y,{as:"div",role:"button",fillContainer:!0,icon:I,label:"name"in n?e.jsx(m,{...n.name}):n.children})}):e.jsx(y,{as:"div",role:"button",fillContainer:!0,active:i===t,onClick:o=>{r(t),o.stopPropagation()},icon:s,label:"name"in n?e.jsx(m,{...n.name}):n.children})}function Ze({workspace:t,hasAdminPrivileges:s,hasOwnerPrivileges:a}){const n=p(),i=S(),r=i&&i.features.includes(ke),o=l.useCallback(()=>{n("/")},[n]),c=f(fe.isEnterpriseyPlan),g=Ve(),{isComingSoon:C}=Ce(),M=g||C,h=x(),V=w(h,"2509278897"),z=w(h,"4105779609"),Z=T(),q=i?.isTeam()&&z,K=Se(He,Re,!1,!0),Y=B().formatMessage({id:"Q6nsOM",defaultMessage:"Close sidebar"});return e.jsxs("nav",{className:"pb-1.5",children:[!Z&&e.jsx("div",{className:"h-header-height flex items-center px-2",children:e.jsx(Ae,{className:"no-draggable","aria-label":Y,onClick:()=>{_.setSidebarOpen(!1)},icon:K,mobileIcon:Le,"data-testid":"close-sidebar-button"})}),e.jsx("div",{className:"h-header-height flex flex-col justify-center",children:e.jsx(y,{as:"button",onClick:o,icon:e.jsx(Me,{className:"icon-sm"}),label:e.jsx(m,{...d.backToChat})})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:A("flex flex-col gap-2 rounded p-4",a&&"hover:bg-token-main-surface-secondary cursor-pointer"),onClick:()=>{a&&_.openModal(he.WorkspaceAppearance)},children:[e.jsx(Ne,{size:"large",src:t?.profilePictureUrl}),e.jsxs("div",{className:"align-center flex min-w-0 flex-row",children:[e.jsx("h2",{className:"text-token-text-primary flex-1 truncate text-lg dark:text-white",children:t?.name}),a?e.jsx("div",{className:"my-auto h-4 flex-initial align-middle dark:text-white",children:e.jsx(Pe,{className:"icon-sm opacity-70 hover:opacity-100"})}):null]})]}),e.jsx(u,{route:"/admin",icon:We,name:d.membersPageTitle}),c&&e.jsx(u,{route:"/admin/groups",icon:E,upsellEnterprise:!c,name:N({id:"aecR1i",defaultMessage:"Groups"})}),s&&e.jsx(u,{route:k,icon:Ue,name:d.billing}),a&&e.jsx(u,{route:"/admin/gpts",icon:_e,name:d.gpts}),s&&(M||V)&&e.jsx(u,{route:"/admin/ca",icon:Ee,name:d.connections}),a&&e.jsx(u,{route:"/admin/settings",icon:ve,name:d.settings}),!c&&e.jsx("span",{className:"border-y-token-border-heavy mx-3 border-t"}),!c&&e.jsx(u,{route:"/admin/groups",icon:E,upsellEnterprise:!c,name:N({id:"aecR1i",defaultMessage:"Groups"})}),s&&e.jsx(u,{route:"/admin/usage",icon:Ge,upsellEnterprise:!c,children:e.jsx("div",{className:"flex flex-row items-center gap-2",children:e.jsx(m,{...d.userAnalytics})})}),a&&e.jsx(u,{route:"/admin/identity",upsellEnterprise:!c&&!q,icon:Be,name:d.identity}),a&&r&&e.jsx(u,{route:"/admin/ip-allowlist",icon:I,name:d.ipAllowlist})]})]})}function mt({mobilePageTitle:t,requireAdminPrivileges:s=!1,requireOwnerPrivileges:a=!1,children:n}){const i=f(h=>h.currentWorkspace),r=p(),o=i!=null?F(i.role):void 0,c=i!=null?O(i.role):void 0;l.useEffect(()=>{s&&o===!1&&r("/admin"),a&&c===!1&&r("/admin")},[s,o,r,a,c]);const g=T(),C=x();return L(C)==null?null:e.jsxs(e.Fragment,{children:[e.jsx(De,{mobileHeaderContent:t,mobileHeaderRightContent:e.jsx(G,{}),forceOpenDesktopSidebar:g,renderNavSidebar:()=>e.jsx(Ze,{workspace:i??void 0,hasAdminPrivileges:o,hasOwnerPrivileges:c}),children:n}),i==null?null:e.jsx(Te,{workspace:i})]})}function qe(){return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{}),e.jsx(Ye,{})]})}function Ke(){const{data:t}=W(),s=x(),a=L(s),n=a&&t&&t.plan_type===ge.TEAM&&!t.will_renew;return e.jsx(e.Fragment,{children:n&&e.jsx(ze,{accountId:a.id,subscription:t})})}function Ye(){const t=S(),s=Oe(),a=H().pathname!==k;return l.useEffect(()=>{s&&xe.logEventWithStatsig("ChatGPT Credits: At Overage Limit Banner Shown","chatgpt_credits_at_overage_limit_banner_shown",{workspaceId:t?.id,workspaceName:t?.name})},[s,t]),e.jsx(e.Fragment,{children:s&&e.jsx("div",{className:"text-token-interactive-label-danger-secondary-default bg-token-bg-status-error",children:e.jsxs("div",{className:"mx-auto flex w-full max-w-5xl items-center justify-center px-2 py-4 text-xs md:px-6 lg:px-10",children:[e.jsx(pe,{className:"me-2 shrink-0"}),e.jsx(m,{...d.atOverageLimitBannerText,values:{link:n=>a?e.jsx(D,{className:"mx-1",href:k,children:n}):n}})]})})})}const U=b.div`w-full flex-row items-center gap-2`,Qe=b(U)`text-sm text-token-text-tertiary`,Xe=b.div`mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10`;function gt({title:t,subtitle:s,actions:a,tabsHeader:n,badge:i,navigation:r}){return e.jsxs(e.Fragment,{children:[e.jsx(qe,{}),e.jsxs("div",{className:A("border-token-bg-tertiary flex flex-col gap-6 border-b md:mt-12",!n&&"pb-6"),children:[r&&e.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:px-6 lg:px-10",children:r}),e.jsx("div",{className:"mx-auto w-full max-w-4xl px-2 md:block md:px-6 lg:px-10",children:e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(U,{className:"hidden md:flex",children:[e.jsx("h2",{children:t}),i]}),s&&e.jsx(Qe,{className:"mt-1",children:s})]}),e.jsx("div",{className:"flex",children:a})]})}),n&&e.jsx(Xe,{children:n})]}),e.jsx("div",{className:"absolute end-0 top-0 hidden px-2 py-1.5 md:block",children:e.jsx(G,{})})]})}function xt({items:t}){return e.jsx("div",{className:"text-token-text-secondary text-caption-regular flex items-center gap-2",children:t.map((s,a)=>{const n=A(a===t.length-1?"text-token-text-primary":"text-token-text-secondary","no-underline");return e.jsxs(e.Fragment,{children:[s.href?e.jsx(D,{href:s.href,style:{textDecoration:"none"},className:n,children:s.label},a):e.jsx("div",{className:n,children:s.label},a),a<t.length-1&&e.jsx(be,{className:"icon-sm"})]})})})}const $e=b.div`max-w-4xl mx-auto w-full px-2 md:px-6 lg:px-10 pb-10`;function pt({children:t,showSpinner:s,skipLegacyWorkspaceCheck:a}){const n=x(),i=L(n),r=f(g=>g.currentWorkspace),o=!a&&!r,c=!i||s;return e.jsxs($e,{children:[c&&e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsx(me,{})}),!c&&o&&e.jsx("div",{className:"flex min-h-[80vh] items-center justify-center",children:e.jsx(m,{...d.workspaceNotFound})}),!c&&!o&&t]})}const d=R({workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},membersPageTitle:{id:"adminPage.membersPageTitle",defaultMessage:"Members"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},userAnalytics:{id:"adminPage.userAnalytics",defaultMessage:"User analytics"},billing:{id:"adminPage.billing.1",defaultMessage:"Billing"},gpts:{id:"adminPage.gpts",defaultMessage:"GPTs"},connections:{id:"adminPage.connections",defaultMessage:"Connectors"},settings:{id:"BExb/1",defaultMessage:"Settings & permissions"},identity:{id:"adminPage.identity.0",defaultMessage:"Identity & provisioning"},ipAllowlist:{id:"adminPage.ipAllowlist",defaultMessage:"IP allowlist"},availableForEnterprise:{id:"adminPage.availableForEnterprise",defaultMessage:"Available for Enterprise plan"},atOverageLimitBannerText:{id:"adminPage.atOverageLimitBannerText",defaultMessage:"Your organization has reached its credit overage limit. Access to advanced features is paused. <link>Adjust the limit</link> to restore access."}});export{mt as A,Ue as S,gt as a,xt as b,pt as c,ut as d,Oe as e,ct as f,Fe as g,dt as h,Ve as i,lt as u};
//# sourceMappingURL=c2kjct7accafncjs.js.map
