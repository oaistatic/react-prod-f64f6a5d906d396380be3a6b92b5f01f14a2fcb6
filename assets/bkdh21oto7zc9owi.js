import{aJ as s,aN as u}from"./forbprkns1cohsbl.js";import{aG as c}from"./g670b8vtkhx0yc6d.js";const a="/service-worker/events.js";function p(r){const i="=".repeat((4-r.length%4)%4),o=(r+i).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(o),t=new Uint8Array(n.length);for(let e=0;e<n.length;++e)t[e]=n.charCodeAt(e);return t}async function w(){if(typeof window>"u"||typeof navigator>"u")throw new Error("Push registration not supported in SSR");if(!("serviceWorker"in navigator&&"PushManager"in window))throw new Error("Push registration not supported");return await(await navigator.serviceWorker.register(a)).pushManager.getSubscription()}async function f(){if(typeof window>"u")return!1;const r="serviceWorker"in navigator,i="Notification"in window;return r&&i}async function h(){try{if(await w())return!0}catch{}return!1}async function b(){if(typeof window>"u"||typeof navigator>"u")throw new Error("Push registration not supported in SSR");if(!("serviceWorker"in navigator&&"PushManager"in window))throw new Error("Push registration not supported");const r=c("BElP4rBIs6aV_3Ic7Fl2rBw_a27isvPyMl_W4WwtlqsiehOYFYnwE21byf9bvFGEwWL8-k-zjZfGCG8HHKGW7OQ"),i=p(r),t=(await(await navigator.serviceWorker.register(a)).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i})).toJSON();if(t.keys===void 0)throw new Error("Subscription keys are undefined");if(t.endpoint===void 0)throw new Error("Subscription endpoint is undefined");return s.logSystemSuccess(),s.logRegistration(),u.getOrCreateSubscription({endpoint:t.endpoint,p256dh:t.keys.p256dh,auth:t.keys.auth})}export{h as a,b as c,f as g};
//# sourceMappingURL=bkdh21oto7zc9owi.js.map
