const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/h43a3havrva84dsv.js","assets/gg0tb34p9fzo1omt.js","assets/g670b8vtkhx0yc6d.js","assets/root-ilxovqci.css","assets/j68j9ti01uzipo54.js","assets/forbprkns1cohsbl.js","assets/conversation-small-mtta3ozz.css","assets/gxaekez9ch7w0c1d.js","assets/juuj7s9t3x7u9it2.js","assets/cx1v46pslsfvescw.js","assets/BusinessesMap-oeh39yix.css"])))=>i.map(i=>d[i]);
import{r as g,j as n,M as P,b as D,v as lr,a as cr,m as es,B as dr,f as ur,c as is,R as fr,e as ls,n as zt,A as Ms}from"./gg0tb34p9fzo1omt.js";import{tJ as mr,tK as hr,tL as Bt,tM as he,dC as Wn,c7 as pr,a4 as Un,i$ as gr,nF as xr,mZ as St,tN as br,dQ as yr,mA as vr,bd as cs,qN as ee,tO as wr,b4 as _r,tP as kr,lt as Sr,pC as Hn,pA as Vn,d6 as Cr,bM as jr,h$ as Nr,i3 as ds,i4 as us,i6 as fs,i7 as ms,tQ as Tr,cs as $r,i9 as Pr,ik as Es,ij as Jn,il as Ct,a_ as lt,h_ as Mr,D as Er,aQ as Ar,dw as Ir,tR as Rr,rC as Lr,tS as Dr,dM as Fr,dX as Or,dD as Xn,tT as qn,fy as zr,lI as Br,tU as Wr,tV as Gn,tW as Zn,tX as Ur,tY as Hr,tZ as Vr,b3 as Jr,b5 as Xr,lK as qr,be as Gr,bf as Yn,bg as Kn,t_ as Zr,bh as Yr,bv as Kr,i2 as Qr,t$ as ea,u0 as ta,rE as sa,u1 as na,u2 as oa,u3 as ra,u4 as aa,aH as ia,aw as la,a3 as ca,rk as da,u5 as ua,fN as fa,u6 as Wt,u7 as ma,rd as ha}from"./forbprkns1cohsbl.js";import{bU as j,g as Ze,a7 as jt,a3 as pa,c6 as Ye,ch as Nt,d as de,m as te,an as Qn,k9 as ga,bW as ft,el as xa,bg as ie,aB as ba,D as Tt,iw as ya,n as va,ar as eo,ad as to,j3 as wa,cY as Ie,c0 as _a,eq as ka,c3 as Sa,c4 as Ca,dX as $t,gE as ja,ho as Na,n5 as Ta,n6 as $a,n7 as Pa,ck as Pt,gF as ue,rB as Ma,dw as hs,hm as Ea,R as Aa,A as Ia,h as mt,jG as ps,gb as Ra,P as ct,jR as La,hC as Da,iQ as Fa,bf as Oa,rC as za,il as so,a_ as Ba,bo as Mt,kE as ze,e0 as no,jQ as Wa,c2 as oo,cu as Ua,rD as Ha,dU as Va,c5 as Ja,kA as Xa,bV as qa,j5 as ro,ic as Ga,j as Za,oG as Ya}from"./g670b8vtkhx0yc6d.js";import{u as ao,R as io,a as lo,S as As,m as Ka,b as Qa,I as ei,c as ti,C as si,d as ni,e as oi,f as ri,M as ai,r as ii}from"./t0sn17j7kr5s35sj.js";import{u as gs}from"./h0k3jyicolebvgjn.js";import{B as U,b as I,C as Fe,s as li,c as ci,a as di,e as Is,P as ui,F as fi,i as mi}from"./nqh4b4c2xubfdrnc.js";import{S as hi}from"./dwweugcujrtabsgm.js";import{L as pi}from"./oqyy1xfq5y51tstr.js";import{c as gi,a as xi,W as bi}from"./cnl9n9geu2oxb8o4.js";import{W as xs}from"./hu61i4occl5w2buc.js";import{W as yi}from"./ii534sx9kl9dq5ip.js";import{W as Rs}from"./e3erq0emp0cqk1ou.js";import{j as co,k as vi,W as wi}from"./nir0q9e2l94u37hi.js";import{A as _i}from"./iot1vlqga29hiiwl.js";import{a as ki}from"./kr5jdtt5uczx95b1.js";import{C as Si,g as Ci}from"./k7lsvlcih6dj1cdg.js";import{e as ji,a as Ni}from"./gxaekez9ch7w0c1d.js";import{g as Ti,m as $i,b as ts,I as uo,c as Pi}from"./exrawr7mctocf8w4.js";import{u as Mi}from"./cx1v46pslsfvescw.js";import{S as Ei}from"./cg8klfuw4d9cqove.js";import bs from"./b07550145r5z9uf7.js";import{u as Ai,a as Ii}from"./lddrj8r4o5uu22o6.js";import{s as Ri}from"./kw9y0llxx8k2et57.js";import{v as Ls,C as Li,A as Di,a as Fi,L as Oi,B as zi,p as Bi,b as Wi,c as Ui,P as Hi,d as Vi,i as Ji,e as Xi}from"./pfp9v0zt3pco2ip0.js";import{u as We,t as Ds,r as ss,g as se}from"./dy0r1wmnkh52oxu9.js";import{T as H}from"./cfdk1y828jwp5ajh.js";import{S as qi}from"./oakmk0hn6t1su135.js";import{c as fo}from"./g332n3nw3p1x6pym.js";import"./foly6q6x9dui805g.js";import"./pc2givv05uuq8g6l.js";import"./hp08qw6yu0x90xkd.js";import"./f4wsvwai0sxxe1lf.js";import"./epts3f5f624a6l7w.js";import"./mu0w85wyyiji3bj8.js";import"./b40xa0ca5oqnzth6.js";import"./b451x40oixvdmzqh.js";const Gi=e=>g.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},g.createElement("path",{d:"M5.08496 15.0003V12.5003C5.08496 12.1781 4.91677 11.8776 4.63672 11.6898L4.50977 11.6155C4.0393 11.3828 3.33513 10.8582 3.33496 10.0003C3.33496 9.14215 4.03924 8.61683 4.50977 8.38409L4.63672 8.31085C4.91685 8.12306 5.08485 7.82254 5.08496 7.50031V5.00031C5.08496 3.68283 6.19768 2.66827 7.5 2.66827C7.86727 2.66827 8.16503 2.96605 8.16504 3.33331C8.16504 3.70058 7.86727 3.99835 7.5 3.99835C6.87032 3.99835 6.41504 4.47778 6.41504 5.00031V7.50031C6.41492 8.36161 5.93339 9.09884 5.24121 9.50031L5.09961 9.57648C4.94956 9.65069 4.82638 9.7415 4.74902 9.83038C4.67487 9.9156 4.66504 9.97101 4.66504 10.0003C4.66511 10.0297 4.6753 10.0845 4.74902 10.1693C4.82639 10.2581 4.94952 10.3499 5.09961 10.4241L5.24121 10.4993C5.93356 10.9008 6.41504 11.6388 6.41504 12.5003V15.0003C6.41521 15.49 6.81517 15.9418 7.38379 15.9964L7.5 16.0013L7.63379 16.015C7.93684 16.0768 8.16488 16.345 8.16504 16.6663C8.16504 16.9877 7.93688 17.2557 7.63379 17.3177L7.5 17.3314L7.25781 17.3196C6.06281 17.2032 5.08513 16.2351 5.08496 15.0003ZM13.585 15.0003V12.5003C13.585 11.5813 14.1332 10.8036 14.9004 10.4241L15.0078 10.3655C15.1093 10.3044 15.193 10.2359 15.251 10.1693C15.3247 10.0845 15.3349 10.0297 15.335 10.0003C15.335 9.97101 15.3251 9.9156 15.251 9.83038C15.193 9.76378 15.1092 9.69615 15.0078 9.63507L14.9004 9.57648C14.1332 9.19707 13.5851 8.4192 13.585 7.50031V5.00031C13.585 4.51052 13.1849 4.05889 12.6162 4.00421L12.5 3.99835L12.3662 3.98468C12.0631 3.92275 11.835 3.65474 11.835 3.33331C11.835 2.96604 12.1327 2.66827 12.5 2.66827L12.7422 2.67999C13.9373 2.79644 14.915 3.76533 14.915 5.00031V7.50031C14.9152 7.86853 15.1349 8.20836 15.4902 8.38409L15.6758 8.48468C16.1258 8.75277 16.665 9.24929 16.665 10.0003C16.6649 10.7511 16.1257 11.2469 15.6758 11.515L15.4902 11.6155C15.1348 11.7913 14.915 12.132 14.915 12.5003V15.0003C14.9149 16.3176 13.8022 17.3314 12.5 17.3314C12.1327 17.3314 11.835 17.0336 11.835 16.6663C11.8351 16.2992 12.1328 16.0013 12.5 16.0013C13.1295 16.0013 13.5848 15.5227 13.585 15.0003Z"})),Zi=fo("ChevronDownFilled","1em",["M15.8 7.73c.28.3.27.78-.03 1.06l-5.25 5a.75.75 0 0 1-1.04 0l-5.25-5a.75.75 0 0 1 1.04-1.08L10 12.2l4.73-4.5a.75.75 0 0 1 1.06.02Z"]),Yi=fo("ChevronLeftFilled","1em",["M12.27 15.8a.75.75 0 0 1-1.06-.03l-5-5.25a.75.75 0 0 1 0-1.04l5-5.25a.75.75 0 1 1 1.08 1.04L7.8 10l4.5 4.73c.29.3.28.78-.02 1.06Z"]),Fs=({children:e,"data-start":t=null,"data-end":s=null,"data-is-last-node":a,"data-is-only-node":o,tag:r})=>{const{animationTiming:i,shouldAnimate:c,shouldHide:l,isDisabled:d,onComplete:h,onReady:f}=mr({isMarker:!0,tag:r,children:e,start:t,end:s,isLastNode:a,isOnlyNode:o});return d||l?n.jsx(r,{"data-start":t,"data-end":s,className:j(l&&"hidden"),children:e}):n.jsx(r,{"data-start":t,"data-end":s,className:j(Bt.marker,c?Bt.animate:Bt.hidden),onAnimationStart:()=>f(0),onAnimationEnd:()=>h(0),style:hr(i),children:e})},Ki={p:e=>n.jsx(he,{tag:"p",...e}),h1:e=>n.jsx(he,{tag:"h1",...e}),h2:e=>n.jsx(he,{tag:"h2",...e}),h3:e=>n.jsx(he,{tag:"h3",...e}),h4:e=>n.jsx(he,{tag:"h4",...e}),h5:e=>n.jsx(he,{tag:"h5",...e}),h6:e=>n.jsx(he,{tag:"h6",...e}),li:e=>n.jsx(Fs,{tag:"li",isListItem:!0,...e}),hr:e=>n.jsx(Fs,{tag:"hr",...e})};function Qi(e){const t=e.split(`
`),s=el(t.pop()).trimEnd();return s&&t.push(s),t.join(`
`)}function el(e){if(!e||/^\s*-\s*([*_]+)?\s*$/.test(e))return"";const t=[];let s="",a=0;for(;a<e.length;){if(e[a]==="*"&&e[a+1]==="*"){s+="**",t.length&&t[t.length-1]==="**"?t.pop():t.push("**"),a+=2;continue}if(e[a]==="*"||e[a]==="_"){s+=e[a];const r=e[a];t.length&&t[t.length-1]===r?t.pop():t.push(r),a++;continue}if(e[a]==="["){const r=e[a];s+=r,t.push(r),a++;continue}if(e[a]==="]"){const r=e[a];s+=r,t.length&&t[t.length-1]==="["&&t.pop(),a++;continue}if(e[a]==="("&&e[a-1]==="]"){const r=e[a];s+=r,t.push(r),a++;continue}if(e[a]===")"){const r=e[a];s+=r,t.length&&t[t.length-1]==="("&&t.pop(),a++;continue}s+=e[a],a++}if(t.length===0)return e;let o=s.trimEnd();for(;t.length;){const r=t.pop();if(r==null)break;r==="("?o+=")":o.endsWith(r)?o=o.slice(0,-r.length).trimEnd():r==="["?o+="]()":o+=r}return o}function tl({citation:e}){return n.jsx(Wn,{side:"top",triggerButton:n.jsx("span",{className:"inline-flex items-center font-bold",children:n.jsx(P,{id:"ZNWtPG",defaultMessage:"{startChar}clipboard {icon}{endChar}",values:{startChar:"「",icon:n.jsx(gr,{className:"mb-1 inline-block size-5"}),endChar:"」"}})}),className:"max-w-xl",children:n.jsxs("div",{className:"flex flex-col items-stretch gap-1",children:[n.jsx("div",{className:"flex justify-end border-b",children:n.jsx(pr,{onCopy:t=>Un(e.text,void 0,t),buttonText:!0,textPosition:"left"})}),n.jsx("div",{children:e.text})]})})}function sl({citation:e,clientThreadId:t,nodeType:s}){const a=D(),o=Ze(t),r=xr(e.screenshot_asset_pointer,o);return s==="containerDirective"&&a.formatMessage({id:"4/Vs6a",defaultMessage:"Cited Screenshot"}),n.jsx(Wn,{side:"top",triggerButton:n.jsx("span",{className:"inline-flex items-center font-bold",children:n.jsx(P,{id:"qUxKU1",defaultMessage:"{startChar}screenshot {icon}{endChar}",values:{startChar:"「",icon:n.jsx(St,{className:"mb-1 inline-block size-5"}),endChar:"」"}})}),className:"max-w-xl",children:r?n.jsx("img",{className:"w-xl max-w-screen",src:r,alt:a.formatMessage({id:"4/Vs6a",defaultMessage:"Cited Screenshot"})}):n.jsx("div",{className:"text-sm",children:n.jsx(P,{id:"BUdJTR",defaultMessage:"Screenshot not available"})})})}function mo({clientThreadId:e,messageId:t,fileId:s,fileName:a,processedMarkdownInfo:o,isStandaloneAttachment:r}){const i=Ze(e),c=jt(e,m=>t?m?.tree.getNodeIfExists(t)?.message:void 0),l=g.useMemo(()=>{if(!c)return null;const m={content_type:pa.Text,parts:[`{{file:${s}}}`]},k={...c?.metadata,is_synthetic_share_message:!0,is_standalone_share_attachment:r};return k.content_references=o?.displayedContentReferences.filter(C=>C.type!=="debug")??[],k.citations=[],o&&(m.parts=[o.rawText],k.n7jupd_crefs=o.n7jupdCrefs),{...c,id:lr(),content:m,metadata:k}},[c,s,o,r]),d=g.useMemo(()=>{if(!(!c||!l||!i))return{previewMessage:l,clientThreadId:e,fileId:s,messageId:c.id,serverThreadId:i,isStandaloneAttachment:r,fileName:a}},[l,e,s,c,i,r,a]),h=br({odysseyShareIntent:d,clientThreadId:e}),[f,y]=g.useState(!1);return{onClick:g.useCallback(async()=>{y(!0),await h(),y(!1)},[y,h]),isLoading:f,isEnabled:!!d}}function nl({clientThreadId:e,messageId:t,fileId:s,fileName:a,processedMarkdownInfo:o}){const r=D(),{onClick:i,isLoading:c,isEnabled:l}=mo({clientThreadId:e,messageId:t,fileId:s,fileName:a,processedMarkdownInfo:o,isStandaloneAttachment:!1});return l?n.jsx(yr,{onClick:i,label:r.formatMessage({id:"ConversationTurn.sharePostButtonTooltip",defaultMessage:"Share"}),icon:c?Ye:vr}):null}function ol(e){return e.endsWith(".md")}const rl=({citation:e,clientThreadId:t,messageId:s})=>{const[a,o]=g.useState(!1),r=Ze(t),i=Nt(),[c,l]=g.useState(null),d=g.useRef(null),h=g.useCallback(_=>{i.danger(_,{toastId:"ttom_file_citation_failed_to_download_file"})},[i]),f=e.file_id,y=de(),x=te(y,"3154019201"),v=x,m=cs(),k=gs(!0,r,f,void 0,h),C=k?.data,N=k?.isPending||!1;g.useEffect(()=>{if(C?.status==="success"&&C.download_url){d.current?.abort();const _=new AbortController;d.current=_,o(!0),(async()=>{try{const u=await fetch(C.download_url,{headers:m?{}:Qn(),signal:_.signal});if(!u.ok)throw new Error(`HTTP ${u.status}`);l(await u.text())}catch(u){u.name!=="AbortError"&&i.danger("Failed to download file",{toastId:"ttom_file_citation_failed_to_download_file"})}finally{o(!1)}})()}return()=>{d.current?.abort()}},[C,i,m]);const w=g.useContext(ee),b=g.useMemo(()=>{if(c==null)return null;const u=(w?.message?.metadata?.content_references_by_file??{})[e.cite_key]??[],$=ga(c,u);let A=$.processedText;const B=$.displayedContentReferences??[],ne=(w?.message?.metadata?.n7jupd_crefs_by_file??{})[e.cite_key]??[];return ne.length>0&&(A=wr(A,ne)),{processedText:A,displayedContentReferences:B,n7jupdCrefs:ne,rawText:c}},[c,w,e.cite_key]);return N||a?n.jsx(Ye,{className:"inline"}):!b||!w?.message?"[Could not display report]":n.jsx(ee.Provider,{value:{...w,contentReferences:b.displayedContentReferences,n7jupdCrefs:b.n7jupdCrefs},children:n.jsxs("div",{className:"border-token-border-light dark:border-token-bg-tertiary @container relative mx-[-16px] mt-4 mb-4 flex cursor-text flex-col items-start overflow-hidden rounded-[14px] border px-4 pt-6 pb-6 contain-inline-size sm:mx-[-32px] sm:rounded-[28px] sm:px-8 sm:shadow-sm",children:[n.jsx("div",{className:"w-full pt-1 pb-1 sm:pt-4 sm:pb-3",children:n.jsx(_r,{clientThreadId:t,componentOverrides:kr,children:b.processedText})}),v&&n.jsx("div",{className:"flex",children:x&&n.jsx(nl,{clientThreadId:t,messageId:s,fileId:f,fileName:e.file_name,processedMarkdownInfo:b,isStandaloneAttachment:!1})})]})})},Os=(e,t)=>{const s=new pi(new URL("/assets/walnut-worker-4Ws7Tko8.js",import.meta.url),{type:"module"});return new Promise((a,o)=>{s.onmessage=r=>{s.terminate(),r.data.error?o(new Error(r.data.error)):a(r.data.protoBytes??new Uint8Array)},s.onerror=r=>{s.terminate(),o(r)},s.postMessage({bytes:e.buffer,ext:t},[e.buffer])})};function zs(){return{sheets:[],styles:void 0}}const ho={encode(e,t=new U){for(const s of e.sheets)ke.encode(s,t.uint32(10).fork()).join();return e.styles!==void 0&&Ae.encode(e.styles,t.uint32(18).fork()).join(),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=zs();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==10)break;o.sheets.push(ke.decode(s,s.uint32()));continue}case 2:{if(r!==18)break;o.styles=Ae.decode(s,s.uint32());continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{sheets:globalThis.Array.isArray(e?.sheets)?e.sheets.map(t=>ke.fromJSON(t)):[],styles:S(e.styles)?Ae.fromJSON(e.styles):void 0}},toJSON(e){const t={};return e.sheets?.length&&(t.sheets=e.sheets.map(s=>ke.toJSON(s))),e.styles!==void 0&&(t.styles=Ae.toJSON(e.styles)),t},create(e){return ho.fromPartial(e??{})},fromPartial(e){const t=zs();return t.sheets=e.sheets?.map(s=>ke.fromPartial(s))||[],t.styles=e.styles!==void 0&&e.styles!==null?Ae.fromPartial(e.styles):void 0,t}};function Bs(){return{rowId:"",colId:"",colOffset:"",rowOffset:""}}const X={encode(e,t=new U){return e.rowId!==""&&t.uint32(10).string(e.rowId),e.colId!==""&&t.uint32(18).string(e.colId),e.colOffset!==""&&t.uint32(26).string(e.colOffset),e.rowOffset!==""&&t.uint32(34).string(e.rowOffset),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=Bs();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==10)break;o.rowId=s.string();continue}case 2:{if(r!==18)break;o.colId=s.string();continue}case 3:{if(r!==26)break;o.colOffset=s.string();continue}case 4:{if(r!==34)break;o.rowOffset=s.string();continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{rowId:S(e.rowId)?globalThis.String(e.rowId):"",colId:S(e.colId)?globalThis.String(e.colId):"",colOffset:S(e.colOffset)?globalThis.String(e.colOffset):"",rowOffset:S(e.rowOffset)?globalThis.String(e.rowOffset):""}},toJSON(e){const t={};return e.rowId!==""&&(t.rowId=e.rowId),e.colId!==""&&(t.colId=e.colId),e.colOffset!==""&&(t.colOffset=e.colOffset),e.rowOffset!==""&&(t.rowOffset=e.rowOffset),t},create(e){return X.fromPartial(e??{})},fromPartial(e){const t=Bs();return t.rowId=e.rowId??"",t.colId=e.colId??"",t.colOffset=e.colOffset??"",t.rowOffset=e.rowOffset??"",t}};function Ws(){return{fromAnchor:void 0,toAnchor:void 0,chart:void 0}}const _e={encode(e,t=new U){return e.fromAnchor!==void 0&&X.encode(e.fromAnchor,t.uint32(10).fork()).join(),e.toAnchor!==void 0&&X.encode(e.toAnchor,t.uint32(18).fork()).join(),e.chart!==void 0&&Fe.encode(e.chart,t.uint32(26).fork()).join(),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=Ws();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==10)break;o.fromAnchor=X.decode(s,s.uint32());continue}case 2:{if(r!==18)break;o.toAnchor=X.decode(s,s.uint32());continue}case 3:{if(r!==26)break;o.chart=Fe.decode(s,s.uint32());continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{fromAnchor:S(e.fromAnchor)?X.fromJSON(e.fromAnchor):void 0,toAnchor:S(e.toAnchor)?X.fromJSON(e.toAnchor):void 0,chart:S(e.chart)?Fe.fromJSON(e.chart):void 0}},toJSON(e){const t={};return e.fromAnchor!==void 0&&(t.fromAnchor=X.toJSON(e.fromAnchor)),e.toAnchor!==void 0&&(t.toAnchor=X.toJSON(e.toAnchor)),e.chart!==void 0&&(t.chart=Fe.toJSON(e.chart)),t},create(e){return _e.fromPartial(e??{})},fromPartial(e){const t=Ws();return t.fromAnchor=e.fromAnchor!==void 0&&e.fromAnchor!==null?X.fromPartial(e.fromAnchor):void 0,t.toAnchor=e.toAnchor!==void 0&&e.toAnchor!==null?X.fromPartial(e.toAnchor):void 0,t.chart=e.chart!==void 0&&e.chart!==null?Fe.fromPartial(e.chart):void 0,t}};function Us(){return{index:0,name:"",rows:[],innerXml:"",outerXml:"",columns:[],defaultRowHeight:0,charts:[],defaultColWidth:0,showGridLines:void 0}}const ke={encode(e,t=new U){e.index!==0&&t.uint32(8).int32(e.index),e.name!==""&&t.uint32(18).string(e.name);for(const s of e.rows)Se.encode(s,t.uint32(26).fork()).join();e.innerXml!==""&&t.uint32(34).string(e.innerXml),e.outerXml!==""&&t.uint32(42).string(e.outerXml);for(const s of e.columns)je.encode(s,t.uint32(50).fork()).join();e.defaultRowHeight!==0&&t.uint32(61).float(e.defaultRowHeight);for(const s of e.charts)_e.encode(s,t.uint32(66).fork()).join();return e.defaultColWidth!==0&&t.uint32(77).float(e.defaultColWidth),e.showGridLines!==void 0&&t.uint32(80).bool(e.showGridLines),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=Us();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==8)break;o.index=s.int32();continue}case 2:{if(r!==18)break;o.name=s.string();continue}case 3:{if(r!==26)break;o.rows.push(Se.decode(s,s.uint32()));continue}case 4:{if(r!==34)break;o.innerXml=s.string();continue}case 5:{if(r!==42)break;o.outerXml=s.string();continue}case 6:{if(r!==50)break;o.columns.push(je.decode(s,s.uint32()));continue}case 7:{if(r!==61)break;o.defaultRowHeight=s.float();continue}case 8:{if(r!==66)break;o.charts.push(_e.decode(s,s.uint32()));continue}case 9:{if(r!==77)break;o.defaultColWidth=s.float();continue}case 10:{if(r!==80)break;o.showGridLines=s.bool();continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{index:S(e.index)?globalThis.Number(e.index):0,name:S(e.name)?globalThis.String(e.name):"",rows:globalThis.Array.isArray(e?.rows)?e.rows.map(t=>Se.fromJSON(t)):[],innerXml:S(e.innerXml)?globalThis.String(e.innerXml):"",outerXml:S(e.outerXml)?globalThis.String(e.outerXml):"",columns:globalThis.Array.isArray(e?.columns)?e.columns.map(t=>je.fromJSON(t)):[],defaultRowHeight:S(e.defaultRowHeight)?globalThis.Number(e.defaultRowHeight):0,charts:globalThis.Array.isArray(e?.charts)?e.charts.map(t=>_e.fromJSON(t)):[],defaultColWidth:S(e.defaultColWidth)?globalThis.Number(e.defaultColWidth):0,showGridLines:S(e.showGridLines)?globalThis.Boolean(e.showGridLines):void 0}},toJSON(e){const t={};return e.index!==0&&(t.index=Math.round(e.index)),e.name!==""&&(t.name=e.name),e.rows?.length&&(t.rows=e.rows.map(s=>Se.toJSON(s))),e.innerXml!==""&&(t.innerXml=e.innerXml),e.outerXml!==""&&(t.outerXml=e.outerXml),e.columns?.length&&(t.columns=e.columns.map(s=>je.toJSON(s))),e.defaultRowHeight!==0&&(t.defaultRowHeight=e.defaultRowHeight),e.charts?.length&&(t.charts=e.charts.map(s=>_e.toJSON(s))),e.defaultColWidth!==0&&(t.defaultColWidth=e.defaultColWidth),e.showGridLines!==void 0&&(t.showGridLines=e.showGridLines),t},create(e){return ke.fromPartial(e??{})},fromPartial(e){const t=Us();return t.index=e.index??0,t.name=e.name??"",t.rows=e.rows?.map(s=>Se.fromPartial(s))||[],t.innerXml=e.innerXml??"",t.outerXml=e.outerXml??"",t.columns=e.columns?.map(s=>je.fromPartial(s))||[],t.defaultRowHeight=e.defaultRowHeight??0,t.charts=e.charts?.map(s=>_e.fromPartial(s))||[],t.defaultColWidth=e.defaultColWidth??0,t.showGridLines=e.showGridLines??void 0,t}};function Hs(){return{index:0,cells:[],height:0,customHeight:!1}}const Se={encode(e,t=new U){e.index!==0&&t.uint32(8).int32(e.index);for(const s of e.cells)Ce.encode(s,t.uint32(18).fork()).join();return e.height!==0&&t.uint32(29).float(e.height),e.customHeight!==!1&&t.uint32(32).bool(e.customHeight),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=Hs();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==8)break;o.index=s.int32();continue}case 2:{if(r!==18)break;o.cells.push(Ce.decode(s,s.uint32()));continue}case 3:{if(r!==29)break;o.height=s.float();continue}case 4:{if(r!==32)break;o.customHeight=s.bool();continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{index:S(e.index)?globalThis.Number(e.index):0,cells:globalThis.Array.isArray(e?.cells)?e.cells.map(t=>Ce.fromJSON(t)):[],height:S(e.height)?globalThis.Number(e.height):0,customHeight:S(e.customHeight)?globalThis.Boolean(e.customHeight):!1}},toJSON(e){const t={};return e.index!==0&&(t.index=Math.round(e.index)),e.cells?.length&&(t.cells=e.cells.map(s=>Ce.toJSON(s))),e.height!==0&&(t.height=e.height),e.customHeight!==!1&&(t.customHeight=e.customHeight),t},create(e){return Se.fromPartial(e??{})},fromPartial(e){const t=Hs();return t.index=e.index??0,t.cells=e.cells?.map(s=>Ce.fromPartial(s))||[],t.height=e.height??0,t.customHeight=e.customHeight??!1,t}};function Vs(){return{address:"",value:"",formula:"",dataType:"",styleIndex:0}}const Ce={encode(e,t=new U){return e.address!==""&&t.uint32(10).string(e.address),e.value!==""&&t.uint32(18).string(e.value),e.formula!==""&&t.uint32(26).string(e.formula),e.dataType!==""&&t.uint32(34).string(e.dataType),e.styleIndex!==0&&t.uint32(40).int32(e.styleIndex),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=Vs();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==10)break;o.address=s.string();continue}case 2:{if(r!==18)break;o.value=s.string();continue}case 3:{if(r!==26)break;o.formula=s.string();continue}case 4:{if(r!==34)break;o.dataType=s.string();continue}case 5:{if(r!==40)break;o.styleIndex=s.int32();continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{address:S(e.address)?globalThis.String(e.address):"",value:S(e.value)?globalThis.String(e.value):"",formula:S(e.formula)?globalThis.String(e.formula):"",dataType:S(e.dataType)?globalThis.String(e.dataType):"",styleIndex:S(e.styleIndex)?globalThis.Number(e.styleIndex):0}},toJSON(e){const t={};return e.address!==""&&(t.address=e.address),e.value!==""&&(t.value=e.value),e.formula!==""&&(t.formula=e.formula),e.dataType!==""&&(t.dataType=e.dataType),e.styleIndex!==0&&(t.styleIndex=Math.round(e.styleIndex)),t},create(e){return Ce.fromPartial(e??{})},fromPartial(e){const t=Vs();return t.address=e.address??"",t.value=e.value??"",t.formula=e.formula??"",t.dataType=e.dataType??"",t.styleIndex=e.styleIndex??0,t}};function Js(){return{min:0,max:0,width:0,customWidth:!1}}const je={encode(e,t=new U){return e.min!==0&&t.uint32(8).int32(e.min),e.max!==0&&t.uint32(16).int32(e.max),e.width!==0&&t.uint32(29).float(e.width),e.customWidth!==!1&&t.uint32(32).bool(e.customWidth),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=Js();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==8)break;o.min=s.int32();continue}case 2:{if(r!==16)break;o.max=s.int32();continue}case 3:{if(r!==29)break;o.width=s.float();continue}case 4:{if(r!==32)break;o.customWidth=s.bool();continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{min:S(e.min)?globalThis.Number(e.min):0,max:S(e.max)?globalThis.Number(e.max):0,width:S(e.width)?globalThis.Number(e.width):0,customWidth:S(e.customWidth)?globalThis.Boolean(e.customWidth):!1}},toJSON(e){const t={};return e.min!==0&&(t.min=Math.round(e.min)),e.max!==0&&(t.max=Math.round(e.max)),e.width!==0&&(t.width=e.width),e.customWidth!==!1&&(t.customWidth=e.customWidth),t},create(e){return je.fromPartial(e??{})},fromPartial(e){const t=Js();return t.min=e.min??0,t.max=e.max??0,t.width=e.width??0,t.customWidth=e.customWidth??!1,t}};function Xs(){return{size:0,color:"",name:"",family:0,scheme:"",bold:!1,italic:!1}}const Ne={encode(e,t=new U){return e.size!==0&&t.uint32(8).int32(e.size),e.color!==""&&t.uint32(18).string(e.color),e.name!==""&&t.uint32(26).string(e.name),e.family!==0&&t.uint32(32).int32(e.family),e.scheme!==""&&t.uint32(42).string(e.scheme),e.bold!==!1&&t.uint32(48).bool(e.bold),e.italic!==!1&&t.uint32(56).bool(e.italic),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=Xs();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==8)break;o.size=s.int32();continue}case 2:{if(r!==18)break;o.color=s.string();continue}case 3:{if(r!==26)break;o.name=s.string();continue}case 4:{if(r!==32)break;o.family=s.int32();continue}case 5:{if(r!==42)break;o.scheme=s.string();continue}case 6:{if(r!==48)break;o.bold=s.bool();continue}case 7:{if(r!==56)break;o.italic=s.bool();continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{size:S(e.size)?globalThis.Number(e.size):0,color:S(e.color)?globalThis.String(e.color):"",name:S(e.name)?globalThis.String(e.name):"",family:S(e.family)?globalThis.Number(e.family):0,scheme:S(e.scheme)?globalThis.String(e.scheme):"",bold:S(e.bold)?globalThis.Boolean(e.bold):!1,italic:S(e.italic)?globalThis.Boolean(e.italic):!1}},toJSON(e){const t={};return e.size!==0&&(t.size=Math.round(e.size)),e.color!==""&&(t.color=e.color),e.name!==""&&(t.name=e.name),e.family!==0&&(t.family=Math.round(e.family)),e.scheme!==""&&(t.scheme=e.scheme),e.bold!==!1&&(t.bold=e.bold),e.italic!==!1&&(t.italic=e.italic),t},create(e){return Ne.fromPartial(e??{})},fromPartial(e){const t=Xs();return t.size=e.size??0,t.color=e.color??"",t.name=e.name??"",t.family=e.family??0,t.scheme=e.scheme??"",t.bold=e.bold??!1,t.italic=e.italic??!1,t}};function qs(){return{patternType:"",fgColor:"",bgColor:""}}const Te={encode(e,t=new U){return e.patternType!==""&&t.uint32(10).string(e.patternType),e.fgColor!==""&&t.uint32(18).string(e.fgColor),e.bgColor!==""&&t.uint32(26).string(e.bgColor),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=qs();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==10)break;o.patternType=s.string();continue}case 2:{if(r!==18)break;o.fgColor=s.string();continue}case 3:{if(r!==26)break;o.bgColor=s.string();continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{patternType:S(e.patternType)?globalThis.String(e.patternType):"",fgColor:S(e.fgColor)?globalThis.String(e.fgColor):"",bgColor:S(e.bgColor)?globalThis.String(e.bgColor):""}},toJSON(e){const t={};return e.patternType!==""&&(t.patternType=e.patternType),e.fgColor!==""&&(t.fgColor=e.fgColor),e.bgColor!==""&&(t.bgColor=e.bgColor),t},create(e){return Te.fromPartial(e??{})},fromPartial(e){const t=qs();return t.patternType=e.patternType??"",t.fgColor=e.fgColor??"",t.bgColor=e.bgColor??"",t}};function Gs(){return{style:"",color:""}}const O={encode(e,t=new U){return e.style!==""&&t.uint32(10).string(e.style),e.color!==""&&t.uint32(18).string(e.color),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=Gs();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==10)break;o.style=s.string();continue}case 2:{if(r!==18)break;o.color=s.string();continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{style:S(e.style)?globalThis.String(e.style):"",color:S(e.color)?globalThis.String(e.color):""}},toJSON(e){const t={};return e.style!==""&&(t.style=e.style),e.color!==""&&(t.color=e.color),t},create(e){return O.fromPartial(e??{})},fromPartial(e){const t=Gs();return t.style=e.style??"",t.color=e.color??"",t}};function Zs(){return{left:void 0,right:void 0,top:void 0,bottom:void 0}}const $e={encode(e,t=new U){return e.left!==void 0&&O.encode(e.left,t.uint32(10).fork()).join(),e.right!==void 0&&O.encode(e.right,t.uint32(18).fork()).join(),e.top!==void 0&&O.encode(e.top,t.uint32(26).fork()).join(),e.bottom!==void 0&&O.encode(e.bottom,t.uint32(34).fork()).join(),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=Zs();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==10)break;o.left=O.decode(s,s.uint32());continue}case 2:{if(r!==18)break;o.right=O.decode(s,s.uint32());continue}case 3:{if(r!==26)break;o.top=O.decode(s,s.uint32());continue}case 4:{if(r!==34)break;o.bottom=O.decode(s,s.uint32());continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{left:S(e.left)?O.fromJSON(e.left):void 0,right:S(e.right)?O.fromJSON(e.right):void 0,top:S(e.top)?O.fromJSON(e.top):void 0,bottom:S(e.bottom)?O.fromJSON(e.bottom):void 0}},toJSON(e){const t={};return e.left!==void 0&&(t.left=O.toJSON(e.left)),e.right!==void 0&&(t.right=O.toJSON(e.right)),e.top!==void 0&&(t.top=O.toJSON(e.top)),e.bottom!==void 0&&(t.bottom=O.toJSON(e.bottom)),t},create(e){return $e.fromPartial(e??{})},fromPartial(e){const t=Zs();return t.left=e.left!==void 0&&e.left!==null?O.fromPartial(e.left):void 0,t.right=e.right!==void 0&&e.right!==null?O.fromPartial(e.right):void 0,t.top=e.top!==void 0&&e.top!==null?O.fromPartial(e.top):void 0,t.bottom=e.bottom!==void 0&&e.bottom!==null?O.fromPartial(e.bottom):void 0,t}};function Ys(){return{id:0,formatCode:""}}const Pe={encode(e,t=new U){return e.id!==0&&t.uint32(8).int32(e.id),e.formatCode!==""&&t.uint32(18).string(e.formatCode),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=Ys();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==8)break;o.id=s.int32();continue}case 2:{if(r!==18)break;o.formatCode=s.string();continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{id:S(e.id)?globalThis.Number(e.id):0,formatCode:S(e.formatCode)?globalThis.String(e.formatCode):""}},toJSON(e){const t={};return e.id!==0&&(t.id=Math.round(e.id)),e.formatCode!==""&&(t.formatCode=e.formatCode),t},create(e){return Pe.fromPartial(e??{})},fromPartial(e){const t=Ys();return t.id=e.id??0,t.formatCode=e.formatCode??"",t}};function Ks(){return{numFmtId:void 0,fontId:void 0,fillId:void 0,borderId:void 0,xfId:void 0,applyFill:void 0,applyFont:void 0,applyBorder:void 0,applyAlignment:void 0,horizontalAlignment:void 0,verticalAlignment:void 0}}const q={encode(e,t=new U){return e.numFmtId!==void 0&&t.uint32(8).int32(e.numFmtId),e.fontId!==void 0&&t.uint32(16).int32(e.fontId),e.fillId!==void 0&&t.uint32(24).int32(e.fillId),e.borderId!==void 0&&t.uint32(32).int32(e.borderId),e.xfId!==void 0&&t.uint32(40).int32(e.xfId),e.applyFill!==void 0&&t.uint32(48).bool(e.applyFill),e.applyFont!==void 0&&t.uint32(56).bool(e.applyFont),e.applyBorder!==void 0&&t.uint32(64).bool(e.applyBorder),e.applyAlignment!==void 0&&t.uint32(72).bool(e.applyAlignment),e.horizontalAlignment!==void 0&&t.uint32(82).string(e.horizontalAlignment),e.verticalAlignment!==void 0&&t.uint32(90).string(e.verticalAlignment),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=Ks();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==8)break;o.numFmtId=s.int32();continue}case 2:{if(r!==16)break;o.fontId=s.int32();continue}case 3:{if(r!==24)break;o.fillId=s.int32();continue}case 4:{if(r!==32)break;o.borderId=s.int32();continue}case 5:{if(r!==40)break;o.xfId=s.int32();continue}case 6:{if(r!==48)break;o.applyFill=s.bool();continue}case 7:{if(r!==56)break;o.applyFont=s.bool();continue}case 8:{if(r!==64)break;o.applyBorder=s.bool();continue}case 9:{if(r!==72)break;o.applyAlignment=s.bool();continue}case 10:{if(r!==82)break;o.horizontalAlignment=s.string();continue}case 11:{if(r!==90)break;o.verticalAlignment=s.string();continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{numFmtId:S(e.numFmtId)?globalThis.Number(e.numFmtId):void 0,fontId:S(e.fontId)?globalThis.Number(e.fontId):void 0,fillId:S(e.fillId)?globalThis.Number(e.fillId):void 0,borderId:S(e.borderId)?globalThis.Number(e.borderId):void 0,xfId:S(e.xfId)?globalThis.Number(e.xfId):void 0,applyFill:S(e.applyFill)?globalThis.Boolean(e.applyFill):void 0,applyFont:S(e.applyFont)?globalThis.Boolean(e.applyFont):void 0,applyBorder:S(e.applyBorder)?globalThis.Boolean(e.applyBorder):void 0,applyAlignment:S(e.applyAlignment)?globalThis.Boolean(e.applyAlignment):void 0,horizontalAlignment:S(e.horizontalAlignment)?globalThis.String(e.horizontalAlignment):void 0,verticalAlignment:S(e.verticalAlignment)?globalThis.String(e.verticalAlignment):void 0}},toJSON(e){const t={};return e.numFmtId!==void 0&&(t.numFmtId=Math.round(e.numFmtId)),e.fontId!==void 0&&(t.fontId=Math.round(e.fontId)),e.fillId!==void 0&&(t.fillId=Math.round(e.fillId)),e.borderId!==void 0&&(t.borderId=Math.round(e.borderId)),e.xfId!==void 0&&(t.xfId=Math.round(e.xfId)),e.applyFill!==void 0&&(t.applyFill=e.applyFill),e.applyFont!==void 0&&(t.applyFont=e.applyFont),e.applyBorder!==void 0&&(t.applyBorder=e.applyBorder),e.applyAlignment!==void 0&&(t.applyAlignment=e.applyAlignment),e.horizontalAlignment!==void 0&&(t.horizontalAlignment=e.horizontalAlignment),e.verticalAlignment!==void 0&&(t.verticalAlignment=e.verticalAlignment),t},create(e){return q.fromPartial(e??{})},fromPartial(e){const t=Ks();return t.numFmtId=e.numFmtId??void 0,t.fontId=e.fontId??void 0,t.fillId=e.fillId??void 0,t.borderId=e.borderId??void 0,t.xfId=e.xfId??void 0,t.applyFill=e.applyFill??void 0,t.applyFont=e.applyFont??void 0,t.applyBorder=e.applyBorder??void 0,t.applyAlignment=e.applyAlignment??void 0,t.horizontalAlignment=e.horizontalAlignment??void 0,t.verticalAlignment=e.verticalAlignment??void 0,t}};function Qs(){return{index:0,format:void 0}}const Me={encode(e,t=new U){return e.index!==0&&t.uint32(8).int32(e.index),e.format!==void 0&&q.encode(e.format,t.uint32(18).fork()).join(),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=Qs();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==8)break;o.index=s.int32();continue}case 2:{if(r!==18)break;o.format=q.decode(s,s.uint32());continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{index:S(e.index)?globalThis.Number(e.index):0,format:S(e.format)?q.fromJSON(e.format):void 0}},toJSON(e){const t={};return e.index!==0&&(t.index=Math.round(e.index)),e.format!==void 0&&(t.format=q.toJSON(e.format)),t},create(e){return Me.fromPartial(e??{})},fromPartial(e){const t=Qs();return t.index=e.index??0,t.format=e.format!==void 0&&e.format!==null?q.fromPartial(e.format):void 0,t}};function en(){return{index:0,name:"",builtinId:"",xfId:void 0}}const Ee={encode(e,t=new U){return e.index!==0&&t.uint32(8).int32(e.index),e.name!==""&&t.uint32(18).string(e.name),e.builtinId!==""&&t.uint32(26).string(e.builtinId),e.xfId!==void 0&&t.uint32(32).int32(e.xfId),t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=en();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==8)break;o.index=s.int32();continue}case 2:{if(r!==18)break;o.name=s.string();continue}case 3:{if(r!==26)break;o.builtinId=s.string();continue}case 4:{if(r!==32)break;o.xfId=s.int32();continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{index:S(e.index)?globalThis.Number(e.index):0,name:S(e.name)?globalThis.String(e.name):"",builtinId:S(e.builtinId)?globalThis.String(e.builtinId):"",xfId:S(e.xfId)?globalThis.Number(e.xfId):void 0}},toJSON(e){const t={};return e.index!==0&&(t.index=Math.round(e.index)),e.name!==""&&(t.name=e.name),e.builtinId!==""&&(t.builtinId=e.builtinId),e.xfId!==void 0&&(t.xfId=Math.round(e.xfId)),t},create(e){return Ee.fromPartial(e??{})},fromPartial(e){const t=en();return t.index=e.index??0,t.name=e.name??"",t.builtinId=e.builtinId??"",t.xfId=e.xfId??void 0,t}};function tn(){return{fonts:[],fills:[],cellXfs:[],borders:[],cellStyles:[],cellStyleXfs:[],numberFormats:[]}}const Ae={encode(e,t=new U){for(const s of e.fonts)Ne.encode(s,t.uint32(10).fork()).join();for(const s of e.fills)Te.encode(s,t.uint32(18).fork()).join();for(const s of e.cellXfs)q.encode(s,t.uint32(26).fork()).join();for(const s of e.borders)$e.encode(s,t.uint32(34).fork()).join();for(const s of e.cellStyles)Ee.encode(s,t.uint32(42).fork()).join();for(const s of e.cellStyleXfs)Me.encode(s,t.uint32(50).fork()).join();for(const s of e.numberFormats)Pe.encode(s,t.uint32(58).fork()).join();return t},decode(e,t){const s=e instanceof I?e:new I(e);let a=t===void 0?s.len:s.pos+t;const o=tn();for(;s.pos<a;){const r=s.uint32();switch(r>>>3){case 1:{if(r!==10)break;o.fonts.push(Ne.decode(s,s.uint32()));continue}case 2:{if(r!==18)break;o.fills.push(Te.decode(s,s.uint32()));continue}case 3:{if(r!==26)break;o.cellXfs.push(q.decode(s,s.uint32()));continue}case 4:{if(r!==34)break;o.borders.push($e.decode(s,s.uint32()));continue}case 5:{if(r!==42)break;o.cellStyles.push(Ee.decode(s,s.uint32()));continue}case 6:{if(r!==50)break;o.cellStyleXfs.push(Me.decode(s,s.uint32()));continue}case 7:{if(r!==58)break;o.numberFormats.push(Pe.decode(s,s.uint32()));continue}}if((r&7)===4||r===0)break;s.skip(r&7)}return o},fromJSON(e){return{fonts:globalThis.Array.isArray(e?.fonts)?e.fonts.map(t=>Ne.fromJSON(t)):[],fills:globalThis.Array.isArray(e?.fills)?e.fills.map(t=>Te.fromJSON(t)):[],cellXfs:globalThis.Array.isArray(e?.cellXfs)?e.cellXfs.map(t=>q.fromJSON(t)):[],borders:globalThis.Array.isArray(e?.borders)?e.borders.map(t=>$e.fromJSON(t)):[],cellStyles:globalThis.Array.isArray(e?.cellStyles)?e.cellStyles.map(t=>Ee.fromJSON(t)):[],cellStyleXfs:globalThis.Array.isArray(e?.cellStyleXfs)?e.cellStyleXfs.map(t=>Me.fromJSON(t)):[],numberFormats:globalThis.Array.isArray(e?.numberFormats)?e.numberFormats.map(t=>Pe.fromJSON(t)):[]}},toJSON(e){const t={};return e.fonts?.length&&(t.fonts=e.fonts.map(s=>Ne.toJSON(s))),e.fills?.length&&(t.fills=e.fills.map(s=>Te.toJSON(s))),e.cellXfs?.length&&(t.cellXfs=e.cellXfs.map(s=>q.toJSON(s))),e.borders?.length&&(t.borders=e.borders.map(s=>$e.toJSON(s))),e.cellStyles?.length&&(t.cellStyles=e.cellStyles.map(s=>Ee.toJSON(s))),e.cellStyleXfs?.length&&(t.cellStyleXfs=e.cellStyleXfs.map(s=>Me.toJSON(s))),e.numberFormats?.length&&(t.numberFormats=e.numberFormats.map(s=>Pe.toJSON(s))),t},create(e){return Ae.fromPartial(e??{})},fromPartial(e){const t=tn();return t.fonts=e.fonts?.map(s=>Ne.fromPartial(s))||[],t.fills=e.fills?.map(s=>Te.fromPartial(s))||[],t.cellXfs=e.cellXfs?.map(s=>q.fromPartial(s))||[],t.borders=e.borders?.map(s=>$e.fromPartial(s))||[],t.cellStyles=e.cellStyles?.map(s=>Ee.fromPartial(s))||[],t.cellStyleXfs=e.cellStyleXfs?.map(s=>Me.fromPartial(s))||[],t.numberFormats=e.numberFormats?.map(s=>Pe.fromPartial(s))||[],t}};function S(e){return e!=null}const al="PptxReader",il={hash:"sha256-ISSJ0AJbtWttblNjS2Nov5M7nmX8KW+y6EHHTvWn964=",fingerprinting:{"DocumentFormat.OpenXml.Framework.zzrbdxy160.wasm":"DocumentFormat.OpenXml.Framework.wasm","DocumentFormat.OpenXml.pnnerfu2c1.wasm":"DocumentFormat.OpenXml.wasm","Google.Protobuf.v50h1myvba.wasm":"Google.Protobuf.wasm","PptxReader.lc6f2pgylr.wasm":"PptxReader.wasm","System.Collections.Concurrent.r1lypu8ekm.wasm":"System.Collections.Concurrent.wasm","System.Collections.NonGeneric.yz6d49jzfn.wasm":"System.Collections.NonGeneric.wasm","System.Collections.Specialized.ytug4i5ouo.wasm":"System.Collections.Specialized.wasm","System.Collections.cgot062p9s.wasm":"System.Collections.wasm","System.ComponentModel.Primitives.gzgzp2e4v2.wasm":"System.ComponentModel.Primitives.wasm","System.ComponentModel.TypeConverter.5sj1vozbbu.wasm":"System.ComponentModel.TypeConverter.wasm","System.ComponentModel.e3q0ysgg90.wasm":"System.ComponentModel.wasm","System.Diagnostics.DiagnosticSource.f7g5tmhhcw.wasm":"System.Diagnostics.DiagnosticSource.wasm","System.IO.Compression.ivcga547d2.wasm":"System.IO.Compression.wasm","System.IO.Packaging.8th4tkd3a0.wasm":"System.IO.Packaging.wasm","System.Linq.Expressions.trjskh2ftw.wasm":"System.Linq.Expressions.wasm","System.Linq.lqlplpfa67.wasm":"System.Linq.wasm","System.Memory.wjcu19wbkm.wasm":"System.Memory.wasm","System.Net.Http.ut19to9qvt.wasm":"System.Net.Http.wasm","System.Net.Primitives.evghnwnikt.wasm":"System.Net.Primitives.wasm","System.ObjectModel.z79lo7ssok.wasm":"System.ObjectModel.wasm","System.Private.CoreLib.a2kfde4ngf.wasm":"System.Private.CoreLib.wasm","System.Private.Uri.g4t3s7to3h.wasm":"System.Private.Uri.wasm","System.Private.Xml.Linq.5d8is4r01n.wasm":"System.Private.Xml.Linq.wasm","System.Private.Xml.8jmobt3bv6.wasm":"System.Private.Xml.wasm","System.Runtime.InteropServices.JavaScript.w68izt3tuh.wasm":"System.Runtime.InteropServices.JavaScript.wasm","System.Text.RegularExpressions.ubom6ddggf.wasm":"System.Text.RegularExpressions.wasm","System.t8xd33e5pv.wasm":"System.wasm","System.Xml.Linq.mglmvb8jto.wasm":"System.Xml.Linq.wasm","dotnet.js":"dotnet.js","dotnet.native.50iqa8w3ys.js":"dotnet.native.js","dotnet.native.pk43x8e436.wasm":"dotnet.native.wasm","dotnet.runtime.ew19f13umk.js":"dotnet.runtime.js","icudt_CJK.tjcz0u77k5.dat":"icudt_CJK.dat","icudt_EFIGS.tptq2av103.dat":"icudt_EFIGS.dat","icudt_no_CJK.lfu7j35m59.dat":"icudt_no_CJK.dat"},jsModuleNative:{"dotnet.native.50iqa8w3ys.js":"sha256-pQdXuxfVeqYHOwd5HUM2ERd7OnXirj9JTF37b6OdTAc="},jsModuleRuntime:{"dotnet.runtime.ew19f13umk.js":"sha256-Isv/63htfX73xgn3/2cZMtk4S8xBcbmlXRgJMDv4mhI="},wasmNative:{"dotnet.native.pk43x8e436.wasm":"sha256-6fprjjfQGsopiMetOMnTFT7N83KgQiUia8r8F1s/HUI="},icu:{"icudt_CJK.tjcz0u77k5.dat":"sha256-SZLtQnRc0JkwqHab0VUVP7T3uBPSeYzxzDnpxPpUnHk=","icudt_EFIGS.tptq2av103.dat":"sha256-8fItetYY8kQ0ww6oxwTLiT3oXlBwHKumbeP2pRF4yTc=","icudt_no_CJK.lfu7j35m59.dat":"sha256-L7sV7NEYP37/Qr2FPCePo5cJqRgTXRwGHuwF5Q+0Nfs="},coreAssembly:{"System.Private.CoreLib.a2kfde4ngf.wasm":"sha256-UjitI0Wm5nNiS457iaScI+89P47ZQi+9YP47Gb1rynw=","System.Runtime.InteropServices.JavaScript.w68izt3tuh.wasm":"sha256-CP+wozrOVECJR4EzAWuaHMst0GS5T5azbfJfs2wcShs="},assembly:{"DocumentFormat.OpenXml.Framework.zzrbdxy160.wasm":"sha256-gewmYP6VBCfFJUjxGAmejSGxmz8pJfGHQf0NgrM6MZU=","DocumentFormat.OpenXml.pnnerfu2c1.wasm":"sha256-RWauQRLAo7t7fGc0Ul5DANg/obhE2tQ5Gtj0AYngOAA=","Google.Protobuf.v50h1myvba.wasm":"sha256-7UsjaQCkIBHxxLqqee6Bd4t18kttxxvehTIetdodPfk=","PptxReader.lc6f2pgylr.wasm":"sha256-G2wR0veBF/H6zczeRMjCKdQOFn2oi0ElgId1RTzlg7c=","System.Collections.Concurrent.r1lypu8ekm.wasm":"sha256-8W9byroH5PDw7HOQUGsSYaFSr4WyORQgfCYj/x/G3p0=","System.Collections.NonGeneric.yz6d49jzfn.wasm":"sha256-UmO0Z2nQKnzaE+ZcfPlJufBSkRbn1tLZIIaPOS4Fo3c=","System.Collections.Specialized.ytug4i5ouo.wasm":"sha256-6qNeWqbY8IXg9RSBbzSHVlWNwGg2eupj3jAPRYY6uT4=","System.Collections.cgot062p9s.wasm":"sha256-9KYvQ+cQVveO1KIfKx9u2NR7XBW/S1hTRCK5bBWVTPw=","System.ComponentModel.Primitives.gzgzp2e4v2.wasm":"sha256-RN7dbbLcpLWh09A6j+pItSKNSy74g6sk19Do/GgJmNw=","System.ComponentModel.TypeConverter.5sj1vozbbu.wasm":"sha256-mxa2CWqsFITpIqzRrrnQSQGru2oOm1xg7wdyE0YLv6k=","System.ComponentModel.e3q0ysgg90.wasm":"sha256-5inQh8bubMrlto3Kwxx9iM27KpcXN8152RWX745jLso=","System.Diagnostics.DiagnosticSource.f7g5tmhhcw.wasm":"sha256-tXmcr1QIpGaf4RqsOxI2/OAnrBtW6lPU/rQq+CSmTVc=","System.IO.Compression.ivcga547d2.wasm":"sha256-LiPWgR3j8e4mjR8KrrVuqmUp8FgJ2sK915ycq3PVVUs=","System.IO.Packaging.8th4tkd3a0.wasm":"sha256-1C+I5A7ESuL28X57RP+FiTL8ayuTe86SmJE6NSg4dQA=","System.Linq.Expressions.trjskh2ftw.wasm":"sha256-51Slwr2An0e8iQyZtv/GEXxhkFL/Eump1Uh1m9mUMfI=","System.Linq.lqlplpfa67.wasm":"sha256-sxwXLiNccsez7VybWMK22BZmtk3q/EDGCvpZUiw6OB0=","System.Memory.wjcu19wbkm.wasm":"sha256-9D9WTDr/MOOjQGAdGW+RPOTUUAGaIB6+Cjn1IBn/RVs=","System.Net.Http.ut19to9qvt.wasm":"sha256-gh6qUkj3WqdEsRlAq8AdknvNVtc9/3FkRe8XPPImc54=","System.Net.Primitives.evghnwnikt.wasm":"sha256-VqluKffy/OTxept04cce4C+kkbZ4i0cm7j+US0qVijA=","System.ObjectModel.z79lo7ssok.wasm":"sha256-73VNH5fB79wQVvKRTpR8EOgu7JbDU9adDcSx7DUJbi8=","System.Private.Uri.g4t3s7to3h.wasm":"sha256-MJ7s3VRVx3sp3vhG4PKiAQgZG3YRna3ogn5mN+AnL68=","System.Private.Xml.Linq.5d8is4r01n.wasm":"sha256-JymXWud/Vm/7FsY+z4HjDalDvVmEa6KE5lk9bA6ngBM=","System.Private.Xml.8jmobt3bv6.wasm":"sha256-FPfgzEjy67B8KtZhSxCZ9M43KgyqznMdFpdtzcwBRGk=","System.Text.RegularExpressions.ubom6ddggf.wasm":"sha256-qg6on6B8xuA3DBZqbTQmIuC6Asa8mpCNHMOUNW8EbTk=","System.t8xd33e5pv.wasm":"sha256-jdi196RMQvJqOZVnwRK7DGSWJifChhgNljcOjGeHSUY=","System.Xml.Linq.mglmvb8jto.wasm":"sha256-JuEj9dfBl39fqnbzXBS6GXngjNI7jj2ZEY6HaVcdW4U="}},ll=0,cl=!0,dl="sharded",ul={mainAssemblyName:al,resources:il,debugLevel:ll,linkerEnabled:cl,globalizationMode:dl};//! The .NET Foundation licenses this file to you under the MIT license.
var fl=!1;const ml=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),hl=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),ys=Symbol.for("wasm promise_control");function re(e,t){let s=null;const a=new Promise(function(r,i){s={isDone:!1,promise:null,resolve:c=>{s.isDone||(s.isDone=!0,r(c),e&&e())},reject:c=>{s.isDone||(s.isDone=!0,i(c),t&&t())}}});s.promise=a;const o=a;return o[ys]=s,{promise:o,promise_control:s}}function pl(e){return e[ys]}function gl(e){e&&function(t){return t[ys]!==void 0}(e)||E(!1,"Promise is not controllable")}const xl="__mono_message__",po=["debug","log","trace","warn","info","error"],Je="MONO_WASM: ";let V,ns,ae,Et;function bl(e){Et=e}function z(e){if(p.diagnosticTracing){const t=typeof e=="function"?e():e;console.debug(Je+t)}}function go(e,...t){console.info(Je+e,...t)}function xo(e,...t){console.info(e,...t)}function Re(e,...t){console.warn(Je+e,...t)}function Le(e,...t){if(t&&t.length>0&&t[0]&&typeof t[0]=="object"){if(t[0].silent)return;if(t[0].toString)return void console.error(Je+e,t[0].toString())}console.error(Je+e,...t)}function bo(e,t,s){return function(...a){try{let o=a[0];if(o===void 0)o="undefined";else if(o===null)o="null";else if(typeof o=="function")o=o.toString();else if(typeof o!="string")try{o=JSON.stringify(o)}catch{o=o.toString()}t(s?JSON.stringify({method:e,payload:o,arguments:a.slice(1)}):[e+o,...a.slice(1)])}catch(o){ae.error(`proxyConsole failed: ${o}`)}}}function yo(e,t,s){ns=t,Et=e,ae={...t};const a=`${s}/console`.replace("https://","wss://").replace("http://","ws://");V=new WebSocket(a),V.addEventListener("error",vo),V.addEventListener("close",wo),function(){for(const o of po)ns[o]=bo(`console.${o}`,yl,!0)}()}function sn(e){let t=30;const s=()=>{V?V.bufferedAmount==0||t==0?(e&&xo(e),function(){for(const a of po)ns[a]=bo(`console.${a}`,ae.log,!1)}(),V.removeEventListener("error",vo),V.removeEventListener("close",wo),V.close(1e3,e),V=void 0):(t--,globalThis.setTimeout(s,100)):e&&ae&&ae.log(e)};s()}function yl(e){V&&V.readyState===WebSocket.OPEN?V.send(e):ae.log(e)}function vo(e){ae.error(`[${Et}] proxy console websocket error: ${e}`,e)}function wo(e){ae.debug(`[${Et}] proxy console websocket closed: ${e}`,e)}new Date().valueOf();const _o={},os={},rs={};let ht,Ut,nn;function vl(){const e=Object.values(rs),t=Object.values(os),s=rn(e),a=rn(t),o=s+a;if(o===0)return;const r=J?"%c":"",i=J?["background: purple; color: white; padding: 1px 3px; border-radius: 3px;","font-weight: bold;","font-weight: normal;"]:[],c=p.config.linkerEnabled?"":`
This application was built with linking (tree shaking) disabled. 
Published applications will be significantly smaller if you install wasm-tools workload. 
See also https://aka.ms/dotnet-wasm-features`;console.groupCollapsed(`${r}dotnet${r} Loaded ${Ht(o)} resources${r}${c}`,...i),e.length&&(console.groupCollapsed(`Loaded ${Ht(s)} resources from cache`),console.table(rs),console.groupEnd()),t.length&&(console.groupCollapsed(`Loaded ${Ht(a)} resources from network`),console.table(os),console.groupEnd()),console.groupEnd()}async function wl(){const e=ht;if(e){const t=(await e.keys()).map(async s=>{s.url in _o||await e.delete(s)});await Promise.all(t)}}function on(e){return`${e.resolvedUrl}.${e.hash}`}async function ko(){ht=await async function(e){if(!p.config.cacheBootResources||globalThis.caches===void 0||globalThis.document===void 0||globalThis.isSecureContext===!1)return null;const t=`dotnet-resources-${globalThis.document.baseURI.substring(globalThis.document.location.origin.length)}`;try{return await caches.open(t)||null}catch{return null}}()}function rn(e){return e.reduce((t,s)=>t+(s.responseBytes||0),0)}function Ht(e){return`${(e/1048576).toFixed(2)} MB`}function So(){p.preferredIcuAsset=Co(p.config);let e=p.config.globalizationMode=="invariant";if(!e)if(p.preferredIcuAsset)p.diagnosticTracing&&z("ICU data archive(s) available, disabling invariant mode");else{if(p.config.globalizationMode==="custom"||p.config.globalizationMode==="all"||p.config.globalizationMode==="sharded"){const o="invariant globalization mode is inactive and no ICU data archives are available";throw Le(`ERROR: ${o}`),new Error(o)}p.diagnosticTracing&&z("ICU data archive(s) not available, using invariant globalization mode"),e=!0,p.preferredIcuAsset=null}const t="DOTNET_SYSTEM_GLOBALIZATION_INVARIANT",s="DOTNET_SYSTEM_GLOBALIZATION_HYBRID",a=p.config.environmentVariables;if(a[s]===void 0&&p.config.globalizationMode==="hybrid"?a[s]="1":a[t]===void 0&&e&&(a[t]="1"),a.TZ===void 0)try{const o=Intl.DateTimeFormat().resolvedOptions().timeZone||null;o&&(a.TZ=o)}catch{go("failed to detect timezone, will fallback to UTC")}}function Co(e){var t;if(!((t=e.resources)===null||t===void 0)&&t.icu&&e.globalizationMode!="invariant"){const s=e.applicationCulture||(J?globalThis.navigator&&globalThis.navigator.languages&&globalThis.navigator.languages[0]:Intl.DateTimeFormat().resolvedOptions().locale),a=Object.keys(e.resources.icu),o={};for(let i=0;i<a.length;i++){const c=a[i];e.resources.fingerprinting?o[Mo(c)]=c:o[c]=c}let r=null;if(e.globalizationMode==="custom"){if(a.length>=1)return a[0]}else e.globalizationMode==="hybrid"?r="icudt_hybrid.dat":s&&e.globalizationMode!=="all"?e.globalizationMode==="sharded"&&(r=function(i){const c=i.split("-")[0];return c==="en"||["fr","fr-FR","it","it-IT","de","de-DE","es","es-ES"].includes(i)?"icudt_EFIGS.dat":["zh","ko","ja"].includes(c)?"icudt_CJK.dat":"icudt_no_CJK.dat"}(s)):r="icudt.dat";if(r&&o[r])return o[r]}return e.globalizationMode="invariant",null}const an=class{constructor(e){this.url=e}toString(){return this.url}};async function _l(e,t){try{const s=typeof globalThis.fetch=="function";if(le){const a=e.startsWith("file://");if(!a&&s)return globalThis.fetch(e,t||{credentials:"same-origin"});Ut||(nn=ce.require("url"),Ut=ce.require("fs")),a&&(e=nn.fileURLToPath(e));const o=await Ut.promises.readFile(e);return{ok:!0,headers:{length:0,get:()=>null},url:e,arrayBuffer:()=>o,json:()=>JSON.parse(o),text:()=>{throw new Error("NotImplementedException")}}}if(s)return globalThis.fetch(e,t||{credentials:"same-origin"});if(typeof read=="function")return{ok:!0,url:e,headers:{length:0,get:()=>null},arrayBuffer:()=>new Uint8Array(read(e,"binary")),json:()=>JSON.parse(read(e,"utf8")),text:()=>read(e,"utf8")}}catch(s){return{ok:!1,url:e,status:500,headers:{length:0,get:()=>null},statusText:"ERR28: "+s,arrayBuffer:()=>{throw s},json:()=>{throw s},text:()=>{throw s}}}throw new Error("No fetch implementation available")}function jo(e){return typeof e!="string"&&E(!1,"url must be a string"),!No(e)&&e.indexOf("./")!==0&&e.indexOf("../")!==0&&globalThis.URL&&globalThis.document&&globalThis.document.baseURI&&(e=new URL(e,globalThis.document.baseURI).toString()),e}const kl=/^[a-zA-Z][a-zA-Z\d+\-.]*?:\/\//,Sl=/[a-zA-Z]:[\\/]/;function No(e){return le||It?e.startsWith("/")||e.startsWith("\\")||e.indexOf("///")!==-1||Sl.test(e):kl.test(e)}let we,st=0;const Be=[],K=[],To=new Map,vs={"js-module-threads":!0,"js-module-globalization":!0,"js-module-runtime":!0,"js-module-dotnet":!0,"js-module-native":!0},ws={...vs,"js-module-library-initializer":!0},$o={...vs,dotnetwasm:!0,heap:!0,manifest:!0},Cl={...ws,manifest:!0},ln={...ws,dotnetwasm:!0},as={dotnetwasm:!0,symbols:!0,"segmentation-rules":!0},Vt={...ws,dotnetwasm:!0,symbols:!0,"segmentation-rules":!0},jl={symbols:!0,"segmentation-rules":!0};function nt(e){return!(e.behavior=="icu"&&e.name!=p.preferredIcuAsset)}function ot(e,t,s){const a=Object.keys(t||{});E(a.length==1,`Expect to have one ${s} asset in resources`);const o=a[0],r={name:o,hash:t[o],behavior:s};return _s(r),e.push(r),r}function _s(e){$o[e.behavior]&&To.set(e.behavior,e)}function Xe(e){const t=function(s){E($o[s],`Unknown single asset behavior ${s}`);const a=To.get(s);return E(a,`Single asset for ${s} not found`),a}(e);if(!t.resolvedUrl){if(t.resolvedUrl=p.locateFile(t.name),vs[t.behavior]){const s=Eo(t);s?(typeof s!="string"&&E(!1,"loadBootResource response for 'dotnetjs' type should be a URL string"),t.resolvedUrl=s):t.resolvedUrl=At(t.resolvedUrl,t.behavior)}else if(t.behavior!=="dotnetwasm")throw new Error(`Unknown single asset behavior ${e}`)}return t}let cn=!1;async function pt(){if(!cn){cn=!0,p.diagnosticTracing&&z("mono_download_assets");try{const e=[],t=[],s=(i,c)=>{!Vt[i.behavior]&&nt(i)&&p.expected_instantiated_assets_count++,!ln[i.behavior]&&nt(i)&&(p.expected_downloaded_assets_count++,c.push(ks(i)))};for(const i of Be)s(i,e);for(const i of K)s(i,t);p.allDownloadsQueued.promise_control.resolve(),Promise.all([...e,...t]).then(()=>{p.allDownloadsFinished.promise_control.resolve()}).catch(i=>{throw p.err("Error in mono_download_assets: "+i),M(1,i),i}),await p.runtimeModuleLoaded.promise;const a=async i=>{const c=await i;if(c.buffer){if(!Vt[c.behavior]){c.buffer&&typeof c.buffer=="object"||E(!1,"asset buffer must be array-like or buffer-like or promise of these"),typeof c.resolvedUrl!="string"&&E(!1,"resolvedUrl must be string");const l=c.resolvedUrl,d=await c.buffer,h=new Uint8Array(d);Xt(c),await T.beforeOnRuntimeInitialized.promise,T.instantiate_asset(c,l,h)}}else as[c.behavior]?(c.behavior==="symbols"?(await T.instantiate_symbols_asset(c),Xt(c)):c.behavior==="segmentation-rules"&&(await T.instantiate_segmentation_rules_asset(c),Xt(c)),as[c.behavior]&&++p.actual_downloaded_assets_count):(c.isOptional||E(!1,"Expected asset to have the downloaded buffer"),!ln[c.behavior]&&nt(c)&&p.expected_downloaded_assets_count--,!Vt[c.behavior]&&nt(c)&&p.expected_instantiated_assets_count--)},o=[],r=[];for(const i of e)o.push(a(i));for(const i of t)r.push(a(i));Promise.all(o).then(()=>{He||T.coreAssetsInMemory.promise_control.resolve()}).catch(i=>{throw p.err("Error in mono_download_assets: "+i),M(1,i),i}),Promise.all(r).then(async()=>{He||(await T.coreAssetsInMemory.promise,T.allAssetsInMemory.promise_control.resolve())}).catch(i=>{throw p.err("Error in mono_download_assets: "+i),M(1,i),i})}catch(e){throw p.err("Error in mono_download_assets: "+e),e}}}let dn=!1;function Po(){if(dn)return;dn=!0;const e=p.config,t=[];if(e.assets)for(const s of e.assets)typeof s!="object"&&E(!1,`asset must be object, it was ${typeof s} : ${s}`),typeof s.behavior!="string"&&E(!1,"asset behavior must be known string"),typeof s.name!="string"&&E(!1,"asset name must be string"),s.resolvedUrl&&typeof s.resolvedUrl!="string"&&E(!1,"asset resolvedUrl could be string"),s.hash&&typeof s.hash!="string"&&E(!1,"asset resolvedUrl could be string"),s.pendingDownload&&typeof s.pendingDownload!="object"&&E(!1,"asset pendingDownload could be object"),s.isCore?Be.push(s):K.push(s),_s(s);else if(e.resources){const s=e.resources;s.wasmNative||E(!1,"resources.wasmNative must be defined"),s.jsModuleNative||E(!1,"resources.jsModuleNative must be defined"),s.jsModuleRuntime||E(!1,"resources.jsModuleRuntime must be defined"),ot(K,s.wasmNative,"dotnetwasm"),ot(t,s.jsModuleNative,"js-module-native"),ot(t,s.jsModuleRuntime,"js-module-runtime"),e.globalizationMode=="hybrid"&&ot(t,s.jsModuleGlobalization,"js-module-globalization");const a=(r,i)=>{!s.fingerprinting||r.behavior!="assembly"&&r.behavior!="pdb"&&r.behavior!="resource"||(r.virtualPath=Mo(r.name)),i?(r.isCore=!0,Be.push(r)):K.push(r)};if(s.coreAssembly)for(const r in s.coreAssembly)a({name:r,hash:s.coreAssembly[r],behavior:"assembly"},!0);if(s.assembly)for(const r in s.assembly)a({name:r,hash:s.assembly[r],behavior:"assembly"},!s.coreAssembly);if(e.debugLevel!=0){if(s.corePdb)for(const r in s.corePdb)a({name:r,hash:s.corePdb[r],behavior:"pdb"},!0);if(s.pdb)for(const r in s.pdb)a({name:r,hash:s.pdb[r],behavior:"pdb"},!s.corePdb)}if(e.loadAllSatelliteResources&&s.satelliteResources)for(const r in s.satelliteResources)for(const i in s.satelliteResources[r])a({name:i,hash:s.satelliteResources[r][i],behavior:"resource",culture:r},!s.coreAssembly);if(s.coreVfs)for(const r in s.coreVfs)for(const i in s.coreVfs[r])a({name:i,hash:s.coreVfs[r][i],behavior:"vfs",virtualPath:r},!0);if(s.vfs)for(const r in s.vfs)for(const i in s.vfs[r])a({name:i,hash:s.vfs[r][i],behavior:"vfs",virtualPath:r},!s.coreVfs);const o=Co(e);if(o&&s.icu)for(const r in s.icu)r===o?K.push({name:r,hash:s.icu[r],behavior:"icu",loadRemote:!0}):r.startsWith("segmentation-rules")&&r.endsWith(".json")&&K.push({name:r,hash:s.icu[r],behavior:"segmentation-rules"});if(s.wasmSymbols)for(const r in s.wasmSymbols)Be.push({name:r,hash:s.wasmSymbols[r],behavior:"symbols"})}if(e.appsettings)for(let s=0;s<e.appsettings.length;s++){const a=e.appsettings[s],o=Ml(a);o!=="appsettings.json"&&o!==`appsettings.${e.applicationEnvironment}.json`||K.push({name:a,behavior:"vfs",noCache:!0,useCredentials:!0})}e.assets=[...Be,...K,...t]}function Mo(e){var t;const s=(t=p.config.resources)===null||t===void 0?void 0:t.fingerprinting;return s&&s[e]?s[e]:e}async function Nl(e){const t=await ks(e);return await t.pendingDownloadInternal.response,t.buffer}async function ks(e){try{return await Jt(e)}catch(t){if(!p.enableDownloadRetry||It||le||e.pendingDownload&&e.pendingDownloadInternal==e.pendingDownload||e.resolvedUrl&&e.resolvedUrl.indexOf("file://")!=-1||t&&t.status==404)throw t;e.pendingDownloadInternal=void 0,await p.allDownloadsQueued.promise;try{return p.diagnosticTracing&&z(`Retrying download '${e.name}'`),await Jt(e)}catch{return e.pendingDownloadInternal=void 0,await new Promise(a=>globalThis.setTimeout(a,100)),p.diagnosticTracing&&z(`Retrying download (2) '${e.name}' after delay`),await Jt(e)}}}async function Jt(e){for(;we;)await we.promise;try{++st,st==p.maxParallelDownloads&&(p.diagnosticTracing&&z("Throttling further parallel downloads"),we=re());const t=await async function(s){if(s.pendingDownload&&(s.pendingDownloadInternal=s.pendingDownload),s.pendingDownloadInternal&&s.pendingDownloadInternal.response)return s.pendingDownloadInternal.response;if(s.buffer){const i=await s.buffer;return s.resolvedUrl||(s.resolvedUrl="undefined://"+s.name),s.pendingDownloadInternal={url:s.resolvedUrl,name:s.name,response:Promise.resolve({ok:!0,arrayBuffer:()=>i,json:()=>JSON.parse(new TextDecoder("utf-8").decode(i)),text:()=>{throw new Error("NotImplementedException")},headers:{get:()=>{}}})},s.pendingDownloadInternal.response}const a=s.loadRemote&&p.config.remoteSources?p.config.remoteSources:[""];let o;for(let i of a){i=i.trim(),i==="./"&&(i="");const c=Tl(s,i);s.name===c?p.diagnosticTracing&&z(`Attempting to download '${c}'`):p.diagnosticTracing&&z(`Attempting to download '${c}' for ${s.name}`);try{s.resolvedUrl=c;const l=$l(s);if(s.pendingDownloadInternal=l,o=await l.response,!o||!o.ok)continue;return o}catch(l){o||(o={ok:!1,url:c,status:0,statusText:""+l});continue}}const r=s.isOptional||s.name.match(/\.pdb$/)&&p.config.ignorePdbLoadErrors;if(o||E(!1,`Response undefined ${s.name}`),!r){const i=new Error(`download '${o.url}' for ${s.name} failed ${o.status} ${o.statusText}`);throw i.status=o.status,i}go(`optional download '${o.url}' for ${s.name} failed ${o.status} ${o.statusText}`)}(e);return t&&(as[e.behavior]||(e.buffer=await t.arrayBuffer(),++p.actual_downloaded_assets_count)),e}finally{if(--st,we&&st==p.maxParallelDownloads-1){p.diagnosticTracing&&z("Resuming more parallel downloads");const t=we;we=void 0,t.promise_control.resolve()}}}function Tl(e,t){let s;return t==null&&E(!1,`sourcePrefix must be provided for ${e.name}`),e.resolvedUrl?s=e.resolvedUrl:(s=t===""?e.behavior==="assembly"||e.behavior==="pdb"?e.name:e.behavior==="resource"&&e.culture&&e.culture!==""?`${e.culture}/${e.name}`:e.name:t+e.name,s=At(p.locateFile(s),e.behavior)),s&&typeof s=="string"||E(!1,"attemptUrl need to be path or url string"),s}function At(e,t){return p.modulesUniqueQuery&&Cl[t]&&(e+=p.modulesUniqueQuery),e}let un=0;const fn=new Set;function $l(e){try{e.resolvedUrl||E(!1,"Request's resolvedUrl must be set");const t=async function(a){let o=await async function(r){const i=ht;if(!i||r.noCache||!r.hash||r.hash.length===0)return;const c=on(r);let l;_o[c]=!0;try{l=await i.match(c)}catch{}if(!l)return;const d=parseInt(l.headers.get("content-length")||"0");return rs[r.name]={responseBytes:d},l}(a);return o||(o=await function(r){let i=r.resolvedUrl;if(p.loadBootResource){const l=Eo(r);if(l instanceof Promise)return l;typeof l=="string"&&(i=l)}const c={};return p.config.disableNoCacheFetch||(c.cache="no-cache"),r.useCredentials?c.credentials="include":!p.config.disableIntegrityCheck&&r.hash&&(c.integrity=r.hash),p.fetch_like(i,c)}(a),function(r,i){const c=ht;if(!c||r.noCache||!r.hash||r.hash.length===0)return;const l=i.clone();setTimeout(()=>{const d=on(r);(async function(h,f,y,x){const v=await x.arrayBuffer(),m=function(N){if(typeof performance<"u")return performance.getEntriesByName(N)[0]}(x.url),k=m&&m.encodedBodySize||void 0;os[f]={responseBytes:k};const C=new Response(v,{headers:{"content-type":x.headers.get("content-type")||"","content-length":(k||x.headers.get("content-length")||"").toString()}});try{await h.put(y,C)}catch{}})(c,r.name,d,l)},0)}(a,o)),o}(e),s={name:e.name,url:e.resolvedUrl,response:t};return fn.add(e.name),s.response.then(()=>{e.behavior=="assembly"&&p.loadedAssemblies.push(e.name),un++,p.onDownloadResourceProgress&&p.onDownloadResourceProgress(un,fn.size)}),s}catch(t){const s={ok:!1,url:e.resolvedUrl,status:500,statusText:"ERR29: "+t,arrayBuffer:()=>{throw t},json:()=>{throw t}};return{name:e.name,url:e.resolvedUrl,response:Promise.resolve(s)}}}const Pl={resource:"assembly",assembly:"assembly",pdb:"pdb",icu:"globalization",vfs:"configuration",manifest:"manifest",dotnetwasm:"dotnetwasm","js-module-dotnet":"dotnetjs","js-module-native":"dotnetjs","js-module-runtime":"dotnetjs","js-module-threads":"dotnetjs"};function Eo(e){var t;if(p.loadBootResource){const s=(t=e.hash)!==null&&t!==void 0?t:"",a=e.resolvedUrl,o=Pl[e.behavior];if(o){const r=p.loadBootResource(o,e.name,a,s,e.behavior);return typeof r=="string"?jo(r):r}}}function Xt(e){e.pendingDownloadInternal=null,e.pendingDownload=null,e.buffer=null,e.moduleExports=null}function Ml(e){let t=e.lastIndexOf("/");return t>=0&&t++,e.substring(t)}async function Ao(e){if(!e)return;const t=Object.keys(e);await Promise.all(t.map(s=>async function(a){try{const o=At(p.locateFile(a),"js-module-library-initializer");p.diagnosticTracing&&z(`Attempting to import '${o}' for ${a}`);const r=await import(o);p.libraryInitializers.push({scriptName:a,exports:r})}catch(o){Re(`Failed to import library initializer '${a}': ${o}`)}}(s)))}async function gt(e,t){if(!p.libraryInitializers)return;const s=[];for(let a=0;a<p.libraryInitializers.length;a++){const o=p.libraryInitializers[a];o.exports[e]&&s.push(El(o.scriptName,e,()=>o.exports[e](...t)))}await Promise.all(s)}async function El(e,t,s){try{await s()}catch(a){throw Re(`Failed to invoke '${t}' on library initializer '${e}': ${a}`),M(1,a),a}}var Al="Release";function F(e,t){if(e===t)return e;const s={...t};return s.assets!==void 0&&s.assets!==e.assets&&(s.assets=[...e.assets||[],...s.assets||[]]),s.resources!==void 0&&(s.resources=Io(e.resources||{assembly:{},jsModuleNative:{},jsModuleRuntime:{},wasmNative:{}},s.resources)),s.environmentVariables!==void 0&&(s.environmentVariables={...e.environmentVariables||{},...s.environmentVariables||{}}),s.runtimeOptions!==void 0&&s.runtimeOptions!==e.runtimeOptions&&(s.runtimeOptions=[...e.runtimeOptions||[],...s.runtimeOptions||[]]),Object.assign(e,s)}function Ue(e,t){if(e===t)return e;const s={...t};return s.config&&(e.config||(e.config={}),s.config=F(e.config,s.config)),Object.assign(e,s)}function Io(e,t){if(e===t)return e;const s={...t};return s.assembly!==void 0&&(s.assembly={...e.assembly||{},...s.assembly||{}}),s.lazyAssembly!==void 0&&(s.lazyAssembly={...e.lazyAssembly||{},...s.lazyAssembly||{}}),s.pdb!==void 0&&(s.pdb={...e.pdb||{},...s.pdb||{}}),s.jsModuleWorker!==void 0&&(s.jsModuleWorker={...e.jsModuleWorker||{},...s.jsModuleWorker||{}}),s.jsModuleNative!==void 0&&(s.jsModuleNative={...e.jsModuleNative||{},...s.jsModuleNative||{}}),s.jsModuleGlobalization!==void 0&&(s.jsModuleGlobalization={...e.jsModuleGlobalization||{},...s.jsModuleGlobalization||{}}),s.jsModuleRuntime!==void 0&&(s.jsModuleRuntime={...e.jsModuleRuntime||{},...s.jsModuleRuntime||{}}),s.wasmSymbols!==void 0&&(s.wasmSymbols={...e.wasmSymbols||{},...s.wasmSymbols||{}}),s.wasmNative!==void 0&&(s.wasmNative={...e.wasmNative||{},...s.wasmNative||{}}),s.icu!==void 0&&(s.icu={...e.icu||{},...s.icu||{}}),s.satelliteResources!==void 0&&(s.satelliteResources=mn(e.satelliteResources||{},s.satelliteResources||{})),s.modulesAfterConfigLoaded!==void 0&&(s.modulesAfterConfigLoaded={...e.modulesAfterConfigLoaded||{},...s.modulesAfterConfigLoaded||{}}),s.modulesAfterRuntimeReady!==void 0&&(s.modulesAfterRuntimeReady={...e.modulesAfterRuntimeReady||{},...s.modulesAfterRuntimeReady||{}}),s.extensions!==void 0&&(s.extensions={...e.extensions||{},...s.extensions||{}}),s.vfs!==void 0&&(s.vfs=mn(e.vfs||{},s.vfs||{})),Object.assign(e,s)}function mn(e,t){if(e===t)return e;for(const s in t)e[s]={...e[s],...t[s]};return e}function dt(){const e=p.config;if(e.environmentVariables=e.environmentVariables||{},e.runtimeOptions=e.runtimeOptions||[],e.resources=e.resources||{assembly:{},jsModuleNative:{},jsModuleGlobalization:{},jsModuleWorker:{},jsModuleRuntime:{},wasmNative:{},vfs:{},satelliteResources:{}},e.assets){p.diagnosticTracing&&z("config.assets is deprecated, use config.resources instead");for(const t of e.assets){const s={};s[t.name]=t.hash||"";const a={};switch(t.behavior){case"assembly":a.assembly=s;break;case"pdb":a.pdb=s;break;case"resource":a.satelliteResources={},a.satelliteResources[t.culture]=s;break;case"icu":a.icu=s;break;case"symbols":a.wasmSymbols=s;break;case"vfs":a.vfs={},a.vfs[t.virtualPath]=s;break;case"dotnetwasm":a.wasmNative=s;break;case"js-module-threads":a.jsModuleWorker=s;break;case"js-module-globalization":a.jsModuleGlobalization=s;break;case"js-module-runtime":a.jsModuleRuntime=s;break;case"js-module-native":a.jsModuleNative=s;break;case"js-module-dotnet":break;default:throw new Error(`Unexpected behavior ${t.behavior} of asset ${t.name}`)}Io(e.resources,a)}}e.debugLevel===void 0&&Al==="Debug"&&(e.debugLevel=-1),e.cachedResourcesPurgeDelay===void 0&&(e.cachedResourcesPurgeDelay=1e4),e.applicationCulture&&(e.environmentVariables.LANG=`${e.applicationCulture}.UTF-8`),T.diagnosticTracing=p.diagnosticTracing=!!e.diagnosticTracing,T.waitForDebugger=e.waitForDebugger,T.enablePerfMeasure=!!e.browserProfilerOptions&&globalThis.performance&&typeof globalThis.performance.measure=="function",p.maxParallelDownloads=e.maxParallelDownloads||p.maxParallelDownloads,p.enableDownloadRetry=e.enableDownloadRetry!==void 0?e.enableDownloadRetry:p.enableDownloadRetry}let hn=!1;async function Ro(e){var t;if(hn)return void await p.afterConfigLoaded.promise;let s;try{if(e.configSrc||p.config&&Object.keys(p.config).length!==0&&(p.config.assets||p.config.resources)||(e.configSrc="./blazor.boot.json"),s=e.configSrc,hn=!0,s&&(p.diagnosticTracing&&z("mono_wasm_load_config"),await async function(a){const o=p.locateFile(a.configSrc),r=p.loadBootResource!==void 0?p.loadBootResource("manifest","blazor.boot.json",o,"","manifest"):l(o);let i;i=r?typeof r=="string"?await l(jo(r)):await r:await l(At(o,"manifest"));const c=await async function(d){const h=p.config,f=await d.json();h.applicationEnvironment||(f.applicationEnvironment=d.headers.get("Blazor-Environment")||d.headers.get("DotNet-Environment")||"Production"),f.environmentVariables||(f.environmentVariables={});const y=d.headers.get("DOTNET-MODIFIABLE-ASSEMBLIES");y&&(f.environmentVariables.DOTNET_MODIFIABLE_ASSEMBLIES=y);const x=d.headers.get("ASPNETCORE-BROWSER-TOOLS");return x&&(f.environmentVariables.__ASPNETCORE_BROWSER_TOOLS=x),f}(i);function l(d){return p.fetch_like(d,{method:"GET",credentials:"include",cache:"no-cache"})}F(p.config,c)}(e)),dt(),await Ao((t=p.config.resources)===null||t===void 0?void 0:t.modulesAfterConfigLoaded),await gt("onRuntimeConfigLoaded",[p.config]),e.onConfigLoaded)try{await e.onConfigLoaded(p.config,qe),dt()}catch(a){throw Le("onConfigLoaded() failed",a),a}dt(),p.afterConfigLoaded.promise_control.resolve(p.config)}catch(a){const o=`Failed to load config file ${s} ${a} ${a?.stack}`;throw p.config=e.config=Object.assign(p.config,{message:o,error:a,isError:!0}),M(1,new Error(o)),a}}typeof importScripts!="function"||globalThis.onmessage||(globalThis.dotnetSidecar=!0);const le=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Ss=typeof importScripts=="function",Il=Ss&&typeof dotnetSidecar<"u",He=Ss&&!Il,J=typeof window=="object"||Ss&&!le,It=!J&&!le;let T={},Cs={},p={},qe={},ce={},pn=!1;const L={},R={config:L},De={mono:{},binding:{},internal:ce,module:R,loaderHelpers:p,runtimeHelpers:T,globalizationHelpers:Cs,api:qe};function E(e,t){if(e)return;const s="Assert failed: "+(typeof t=="function"?t():t),a=new Error(s);Le(s,a),T.nativeAbort(a)}function Rt(){return p.exitCode!==void 0}function Rl(){return T.runtimeReady&&!Rt()}function Ll(){Rt()&&E(!1,`.NET runtime already exited with ${p.exitCode} ${p.exitReason}. You can use runtime.runMain() which doesn't exit the runtime.`),T.runtimeReady||E(!1,".NET runtime didn't start yet. Please call dotnet.create() first.")}function Lo(){J&&(globalThis.addEventListener("unhandledrejection",Oo),globalThis.addEventListener("error",zo))}let xt,bt;function Do(e){bt&&bt(e),M(e,p.exitReason)}function Fo(e){xt&&xt(e||p.exitReason),M(1,e||p.exitReason)}function M(e,t){var s,a;const o=t&&typeof t=="object";e=o&&typeof t.status=="number"?t.status:e===void 0?-1:e;const r=o&&typeof t.message=="string"?t.message:""+t;(t=o?t:T.ExitStatus?function(l,d){const h=new T.ExitStatus(l);return h.message=d,h.toString=()=>d,h}(e,r):new Error("Exit with code "+e+" "+r)).status=e,t.message||(t.message=r);const i=""+(t.stack||new Error().stack);try{Object.defineProperty(t,"stack",{get:()=>i})}catch{}const c=!!t.silent;if(t.silent=!0,Rt())p.diagnosticTracing&&z("mono_exit called after exit");else{try{R.onAbort==Fo&&(R.onAbort=xt),R.onExit==Do&&(R.onExit=bt),J&&(globalThis.removeEventListener("unhandledrejection",Oo),globalThis.removeEventListener("error",zo)),T.runtimeReady?(T.jiterpreter_dump_stats&&T.jiterpreter_dump_stats(!1),e===0&&(!((s=p.config)===null||s===void 0)&&s.interopCleanupOnExit)&&T.forceDisposeProxies(!0,!0),fl&&e!==0&&((a=p.config)===null||a===void 0||a.dumpThreadsOnNonZeroExit)):(p.diagnosticTracing&&z(`abort_startup, reason: ${t}`),function(l){p.allDownloadsQueued.promise_control.reject(l),p.allDownloadsFinished.promise_control.reject(l),p.afterConfigLoaded.promise_control.reject(l),p.wasmCompilePromise.promise_control.reject(l),p.runtimeModuleLoaded.promise_control.reject(l),T.dotnetReady&&(T.dotnetReady.promise_control.reject(l),T.afterInstantiateWasm.promise_control.reject(l),T.beforePreInit.promise_control.reject(l),T.afterPreInit.promise_control.reject(l),T.afterPreRun.promise_control.reject(l),T.beforeOnRuntimeInitialized.promise_control.reject(l),T.afterOnRuntimeInitialized.promise_control.reject(l),T.afterPostRun.promise_control.reject(l))}(t))}catch(l){Re("mono_exit A failed",l)}try{c||(function(l,d){if(l!==0&&d){const h=T.ExitStatus&&d instanceof T.ExitStatus?z:Le;typeof d=="string"?h(d):(d.stack===void 0&&(d.stack=new Error().stack+""),d.message?h(T.stringify_as_error_with_stack?T.stringify_as_error_with_stack(d.message+`
`+d.stack):d.message+`
`+d.stack):h(JSON.stringify(d)))}!He&&p.config&&(p.config.logExitCode?p.config.forwardConsoleLogsToWS?sn("WASM EXIT "+l):xo("WASM EXIT "+l):p.config.forwardConsoleLogsToWS&&sn())}(e,t),function(l){if(J&&!He&&p.config&&p.config.appendElementOnExit&&document){const d=document.createElement("label");d.id="tests_done",l!==0&&(d.style.background="red"),d.innerHTML=""+l,document.body.appendChild(d)}}(e))}catch(l){Re("mono_exit B failed",l)}p.exitCode=e,p.exitReason||(p.exitReason=t),!He&&T.runtimeReady&&R.runtimeKeepalivePop()}if(p.config&&p.config.asyncFlushOnExit&&e===0)throw(async()=>{try{await async function(){try{const l=await ft(()=>import("./h43a3havrva84dsv.js").then(v=>v.b),__vite__mapDeps([0,1])),d=v=>new Promise((m,k)=>{v.on("error",k),v.end("","utf8",m)}),h=d(l.stderr),f=d(l.stdout);let y;const x=new Promise(v=>{y=setTimeout(()=>v("timeout"),1e3)});await Promise.race([Promise.all([f,h]),x]),clearTimeout(y)}catch(l){Le(`flushing std* streams failed: ${l}`)}}()}finally{gn(e,t)}})(),t;gn(e,t)}function gn(e,t){if(T.runtimeReady&&T.nativeExit)try{T.nativeExit(e)}catch(s){!T.ExitStatus||s instanceof T.ExitStatus||Re("set_exit_code_and_quit_now failed: "+s.toString())}if(e!==0||!J)throw le&&ce.process?ce.process.exit(e):T.quit&&T.quit(e,t),t}function Oo(e){Bo(e,e.reason,"rejection")}function zo(e){Bo(e,e.error,"error")}function Bo(e,t,s){e.preventDefault();try{t||(t=new Error("Unhandled "+s)),t.stack===void 0&&(t.stack=new Error().stack),t.stack=t.stack+"",t.silent||(Le("Unhandled error:",t),M(1,t))}catch{}}(function(e){if(pn)throw new Error("Loader module already loaded");pn=!0,T=e.runtimeHelpers,Cs=e.globalizationHelpers,p=e.loaderHelpers,qe=e.api,ce=e.internal,Object.assign(qe,{INTERNAL:ce,invokeLibraryInitializers:gt}),Object.assign(e.module,{config:F(L,{environmentVariables:{}})});const t={mono_wasm_bindings_is_ready:!1,config:e.module.config,diagnosticTracing:!1,nativeAbort:a=>{throw a||new Error("abort")},nativeExit:a=>{throw new Error("exit:"+a)}},s={gitHash:"aae90fa09086a9be09dac83fa66542232c7269d8",config:e.module.config,diagnosticTracing:!1,maxParallelDownloads:16,enableDownloadRetry:!0,_loaded_files:[],loadedFiles:[],loadedAssemblies:[],libraryInitializers:[],workerNextNumber:1,actual_downloaded_assets_count:0,actual_instantiated_assets_count:0,expected_downloaded_assets_count:0,expected_instantiated_assets_count:0,afterConfigLoaded:re(),allDownloadsQueued:re(),allDownloadsFinished:re(),wasmCompilePromise:re(),runtimeModuleLoaded:re(),loadingWorkers:re(),is_exited:Rt,is_runtime_running:Rl,assert_runtime_running:Ll,mono_exit:M,createPromiseController:re,getPromiseController:pl,assertIsControllablePromise:gl,mono_download_assets:pt,resolve_single_asset_path:Xe,setup_proxy_console:yo,set_thread_prefix:bl,logDownloadStatsToConsole:vl,purgeUnusedCacheEntriesAsync:wl,installUnhandledErrorHandler:Lo,retrieve_asset_download:Nl,invokeLibraryInitializers:gt,exceptions:ml,simd:hl};Object.assign(T,t),Object.assign(p,s)})(De);let rt,at,xn=!1,bn=!1;async function Wo(e){if(!bn){if(bn=!0,J&&p.config.forwardConsoleLogsToWS&&globalThis.WebSocket!==void 0&&yo("main",globalThis.console,globalThis.location.origin),R||E(!1,"Null moduleConfig"),p.config||E(!1,"Null moduleConfig.config"),typeof e=="function"){const t=e(De.api);if(t.ready)throw new Error("Module.ready couldn't be redefined.");Object.assign(R,t),Ue(R,t)}else{if(typeof e!="object")throw new Error("Can't use moduleFactory callback of createDotnetRuntime function.");Ue(R,e)}await async function(t){if(le){const r=await ft(()=>import("./h43a3havrva84dsv.js").then(c=>c.b),__vite__mapDeps([0,1])),i=14;if(r.versions.node.split(".")[0]<i)throw new Error(`NodeJS at '${r.execPath}' has too low version '${r.versions.node}', please use at least ${i}. See also https://aka.ms/dotnet-wasm-features`)}const s=import.meta.url,a=s.indexOf("?");var o;if(a>0&&(p.modulesUniqueQuery=s.substring(a)),p.scriptUrl=s.replace(/\\/g,"/").replace(/[?#].*/,""),p.scriptDirectory=(o=p.scriptUrl).slice(0,o.lastIndexOf("/"))+"/",p.locateFile=r=>"URL"in globalThis&&globalThis.URL!==an?new URL(r,p.scriptDirectory).toString():No(r)?r:p.scriptDirectory+r,p.fetch_like=_l,p.out=console.log,p.err=console.error,p.onDownloadResourceProgress=t.onDownloadResourceProgress,J&&globalThis.navigator){const r=globalThis.navigator,i=r.userAgentData&&r.userAgentData.brands;i&&i.length>0?p.isChromium=i.some(c=>c.brand==="Google Chrome"||c.brand==="Microsoft Edge"||c.brand==="Chromium"):r.userAgent&&(p.isChromium=r.userAgent.includes("Chrome"),p.isFirefox=r.userAgent.includes("Firefox"))}ce.require=le?await ft(()=>import("./g670b8vtkhx0yc6d.js").then(r=>r.s4),__vite__mapDeps([2,1,3])).then(r=>r.createRequire(import.meta.url)):Promise.resolve(()=>{throw new Error("require not supported")}),globalThis.URL===void 0&&(globalThis.URL=an)}(R)}}async function Dl(e){return await Wo(e),xt=R.onAbort,bt=R.onExit,R.onAbort=Fo,R.onExit=Do,R.ENVIRONMENT_IS_PTHREAD?async function(){(function(){const a=new MessageChannel,o=a.port1,r=a.port2;o.addEventListener("message",i=>{var c,l;c=JSON.parse(i.data.config),l=JSON.parse(i.data.monoThreadInfo),xn?p.diagnosticTracing&&z("mono config already received"):(F(p.config,c),T.monoThreadInfo=l,dt(),p.diagnosticTracing&&z("mono config received"),xn=!0,p.afterConfigLoaded.promise_control.resolve(p.config),J&&c.forwardConsoleLogsToWS&&globalThis.WebSocket!==void 0&&p.setup_proxy_console("worker-idle",console,globalThis.location.origin)),o.close(),r.close()},{once:!0}),o.start(),self.postMessage({[xl]:{monoCmd:"preload",port:r}},[r])})(),await p.afterConfigLoaded.promise,function(){const a=p.config;a.assets||E(!1,"config.assets must be defined");for(const o of a.assets)_s(o),jl[o.behavior]&&K.push(o)}(),setTimeout(async()=>{try{await pt()}catch(a){M(1,a)}},0);const t=yn(),s=await Promise.all(t);return await vn(s),R}():async function(){var t;await Ro(R),Po();const s=yn();await ko(),async function(){try{const o=Xe("dotnetwasm");await ks(o),o&&o.pendingDownloadInternal&&o.pendingDownloadInternal.response||E(!1,"Can't load dotnet.native.wasm");const r=await o.pendingDownloadInternal.response,i=r.headers&&r.headers.get?r.headers.get("Content-Type"):void 0;let c;if(typeof WebAssembly.compileStreaming=="function"&&i==="application/wasm")c=await WebAssembly.compileStreaming(r);else{J&&i!=="application/wasm"&&Re('WebAssembly resource does not have the expected content type "application/wasm", so falling back to slower ArrayBuffer instantiation.');const l=await r.arrayBuffer();p.diagnosticTracing&&z("instantiate_wasm_module buffered"),c=It?await Promise.resolve(new WebAssembly.Module(l)):await WebAssembly.compile(l)}o.pendingDownloadInternal=null,o.pendingDownload=null,o.buffer=null,o.moduleExports=null,p.wasmCompilePromise.promise_control.resolve(c)}catch(o){p.wasmCompilePromise.promise_control.reject(o)}}(),setTimeout(async()=>{try{So(),await pt()}catch(o){M(1,o)}},0);const a=await Promise.all(s);return await vn(a),await T.dotnetReady.promise,await Ao((t=p.config.resources)===null||t===void 0?void 0:t.modulesAfterRuntimeReady),await gt("onRuntimeReady",[De.api]),qe}()}function yn(){const e=Xe("js-module-runtime"),t=Xe("js-module-native");return rt&&at||(typeof e.moduleExports=="object"?rt=e.moduleExports:(p.diagnosticTracing&&z(`Attempting to import '${e.resolvedUrl}' for ${e.name}`),rt=import(e.resolvedUrl)),typeof t.moduleExports=="object"?at=t.moduleExports:(p.diagnosticTracing&&z(`Attempting to import '${t.resolvedUrl}' for ${t.name}`),at=import(t.resolvedUrl))),[rt,at]}async function vn(e){const{initializeExports:t,initializeReplacements:s,configureRuntimeStartup:a,configureEmscriptenStartup:o,configureWorkerStartup:r,setRuntimeGlobals:i,passEmscriptenInternals:c}=e[0],{default:l}=e[1];if(i(De),t(De),p.config.globalizationMode==="hybrid"){const d=await async function(){let f;const y=Xe("js-module-globalization");return typeof y.moduleExports=="object"?f=y.moduleExports:(z(`Attempting to import '${y.resolvedUrl}' for ${y.name}`),f=import(y.resolvedUrl)),await f}(),{initHybrid:h}=d;h(Cs,T)}await a(R),p.runtimeModuleLoaded.promise_control.resolve(),l(d=>(Object.assign(R,{ready:d.ready,__dotnet_runtime:{initializeReplacements:s,configureEmscriptenStartup:o,configureWorkerStartup:r,passEmscriptenInternals:c}}),R)).catch(d=>{throw d.message&&d.message.toLowerCase().includes("out of memory")?new Error(".NET runtime has failed to start, because too much memory was requested. Please decrease the memory by adjusting EmccMaximumHeapSize. See also https://aka.ms/dotnet-wasm-features"):d})}const Fl=new class{withModuleConfig(e){try{return Ue(R,e),this}catch(t){throw M(1,t),t}}withOnConfigLoaded(e){try{return Ue(R,{onConfigLoaded:e}),this}catch(t){throw M(1,t),t}}withConsoleForwarding(){try{return F(L,{forwardConsoleLogsToWS:!0}),this}catch(e){throw M(1,e),e}}withExitOnUnhandledError(){try{return F(L,{exitOnUnhandledError:!0}),Lo(),this}catch(e){throw M(1,e),e}}withAsyncFlushOnExit(){try{return F(L,{asyncFlushOnExit:!0}),this}catch(e){throw M(1,e),e}}withExitCodeLogging(){try{return F(L,{logExitCode:!0}),this}catch(e){throw M(1,e),e}}withElementOnExit(){try{return F(L,{appendElementOnExit:!0}),this}catch(e){throw M(1,e),e}}withInteropCleanupOnExit(){try{return F(L,{interopCleanupOnExit:!0}),this}catch(e){throw M(1,e),e}}withDumpThreadsOnNonZeroExit(){try{return F(L,{dumpThreadsOnNonZeroExit:!0}),this}catch(e){throw M(1,e),e}}withWaitingForDebugger(e){try{return F(L,{waitForDebugger:e}),this}catch(t){throw M(1,t),t}}withInterpreterPgo(e,t){try{return F(L,{interpreterPgo:e,interpreterPgoSaveDelay:t}),L.runtimeOptions?L.runtimeOptions.push("--interp-pgo-recording"):L.runtimeOptions=["--interp-pgo-recording"],this}catch(s){throw M(1,s),s}}withConfig(e){try{return F(L,e),this}catch(t){throw M(1,t),t}}withConfigSrc(e){try{return e&&typeof e=="string"||E(!1,"must be file path or URL"),Ue(R,{configSrc:e}),this}catch(t){throw M(1,t),t}}withVirtualWorkingDirectory(e){try{return e&&typeof e=="string"||E(!1,"must be directory path"),F(L,{virtualWorkingDirectory:e}),this}catch(t){throw M(1,t),t}}withEnvironmentVariable(e,t){try{const s={};return s[e]=t,F(L,{environmentVariables:s}),this}catch(s){throw M(1,s),s}}withEnvironmentVariables(e){try{return e&&typeof e=="object"||E(!1,"must be dictionary object"),F(L,{environmentVariables:e}),this}catch(t){throw M(1,t),t}}withDiagnosticTracing(e){try{return typeof e!="boolean"&&E(!1,"must be boolean"),F(L,{diagnosticTracing:e}),this}catch(t){throw M(1,t),t}}withDebugging(e){try{return e!=null&&typeof e=="number"||E(!1,"must be number"),F(L,{debugLevel:e}),this}catch(t){throw M(1,t),t}}withApplicationArguments(...e){try{return e&&Array.isArray(e)||E(!1,"must be array of strings"),F(L,{applicationArguments:e}),this}catch(t){throw M(1,t),t}}withRuntimeOptions(e){try{return e&&Array.isArray(e)||E(!1,"must be array of strings"),L.runtimeOptions?L.runtimeOptions.push(...e):L.runtimeOptions=e,this}catch(t){throw M(1,t),t}}withMainAssembly(e){try{return F(L,{mainAssemblyName:e}),this}catch(t){throw M(1,t),t}}withApplicationArgumentsFromQuery(){try{if(!globalThis.window)throw new Error("Missing window to the query parameters from");if(globalThis.URLSearchParams===void 0)throw new Error("URLSearchParams is supported");const e=new URLSearchParams(globalThis.window.location.search).getAll("arg");return this.withApplicationArguments(...e)}catch(e){throw M(1,e),e}}withApplicationEnvironment(e){try{return F(L,{applicationEnvironment:e}),this}catch(t){throw M(1,t),t}}withApplicationCulture(e){try{return F(L,{applicationCulture:e}),this}catch(t){throw M(1,t),t}}withResourceLoader(e){try{return p.loadBootResource=e,this}catch(t){throw M(1,t),t}}async download(){try{await async function(){Wo(R),await Ro(R),Po(),await ko(),So(),pt(),await p.allDownloadsFinished.promise}()}catch(e){throw M(1,e),e}}async create(){try{return this.instance||(this.instance=await async function(){return await Dl(R),De.api}()),this.instance}catch(e){throw M(1,e),e}}async run(){try{return R.config||E(!1,"Null moduleConfig.config"),this.instance||await this.create(),this.instance.runMainAndExit()}catch(e){throw M(1,e),e}}};It||typeof globalThis.URL=="function"||E(!1,"This browser/engine doesn't support URL API. Please use a modern version. See also https://aka.ms/dotnet-wasm-features"),typeof globalThis.BigInt64Array!="function"&&E(!1,"This browser/engine doesn't support BigInt64Array API. Please use a modern version. See also https://aka.ms/dotnet-wasm-features");let qt=null;async function Ol(){const e=await Fl.withConfig(ul).withResourceLoader((s,a,o,r)=>s==="dotnetjs"?o:new URL(o,location.href).origin!==location.origin?fetch(o,{credentials:"omit",integrity:r}):o).create(),t=e.getConfig().mainAssemblyName;return t?e.getAssemblyExports(t):null}function zl(){return g.useMemo(()=>(qt||(qt=Ol()),qt),[])}const Bl=({goPrev:e,goNext:t,setIsPlaying:s,thumbnails:a,selectedSlideIdx:o})=>{const r=a.length<=1||o===0,i=a.length<=1||o===a.length-1,c=a.length<=1;return n.jsxs("div",{className:j("absolute start-1/2 bottom-2 flex -translate-x-1/2 items-center overflow-hidden rounded-2xl border","border-token-border-light bg-token-bg-primary text-token-text-primary","transition-opacity duration-150","can-hover:opacity-0 can-hover:pointer-events-none","can-hover:group-hover:opacity-100 can-hover:group-hover:pointer-events-auto"),children:[n.jsx("button",{onClick:e,disabled:r,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:n.jsx(Sr,{className:"icon-sm"})}),n.jsx("div",{className:"border-token-border-light h-6 border-s"}),n.jsx("button",{onClick:()=>s(!0),disabled:c,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:n.jsx(Hn,{className:"size-5"})}),n.jsx("div",{className:"border-token-border-light h-6 border-s"}),n.jsx("button",{onClick:t,disabled:i,className:"hover:text-token-text-primary disabled:text-token-text-tertiary rounded px-4 py-2",children:n.jsx(xa,{className:"icon-sm"})})]})},Wl=({walnutId:e,isLoading:t,isError:s,isInShareModal:a,errorMessage:o,handleDownloadClick:r})=>{const{presentationMap:i,setSelectedSlideIdx:c}=Vn(),l=i[e]?.presentation,d=i[e]?.workbook,h=i[e]?.selectedSlideIdx,[f,y]=g.useState([]),[x,v]=g.useState(!1);if(g.useEffect(()=>{l&&(async()=>{const C=await Promise.all(l.slides.map(N=>li(N,l)));y(C)})()},[l]),g.useEffect(()=>{d&&(async()=>{const C=await Promise.all(d.sheets.map(N=>ci(N,20,10,0,d)));y(C)})()},[d]),s||o==="fileTooLarge")return n.jsxs("div",{className:"flex h-[250px] flex-col items-center justify-center gap-2 text-center",children:[n.jsx("div",{className:"text-token-text-primary max-w-[80%] text-xs",children:n.jsx(P,{id:"YMbrlR",defaultMessage:"Preview not available."})}),n.jsx(ie,{color:"ghost",size:"small",as:"button",onClick:C=>r(C),children:n.jsx(P,{id:"GjJtUJ",defaultMessage:"Download"})})]});if(t||!l&&!d||!f.length)return n.jsx("div",{className:"flex h-[250px] items-center justify-center gap-2",children:n.jsx("div",{className:"border-token-border-heavy h-4 w-4 animate-spin rounded-full border-2 border-t-transparent"})});const m=()=>{c(e,C=>C>0?C-1:f.length-1)},k=()=>{c(e,C=>C<f.length-1?C+1:0)};return n.jsxs("div",{className:"relative flex flex-col items-center",children:[l&&n.jsx(Bl,{goPrev:m,goNext:k,setIsPlaying:v,thumbnails:f,selectedSlideIdx:h}),n.jsx("img",{src:f[h],alt:"",className:"m-0 rounded border",style:{background:"#fff"}}),l&&x&&n.jsx(di,{startIndex:0,onExit:()=>v(!1),walnutId:e}),a&&n.jsx("div",{className:"from-token-main-surface-primary pointer-events-none absolute start-0 end-0 bottom-0 z-10 h-40 bg-gradient-to-t to-transparent","data-testid":"walnut-mini-player-share-gradient"})]})},Ul=({citation:e,clientThreadId:t,messageId:s})=>{const a=zl(),[o,r]=g.useState(!1),[i,c]=g.useState(null),[l,d]=g.useState(!1),h=!!g.useContext(ee)?.message.metadata?.is_standalone_share_attachment,f=Cr(),{presentationMap:y,updatePresentationMap:x,open:v}=Vn(),m=de(),k=Ze(t),C=te(m,"3154019201")&&!!k,N=te(m,"638971034"),w=ba(m,"2888003541").value,b=Number(w?.max_bytes??3e7),_=Nt(),u=g.useRef(null),$=g.useCallback(oe=>{_.danger(oe,{toastId:"w_failed_to_download_file"})},[_]),A=!!e.file_id,B=gs(!1,t,e.file_id,()=>{},$),W=y[e.file_id]?.presentation,ne=y[e.file_id]?.workbook,ye=g.useCallback(async oe=>{if(t!==void 0){oe.preventDefault();const{data:ve}=await B.refetch();if(ve===void 0||ve?.status!=="success"){_.danger("Failed to download file");return}const Z=document.createElement("a");Z.href=ve.download_url,Z.click()}},[t,B,_]),{refetch:Ke}=B,Qe=cs();g.useEffect(()=>{u.current?.abort();const oe=new AbortController;return u.current=oe,r(!0),(async()=>{let ve=!1;try{const{data:Z}=await Ke();if(Z===void 0||Z?.status!=="success"){_.danger("Failed to download file");return}const Dt=await fetch(Z.download_url,{headers:Qe?{}:Qn(),signal:oe.signal});if(!Dt.ok)throw new Error(`HTTP ${Dt.status}`);const et=await Dt.blob();if(b!==0&&et.size>b){d(!0),c("fileTooLarge"),ve=!0;return}const tt=new Uint8Array(await et.arrayBuffer()),Ft=Is(e.file_name)??"pptx";if(Ft==="pptx"){let me;N?me=await Os(tt,Ft):me=(await a).PptxReader.ExtractSlidesProto(tt,!1);const Ot=ui.decode(me);x(e.file_id,{fileBlob:et,fileName:e.file_name,presentation:Ot,workbook:null,selectedSlideIdx:0,selectedSheetIdx:0})}else{let me;N?me=await Os(tt,Ft):me=(await a).XlsxReader.ExtractXlsxProto(tt,!1);const Ot=ho.decode(me);x(e.file_id,{fileBlob:et,fileName:e.file_name,presentation:null,workbook:Ot,selectedSlideIdx:0,selectedSheetIdx:0})}}catch(Z){Z.name!=="AbortError"&&(d(!0),Tt.addError(Z,{file_id:e.file_id}))}finally{r(!1),f&&!ve&&v(e.file_id)}})(),()=>{u.current?.abort()}},[Ke,_,x,e.file_name,e.file_id,f,v,b,Qe,a,N]);function fe(oe){oe.preventDefault(),v(e.file_id)}const{onClick:or,isLoading:rr,isEnabled:Ps}=mo({clientThreadId:t,messageId:s,fileId:e.file_id,fileName:e.file_name,processedMarkdownInfo:null,isStandaloneAttachment:!0}),Lt=h&&!f,ar=Is(e.file_name);return n.jsxs("div",{className:j("border-token-border-light flex max-w-[calc(0.8*var(--thread-content-max-width,40rem))] flex-col overflow-hidden rounded-lg border",h&&"mx-auto my-0"),children:[n.jsxs("div",{className:"text-token-text-secondary border-token-border-light flex flex-row justify-between gap-4 border-b p-2",children:[n.jsxs("div",{className:"flex flex-row items-center gap-2 overflow-hidden",children:[n.jsx(fi,{fileName:e.file_name}),n.jsx("div",{className:"truncate text-sm font-medium",children:ar==="pptx"?n.jsx(P,{id:"HTIcmf",defaultMessage:"Presentation"}):n.jsx(P,{id:"pftlup",defaultMessage:"Spreadsheet"})})]}),n.jsxs("div",{className:"text-token-text-tertiary flex flex-row items-center",children:[!Lt&&n.jsxs(n.Fragment,{children:[A&&n.jsx("button",{className:"hover:text-token-text-secondary hover:bg-token-bg-tertiary rounded-full p-1",onClick:ye,children:n.jsx(jr,{})}),n.jsx("button",{className:"hover:text-token-text-secondary hover:bg-token-bg-tertiary disabled:text-token-text-tertiary rounded-full p-1 disabled:cursor-not-allowed disabled:bg-transparent",disabled:!W&&!ne,onClick:fe,children:n.jsx(hi,{})})]}),C&&!!s&&Ps&&n.jsx("button",{className:"hover:text-token-text-secondary hover:bg-token-bg-tertiary rounded-full p-1",disabled:!Ps,onClick:or,children:rr?n.jsx(Ye,{}):n.jsx(Hl,{})})]})]}),n.jsxs("div",{className:"bg-token-bg-secondary group relative p-2",children:[n.jsx(Wl,{walnutId:e.file_id,isLoading:o,isError:l,isInShareModal:Lt,errorMessage:i,handleDownloadClick:ye}),Lt&&n.jsx("div",{className:"absolute end-5 top-46 z-10 inline-flex flex-shrink-0 items-end justify-end",children:n.jsx(Nr,{className:j("inline h-4 w-24 text-end")})})]})]})},Hl=({className:e})=>n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:e,children:[n.jsx("path",{d:"M3 12.4428V12.2806C3 11.9219 3.2843 11.631 3.63497 11.631C3.98563 11.631 4.26993 11.9219 4.26993 12.2806V12.4428C4.26993 13.1372 4.2708 13.6193 4.3007 13.994C4.33 14.3609 4.38426 14.5675 4.46108 14.7218L4.52821 14.8459C4.69655 15.1266 4.93812 15.3556 5.22657 15.5061L5.35059 15.5604C5.48786 15.6107 5.6688 15.6476 5.938 15.6701C6.30417 15.7008 6.77519 15.7007 7.45408 15.7007H12.546C13.2246 15.7007 13.6959 15.7008 14.0621 15.6701C14.4204 15.6402 14.6226 15.5846 14.7735 15.5061L14.8946 15.4364C15.169 15.2642 15.3929 15.0169 15.5399 14.7218L15.593 14.595C15.6421 14.4546 15.6782 14.2692 15.7003 13.994C15.7301 13.6193 15.73 13.1372 15.73 12.4428V12.2806C15.73 11.922 16.0145 11.6312 16.3651 11.631C16.7157 11.631 17 11.9219 17 12.2806V12.4428C17 13.1158 17.0006 13.6601 16.9655 14.0999C16.9342 14.4916 16.8722 14.8443 16.7343 15.1731L16.6709 15.3123C16.4174 15.8213 16.0318 16.2469 15.5585 16.544L15.3506 16.6632C14.9909 16.8507 14.6028 16.9281 14.1655 16.9646C13.7356 17.0006 13.2038 17 12.546 17H7.45408C6.79615 17 6.26438 17.0006 5.8345 16.9646C5.45207 16.9327 5.10749 16.8699 4.78649 16.729L4.65035 16.6632C4.1528 16.4038 3.73604 16.0094 3.44569 15.5251L3.32914 15.3123C3.14585 14.9444 3.07023 14.5473 3.03451 14.0999C2.9994 13.6601 3 13.1158 3 12.4428Z"}),n.jsx("path",{d:"M9.99993 13.2544C10.3505 13.2544 10.6348 12.9635 10.6348 12.6047V5.218L12.7337 7.36545L12.8335 7.44845C13.0799 7.61506 13.4146 7.58749 13.6316 7.36545C13.8486 7.14342 13.8756 6.80101 13.7127 6.54884L13.6316 6.44677L10.4493 3.19088C10.3302 3.06897 10.1683 3 9.99993 3C9.8316 3.0001 9.67044 3.06906 9.55138 3.19088L6.36815 6.44677C6.12048 6.70037 6.12057 7.11179 6.36815 7.36545C6.58526 7.58755 6.92077 7.61523 7.1673 7.44845L7.26707 7.36545L9.36491 5.21897V12.6047C9.36491 12.9634 9.64934 13.2542 9.99993 13.2544Z"})]}),Vl=new Set(["jpg","jpeg","png","gif","webp","svg"]),Jl=e=>{const t=e.split(".").pop();return t?Vl.has(t):!1};function Xl({citation:e,clientThreadId:t,messageId:s}){const a=de();return mi(e.file_name)&&te(a,"3392860057")?n.jsx(Ul,{citation:e,clientThreadId:t,messageId:s,children:e.label??e.file_name}):ol(e.file_name)?n.jsx(rl,{citation:e,clientThreadId:t,messageId:s}):n.jsx(ql,{citation:e,clientThreadId:t,messageId:s})}function ql({citation:e,clientThreadId:t}){const s=Ze(t),a=Nt(),o=g.useCallback(i=>{a.danger(i,{toastId:"fcoa_renderer_failed_to_download_file"})},[a]),{data:r}=gs(!0,s,e.file_id,void 0,o);return Jl(e.file_name)&&r?.download_url?n.jsx("img",{src:r?.download_url,alt:e.label??e.file_name,className:"max-h-[350px] max-w-screen"}):n.jsx("a",{href:r?.download_url,children:e.label??e.file_name})}function Gl({citationIndex:e,clientThreadId:t,nodeType:s,messageId:a}){const o=parseInt(e,10),r=g.useContext(ee);if(!r)return null;const i=r.n7jupdCrefs?.[o];if(!i)return null;switch(i.type){case"clipboard":return n.jsx(tl,{citation:i});case"computer_output":return n.jsx(sl,{citation:i,clientThreadId:t,nodeType:s});case"file":return n.jsx(Xl,{citation:i,clientThreadId:t,messageId:a});case"invalid":return null}}function Zl({path:e,lineRangeStart:t,lineRangeEnd:s,gitUrl:a}){const[o,r]=g.useState(!1),i=g.useContext(xs),c=g.useRef(null),l=g.useRef(null),d=g.useRef(null),h=()=>{d.current&&(clearTimeout(d.current),d.current=null),r(!0)},f=()=>{d.current=window.setTimeout(()=>{r(!1)},200)};if(!e)return null;const y=i?.fileSnapshots.find(v=>v.path===e);if(!y)return null;const x=Kl(t,s,y);return x.length?n.jsxs(ds,{open:o,onOpenChange:r,children:[n.jsx(us,{asChild:!0,onMouseEnter:h,onMouseLeave:f,children:n.jsx("span",{ref:c,className:"bg-token-bg-secondary text-token-text-secondary mx-0.5 inline-flex aspect-square size-min cursor-default items-center justify-center rounded-full p-1",children:n.jsx(Gi,{className:"size-[10px]"})})}),n.jsx(fs,{children:n.jsx(ms,{ref:l,className:"z-50 focus:outline-none",side:"right",onMouseEnter:h,onMouseLeave:f,onOpenAutoFocus:v=>v.preventDefault(),children:n.jsx(Yl,{snapshot:y,snippetLines:x,lineRangeStart:t,lineRangeEnd:s,gitUrl:a})})})]}):null}function Yl({snapshot:e,snippetLines:t,lineRangeStart:s,lineRangeEnd:a,gitUrl:o}){const r=e.path.split(".").pop()??"sh",i=t.reduce((l,d)=>{if(d.trim()==="")return l;const h=d.match(/^\s*/),f=h?h[0].length:0;return l===-1?f:Math.min(l,f)},-1),c=t.map(l=>i>0?l.slice(i):l).join(`
`);return n.jsxs("div",{className:"bg-token-bg-primary border-token-border-default mx-4 flex max-h-[600px] flex-col rounded-2xl border px-2 pt-2 pb-4 shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)] focus:outline-none dark:shadow-none",children:[c&&n.jsx(Tr,{wrapperClassName:"rounded-lg !bg-token-bg-tertiary !border-none mb-3 max-h-[400px] overflow-auto text-xs w-[600px] max-w-full",codeContainerClassName:"!p-2",language:r,content:c,showActionBar:!1}),n.jsxs("div",{className:"grid w-full grid-cols-[minmax(0,1fr)_auto] items-center justify-between gap-1 px-2 text-sm",children:[e.path,n.jsxs("div",{className:"text-token-text-tertiary flex items-center gap-1 whitespace-nowrap",children:[n.jsx(P,{id:"wham.citation.file.lineRange",defaultMessage:"Lines {lineRangeStart}-{lineRangeEnd}",values:{lineRangeStart:s,lineRangeEnd:a}}),o&&n.jsx("a",{className:"group flex w-full items-center gap-1 p-1",href:o,target:"_blank",rel:"noopener noreferrer",children:n.jsx(ya,{className:"icon-xs hover:text-token-text-primary"})})]})]})]})}function Kl(e,t,s){if(s.contents){const i=s.contents.split(`
`),c=Math.max(0,e-1),l=t?Math.min(i.length,t):c+1;return i.slice(c,l)}const a=s.line_range_contents?.find(i=>Ql(i,e,t));if(!a)return[];const o=Math.max(e-a.line_range_start,0),r=o+(t-e+1);return a.content.slice(o,r)}function Ql(e,t,s){return t<e.line_range_start?!1:!(s>e.line_range_end)}function ec(){const e=eo.getItem(to.ProposedTasks);return e&&typeof e=="object"?e:{}}const wn=va(e=>({tasks:ec(),store(t){e(s=>{const a={...s.tasks,[t.contentId]:t};return eo.setItem(to.ProposedTasks,a),{tasks:a}})}}));function tc({title:e,prompt:t,environmentId:s,branch:a,contentId:o,hasHitRateLimit:r}){const[i,c]=g.useState(!1),l=wa(),{setEnvironmentId:d,setBranch:h}=co(),{refetch:f}=vi(),y=D(),x=Nt(),v=wn(b=>b.tasks[o]),m=wn(b=>b.store),{mutate:k,isPending:C}=cr({mutationFn:()=>wi.createNewTask(s,a,t,!1).catch(b=>{throw x.danger({id:"wham.whamComposer.failedToCreateTask",defaultMessage:"Failed to create task",description:"Toast text shown when a task failed to create."},{id:`suggestion-${o}`,duration:5,hasCloseButton:!0,toastId:"wham_proposed_task_failed_to_create_task"}),b}),onSuccess:async b=>{await f(),N(b)}}),N=b=>{try{const _=b.task.id,u=b.turn.id,$=`/codex/tasks/${_}`;m({contentId:o,prompt:t,scheduledTaskId:_,turnId:u,url:$}),c(!1)}catch{}},w=!s||!a||C||r;return n.jsxs("div",{className:j("mt-1 mb-3 flex w-full items-center rounded-xl px-3 py-3",v?"bg-token-bg-secondary border border-transparent":"bg-token-bg-primary border-token-border-default border shadow-[0px_1px_1px_0px_rgba(0,0,0,0.05)]"),children:[n.jsxs("div",{className:j("group flex flex-1 items-center gap-1",!v&&"-my-3 py-3",!v&&!w&&"cursor-pointer"),onClick:()=>{w||v||(d(s),h(a),c(!0),Rs.recordProposedTaskClicked("edit"))},children:[n.jsxs("div",{className:"flex flex-col gap-0.5",children:[n.jsx("span",{className:"text-token-text-tertiary text-xs",children:n.jsx(P,{id:"wham.whamProposedTask.title",defaultMessage:"Suggested task"})}),n.jsx("span",{className:j("text-sm font-medium",v&&"text-token-text-tertiary"),children:e})]}),!w&&!v&&n.jsx($r,{className:"icon-sm text-token-text-secondary mb-0.5 cursor-pointer self-end opacity-0 transition-opacity group-hover:opacity-100"})]}),n.jsx("div",{className:"flex items-center justify-end gap-2 text-xs",children:v?n.jsx(ie,{size:"small",color:"secondary",as:"a",to:v?.url,openNewTab:!0,children:n.jsx("span",{className:"text-token-text-primary font-medium",children:n.jsx(P,{id:"lwqFNG",defaultMessage:"View task"})})}):n.jsx(sc,{prompt:r?y.formatMessage({id:"wham.proposedTask.hitRateLimit",defaultMessage:"You have reached your rate limit"}):t,tooltipEnabled:!v&&!i,children:n.jsx(ie,{size:"small",color:"secondary",disabled:w,onClick:()=>{Rs.recordProposedTaskClicked("create"),k()},children:n.jsxs("div",{className:"flex items-center gap-0.5",children:[n.jsx(P,{id:"b2N2Y8",defaultMessage:"Start task"}),C?n.jsx(Ye,{className:"icon-xs me-[2px]"}):n.jsx(Hn,{className:"icon-sm"})]})})})}),n.jsx(Ie.Root,{testId:"modal-task-stub-composer",isOpen:i,onClose:()=>c(!1),children:n.jsx(Ie.Overlay,{children:n.jsx("div",{className:"flex h-full w-full items-center justify-center",onClick:b=>{b.stopPropagation(),b.preventDefault()},children:n.jsxs(_a,{className:"w-3xl focus:outline-hidden",onEscapeKeyDown:b=>{b.stopPropagation(),c(!1)},children:[n.jsxs(ka,{children:[n.jsx(Sa,{children:n.jsx(P,{id:"wham.proposedTaskModel.title",defaultMessage:"Kick off a new Codex task"})}),n.jsx(Ca,{children:n.jsx(P,{id:"wham.proposedTaskModel.description",defaultMessage:"Codex can propose new follow up tasks"})})]}),n.jsx(es.div,{initial:{opacity:0,translateY:20},animate:{opacity:1,translateY:0},transition:{duration:l?0:.25},children:n.jsxs("div",{className:"flex flex-col items-center gap-8",children:[n.jsx("h1",{className:"text-token-text-primary dark text-token-text-primary text-[28px] font-semibold",children:n.jsx(P,{id:"wham.proposedTaskModal.title",defaultMessage:"Edit suggested task"})}),n.jsx(nc,{prompt:t,onSuccess:N})]})})]})})})})]})}function sc({prompt:e,tooltipEnabled:t,children:s}){return t?n.jsx($t,{side:"right",label:n.jsx("span",{className:"block p-2 text-start whitespace-pre-wrap",children:e}),wide:!0,children:s}):s}function nc({prompt:e,onSuccess:t}){const s=ja(),a=g.useMemo(()=>s?new Na($a()):new Ta,[s]);return g.useEffect(()=>{a.setText(e.trimEnd())},[a,e]),n.jsx(Pa.Provider,{value:a,children:n.jsx(yi,{isBigBoxMode:!0,expanded:!0,disableDuringSubmit:!0,onSuccess:t})})}function oc({title:e,prompt:t}){const s=g.useContext(xs),a=co(r=>r.getRateLimit()?.remaining===0),o=g.useMemo(()=>rc(`${s?.taskId}:${e}:${t}`),[s?.taskId,e,t]);return!s||!s.environmentId||!s.branch?null:n.jsx(tc,{title:e,prompt:t,environmentId:s.environmentId,branch:s.branch,contentId:o,hasHitRateLimit:a})}function rc(e){let t=5381;for(let s=0;s<e.length;s++)t=(t<<5)+t^e.charCodeAt(s);return(t>>>0).toString(16).padStart(8,"0")}function ac({chunkId:e,lineRangeStart:t,lineRangeEnd:s}){const[a,o]=g.useState(!1),i=g.useContext(xs)?.terminalMessageContents.find(v=>v.includes(e)),c=g.useRef(null),l=g.useRef(null),d=g.useRef(null);if(!i)return null;const h=lc(i);if(!h)return null;const f=h.output.slice(t-1,s);if(!f.some(v=>!!v.length))return null;const y=()=>{d.current&&(clearTimeout(d.current),d.current=null),o(!0)},x=()=>{d.current=window.setTimeout(()=>{o(!1)},200)};return n.jsxs(ds,{open:a,onOpenChange:o,children:[n.jsx(us,{asChild:!0,onMouseEnter:y,onMouseLeave:x,children:n.jsx("span",{ref:c,className:"bg-token-bg-secondary text-token-text-secondary mx-0.5 inline-flex aspect-square size-min cursor-default items-center justify-center rounded-full p-1",children:n.jsx(Pr,{className:"size-[10px]"})})}),n.jsx(fs,{children:n.jsx(ms,{ref:l,className:"z-50 focus:outline-none",side:"right",onMouseEnter:y,onMouseLeave:x,onOpenAutoFocus:v=>v.preventDefault(),children:n.jsx("div",{className:"max-h-[500px] max-w-screen px-4",children:n.jsx(ic,{lines:f,lineRangeStart:t,lineRangeEnd:s})})})})]})}function ic({lines:e,lineRangeStart:t,lineRangeEnd:s}){return n.jsxs("div",{className:"bg-token-bg-primary border-token-border-default mx-4 flex flex-col overflow-auto rounded-2xl border px-2 pt-2 pb-3 shadow-[0px_4px_16px_0px_rgba(0,0,0,0.05)] focus:outline-none dark:shadow-none",children:[n.jsx(_i,{className:"bg-token-sidebar-surface-primary dark mb-2.5 max-h-[200px] w-full overflow-auto rounded-lg p-3 font-mono text-xs whitespace-pre text-white dark:border dark:border-white/10",children:e.join(`
`)}),n.jsx("div",{className:"flex w-full justify-end gap-1 px-2 text-sm",children:n.jsx("span",{className:"text-token-text-tertiary",children:n.jsx(P,{id:"wham.citation.terminal.lineRange",defaultMessage:"Lines {lineRangeStart}-{lineRangeEnd}",values:{lineRangeStart:t,lineRangeEnd:s}})})})]})}function lc(e){try{const t=JSON.parse(e);return!("chunk_id"in t)||typeof t.chunk_id!="string"||!("session_name"in t)||typeof t.session_name!="string"||!("start_line_no"in t)||typeof t.start_line_no!="number"?null:"output"in t?t:null}catch{return null}}function cc(e){return e&&/^turn[0-9]+ifs[0-9]+$/.test(e)}const dc=4;function uc({metadata:e,analyticsMetadata:t,trackContentReferenceEvent:s,imageSource:a}){const o=a??Es.Turn,r=Pt(),i=e.images,c=i.some(x=>x.is_proxied_image)?[]:i.map(x=>x.thumbnail_url),l=dr({queries:c.map(x=>Ti(x)),combine:x=>{const v=new Set;return x.forEach((m,k)=>{m.isSuccess&&v.add(c[k])}),v}}),d=i.filter(x=>l.has(x.thumbnail_url)),h=e.images.length,f=o===Es.ImageGroup?i:void 0;if(i.some(x=>x.is_proxied_image)){const x=i.find(m=>m.is_proxied_image),v=j("mb-7 mt-1 min-w-32 max-w-[22%] rounded-xl border-[0.5px] border-token-border-default",x?.float_top?"relative block":"float-image z-10 float-end clear-end ms-7 overflow-hidden");return n.jsx(Gt,{image:x,imageSource:o,analyticsMetadata:t,trackContentReferenceEvent:s,className:v},x?.content_url)}if(h===0)return null;if(h===1){const x=e.images[0];return n.jsx(Gt,{image:x,imageSource:o,analyticsMetadata:t,trackContentReferenceEvent:s,className:"float-image border-token-border-default float-end clear-end ms-7 mt-1 mb-7 max-w-[22%] min-w-32 overflow-hidden rounded-xl border-[0.5px]"},x.content_url)}const y=r?d.length:Math.min(d.length,dc);return n.jsx("div",{className:"no-scrollbar mt-1 mb-6 flex min-h-36 flex-nowrap gap-0.5 overflow-auto sm:gap-1 sm:overflow-hidden xl:min-h-44",children:d.slice(0,y).map((x,v)=>n.jsx("div",{className:j("border-token-border-default relative aspect-square max-h-48 w-32 shrink-0 overflow-hidden rounded-xl border-[0.5px] sm:w-[calc((100%-0.5rem)/4)] md:shrink",v===0&&"rounded-s-xl",v===y-1&&"rounded-e-xl"),children:n.jsx(Gt,{image:x,imageSource:o,lightboxImages:f,analyticsMetadata:t,trackContentReferenceEvent:s,className:"h-full w-full"},x.thumbnail_url)},x.thumbnail_url))})}const js=g.memo(uc,(e,t)=>e.numImageResults===t.numImageResults&&e.analyticsMetadata===t.analyticsMetadata&&e.trackContentReferenceEvent===t.trackContentReferenceEvent&&e.metadata.images.length===t.metadata.images.length&&e.metadata.images.every((s,a)=>s.content_url===t.metadata.images[a].content_url));function fc(e,t){if(!e||!t)return null;const{width:s,height:a}=t;if(s===a)return null;const{center_x_percent:o,center_y_percent:r}=e;let i=50,c=50;if(a>s){const l=a-s;c=(r*a-s/2)/l*100,i=50}else{const l=s-a;i=(o*s-a/2)/l*100,c=50}return`${i.toFixed(1)}% ${c.toFixed(1)}%`}function Gt({image:e,imageSource:t,className:s,imgClassName:a,style:o,analyticsMetadata:r,trackContentReferenceEvent:i,badge:c,lightboxImages:l}){const d=$i(e),h=e?.content_url.replace(/^http:\/\//,"https://"),f=mc(e),{isSuccess:y}=ts(d),{isSuccess:x,isError:v}=ts(f?h:void 0),m=g.useMemo(()=>({image_url:d,title:e?.title}),[d,e?.title]);g.useEffect(()=>{e&&y&&i("Search Content Reference Shown","search_content_reference_shown","image_v2",m)},[i,e,y,m]),g.useEffect(()=>{h&&v&&Tt.addAction("Failed to download full image",{url:h,thumbnailUrl:d})},[h,v,d]);const k=Jn.useStore(),C=fc(e?.thumbnail_crop_info??null,e?.thumbnail_size??null),N=!e||!(y||x||e.is_proxied_image),w=(()=>{if(!N)return e.is_proxied_image?e.url:f&&x?h:d})();return n.jsxs("button",{className:j("relative aspect-square overflow-hidden",s),style:o,onClick:()=>{i("Search Content Reference Clicked","search_content_reference_clicked","image_v2",m),k.setCurrentImage(e?{image:e,source:t,analyticsMetadata:r,imageResults:l}:void 0)},children:[N?n.jsx("div",{className:"bg-token-main-surface-tertiary aspect-square h-full w-full animate-pulse"}):n.jsx(uo,{children:n.jsx("img",{src:w,alt:e?.content_url,style:C?{objectPosition:C}:{},className:j("bg-token-main-surface-tertiary m-0 h-full w-full object-cover",a)})}),c&&n.jsx("div",{className:"pointer-events-none absolute end-2 bottom-2",children:c})]})}function mc(e){return!e||e.is_proxied_image?!1:e.thumbnail_url.includes("images.openai.com/thumbnails")}const hc=200,pc=100,it={id:"imagePill.screenshot",defaultMessage:"screenshot",description:"Brief text to be placed in a pill as generic fallback when screenshot url is missing"},Uo="m-0 p-[2px] pr-1",gc=j(Uo,"h-full rounded-lg object-contain"),xc=j(Uo,"p-[4px]");function _n({image:e}){const[t,s]=g.useState(!1),a=Jn.useStore(),o=g.useRef(null),r=g.useRef(null),i=D(),c=e?.content_url,l=g.useMemo(()=>c?Ct(c,"hostname"):null,[c]),d=g.useCallback(()=>{o.current&&clearTimeout(o.current)},[]),h=g.useCallback(()=>{e&&(d(),s(!1),a.setCurrentImage({image:e}))},[a,e,d]),f=g.useCallback(()=>{r.current&&clearTimeout(r.current)},[]),y=g.useCallback(()=>{s(!1)},[s]),x=g.useCallback(k=>{k.stopPropagation(),f(),o.current=setTimeout(()=>{s(!0)},hc)},[f]),v=g.useCallback(k=>{k.stopPropagation(),d(),r.current=setTimeout(()=>{y()},pc)},[d,y]);g.useEffect(()=>{t&&f()},[t,f]);const m=g.useMemo(()=>({onBlur:v,onMouseLeave:v,onMouseEnter:x,onFocus:x}),[v,x]);return e?n.jsxs("span",{onClick:h,className:"relative",...m,children:[n.jsxs(kn,{isOpen:t,children:[n.jsx("img",{className:gc,src:e.thumbnail_url}),n.jsx("span",{children:l??i.formatMessage(it)})]}),t&&n.jsx("div",{className:"absolute start-0 z-50",children:n.jsxs("div",{className:j("text-token-text-secondary border-token-border-light w-[256px] cursor-pointer px-3 pt-2 pb-3 text-sm shadow-md outline-[0.5px] outline-black/5",Ma),...m,children:[n.jsxs(ue,{href:e.content_url,target:"_blank",rel:"noopener",className:"z-50 mb-2 flex items-center gap-2 hover:opacity-70",onClick:k=>k.stopPropagation(),children:[n.jsx(lt,{url:e.content_url,className:"m-0 size-4 p-0",size:32}),l??i.formatMessage(it)]}),n.jsx("img",{className:"border-token-border-light m-0 cursor-pointer rounded-lg object-contain p-0 outline-[0.5px] outline-black/5",src:e.thumbnail_url,alt:l??i.formatMessage(it),onClick:k=>{k.preventDefault(),h()}})]})})]}):n.jsxs(kn,{isOpen:!1,children:[n.jsx("span",{className:xc,children:n.jsx(Ye,{})}),n.jsx("span",{children:l??i.formatMessage(it)})]})}function kn({children:e,isOpen:t,...s}){return n.jsx("span",{className:j("ms-1 cursor-pointer","inline-flex max-w-full items-center","relative top-[0.2rem]","animate-[show_150ms_ease-in]"),...s,children:n.jsx("span",{className:j("text-token-text-secondary flex h-4.5 overflow-hidden rounded-xl bg-[#F4F4F4] pe-2 text-[0.5625em] font-medium dark:bg-[#303030]","hover:bg-token-text-primary! hover:text-token-text-inverted",t&&"bg-token-main-surface-tertiary text-token-text-secondary","transition-colors duration-150 ease-in-out","items-center justify-center"),children:e})})}async function bc({conversationId:e,messageId:t,assetPointerLinks:s,sharedConversationLikeId:a}){return await Aa.safePost("/conversation/get_images_for_message",{requestBody:{conversation_id:e??null,share_id:a??null,message_id:t,asset_pointer_links:s},authOption:Ia.SendIfAvailable})}function yc({reference:e,conversationId:t,messageId:s,sharedConversationLikeId:a,isN7jupdMessage:o}){return ur({queryKey:["inline-images",e,t,s],queryFn:async()=>{if(!e.asset_pointer_links||e.asset_pointer_links.length===0||!t&&!a)return{images:[],formats:[]};const i=await bc({conversationId:t,messageId:s,assetPointerLinks:e.asset_pointer_links,sharedConversationLikeId:a});for(let c=0;c<i.images.length;c++){const l=i.images[c],h=`image/${i.formats[c]}`,f=vc(l,h);i.images[c]=f}return i},...o?{retry:3,retryDelay:5e3}:{}})}function vc(e,t="",s=512){const a=atob(e),o=[];for(let i=0;i<a.length;i+=s){const c=a.slice(i,i+s),l=new Array(c.length);for(let h=0;h<c.length;h++)l[h]=c.charCodeAt(h);const d=new Uint8Array(l);o.push(d)}const r=new Blob(o,{type:t});return URL.createObjectURL(r)}const wc=200;function _c({reference:e,clientThreadId:t,message:s,trackContentReferenceEvent:a}){const o=hs(t),{postId:r}=g.useContext(Mr),{data:i,isLoading:c,isError:l,error:d}=yc({reference:e,conversationId:o,messageId:s.id,sharedConversationLikeId:r,isN7jupdMessage:s.metadata?.n7jupd_message}),h=g.useRef([]);g.useEffect(()=>()=>{h.current.forEach(y=>{URL.revokeObjectURL(y)}),h.current=[]},[]);const f=Ho(s,e);return d||l||i&&!("images"in i)||c||!i?.images.length?null:(h.current=[],n.jsx(n.Fragment,{children:i?.images.map((y,x)=>{const v=Vo(e,y,f);return n.jsx(js,{metadata:v,analyticsMetadata:{clientThreadId:t,messageId:s.id},numImageResults:1,trackContentReferenceEvent:a},`image-carousel-inline-${x}`)})}))}const kc=(e,t)=>{const s=new RegExp(t+"\\s*([^\\n]+)","m"),a=e.match(s);return a&&a[1]?a[1].trim().length:0};function Ho(e,t){return g.useMemo(()=>{let s=-1;return e.content.content_type==="text"&&(s=kc(e.content.parts.join(""),t.matched_text)),s<wc||s===-1},[e,t.matched_text])}function Vo(e,t,s){return{matched_text:e.matched_text,start_idx:e.start_idx,end_idx:e.end_idx,safe_urls:e.safe_urls,alt:e.alt,prompt_text:e.prompt_text,type:"image_v2",refs:[],images:[{url:t,content_url:e.clicked_from_url??"",thumbnail_url:t,title:e.clicked_from_title??"",attribution:Ct(e.clicked_from_url??t,"hostname"),content_size:{width:Sn,height:Cn},thumbnail_size:{width:Sn,height:Cn},is_proxied_image:!0,float_top:s}]}}const Sn=141,Cn=143;function Sc({reference:e,clientThreadId:t,message:s,trackContentReferenceEvent:a}){const o=s.metadata?.n7jupd_message&&e.matched_text.includes("screenshot"),r=hs(t),i=g.useContext(Er)?.serverSharedThreadId??void 0,c=Ar(e.asset_pointer_links[0]),l=g.useMemo(()=>({content_type:Ea.ImageAssetPointer,size_bytes:0,width:0,height:0,asset_pointer:c}),[c]),d=Ir({asset:l,sharedThreadId:i,conversationId:r}),h=d.data?.url,f=Ho(s,e),y=g.useMemo(()=>h?Vo(e,h,f):null,[h,e,f]);return d.error||d.isError?null:o&&!d.data?.url&&d.isLoading?n.jsx(_n,{image:null},"image-pill-loading"):!o&&(d.isLoading||!d.data)||!y?null:o?n.jsx(_n,{image:y.images[0]}):n.jsx(js,{metadata:y,analyticsMetadata:{clientThreadId:t,messageId:s.id},numImageResults:1,trackContentReferenceEvent:a})}const Q={TTFP:"products.ttfp",TTLT:"products.ttlt",TTF_VISIBLE_CONTENT_TOKEN:"products.ttf_visible_content_token"},Ns={[Q.TTFP]:new Set,[Q.TTLT]:new Set,[Q.TTF_VISIBLE_CONTENT_TOKEN]:new Set};function Zt({profiler:e,messageId:t,metric:s,overrideDurationMs:a}){Ns[s].add(t);const o=Fr();e.logTiming(s,{context:{eval_preset:o.eval_preset},overrideDurationMs:a})}function Yt({messageId:e,metric:t}){return Ns[t].has(e)}function Jo(e){"use forget";const t=is.c(25),{clientThreadId:s,messageId:a,products:o}=e;let r;t[0]!==a?(r=w=>[mt.getRequestId(w),mt.isMessageTurnEnded(w,a)],t[0]=a,t[1]=r):r=t[1];const[i,c]=jt(s,r);let l;t[2]!==s?(l={namespace:Lr.ProductsCompletionRequest,clientThreadId:s},t[2]=s,t[3]=l):l=t[3];const{profiler:d,isRequestActive:h}=Rr(l),f=h&&!c,y=Mi(f);let x,v;t[4]!==f||t[5]!==a||t[6]!==o.length||t[7]!==d?(x=()=>{Yt({messageId:a,metric:Q.TTFP})||d&&f&&o.length>0&&Zt({profiler:d,messageId:a,metric:Q.TTFP})},v=[f,a,o.length,d],t[4]=f,t[5]=a,t[6]=o.length,t[7]=d,t[8]=x,t[9]=v):(x=t[8],v=t[9]),g.useEffect(x,v);let m,k;t[10]!==f||t[11]!==a||t[12]!==y||t[13]!==d?(m=()=>{Yt({messageId:a,metric:Q.TTLT})||d&&y.current&&!f&&Zt({profiler:d,messageId:a,metric:Q.TTLT})},k=[a,y,f,d],t[10]=f,t[11]=a,t[12]=y,t[13]=d,t[14]=m,t[15]=k):(m=t[14],k=t[15]),g.useEffect(m,k);let C;t[16]!==a||t[17]!==d||t[18]!==i?(C=()=>{if(Yt({messageId:a,metric:Q.TTF_VISIBLE_CONTENT_TOKEN}))return;const w=i?Dr(i):null;if(d&&w){const b=Q.TTF_VISIBLE_CONTENT_TOKEN;Ns[b].add(a),Zt({profiler:d,messageId:a,metric:b,overrideDurationMs:w.turnTracker.first_visible_content_token_lat})}},t[16]=a,t[17]=d,t[18]=i,t[19]=C):C=t[19];let N;t[20]!==a||t[21]!==o.length||t[22]!==d||t[23]!==i?(N=[a,d,i,o.length],t[20]=a,t[21]=o.length,t[22]=d,t[23]=i,t[24]=N):N=t[24],g.useEffect(C,N)}function Cc({contentReference:e,clientThreadId:t,messageId:s,turnIndex:a,trackContentReferenceEvent:o}){const r=g.useCallback(()=>o("Search Content Reference Shown","search_content_reference_shown","product_entity",{content_reference_start_index:e.start_idx,product_id:e.product.id}),[o,e.start_idx,e.product.id]),i=g.useCallback(()=>o("Search Content Reference Clicked","search_content_reference_clicked","product_entity",{content_reference_start_index:e.start_idx,product_id:e.product.id}),[o,e.start_idx,e.product.id]),c=e.product;g.useEffect(()=>r(),[r]),Jo({clientThreadId:t,messageId:s,products:[c]});const{openThreadSidebar:l}=ps();return n.jsx("span",{className:"decoration-token-text-secondary inline align-baseline underline decoration-[4%] underline-offset-[16%] [text-decoration-skip-ink:auto] [text-underline-position:from-font] hover:cursor-pointer",onClick:()=>{if(i(),c.offers){if(!t)return;l({type:"product",clientThreadId:t,messageId:s,turnIndex:a,contentReferenceStartIndex:e.start_idx,productIndex:0})}else window.open(c.url,"_blank")},children:n.jsx("span",{className:"whitespace-normal",children:c.title})})}function Xo({items:e,targetItemCount:t,onCardRender:s,onCardShown:a,onCardClicked:o,onReplyClicked:r,allowFullWidth:i=!1,cardClassName:c,showGradient:l=!0,arrowClassName:d}){const h=g.useRef(null),[f,y]=g.useState(null),x=g.useRef(null),v=()=>{x.current=setTimeout(()=>{y(null),x.current=null},200)},m=()=>{x.current&&(clearTimeout(x.current),x.current=null)},k=g.useRef(null),[C,N]=g.useState({left:0,top:0}),w=8;g.useEffect(()=>{const A=h.current,B=k.current;if(!r||!f||!A||!B)return;const W=()=>{const ne=f.card.getBoundingClientRect(),ye=A.getBoundingClientRect(),Ke=B.getBoundingClientRect(),Qe=ne.bottom-ye.top+w;var fe=ne.left-ye.left;fe=Math.max(0,fe),fe=Math.min(fe,ye.width-Ke.width),N({left:fe,top:Qe})};return W(),A.addEventListener("scroll",W),()=>A.removeEventListener("scroll",W)},[f,e,r]);const b=Pt(),_=b?2:4;if(t===void 0)t=e.length;else if(!t&&e.length<_)return null;const u=(t??e.length)>=_,$=u&&b;return n.jsxs("div",{className:"relative",children:[n.jsx("div",{ref:h,className:j("flex flex-row gap-4 py-2",$&&"mx-[-1rem] px-[1rem]",u&&"no-scrollbar snap-x snap-proximity scroll-ps-4 overflow-x-scroll scroll-smooth"),children:e.map((A,B)=>n.jsx("div",{className:j(u||!i?"w-50 shrink-0 snap-start @5xl/thread:w-61":"min-w-0 flex-1"),children:n.jsx(jc,{cardClassName:c,onShown:()=>a(A,B),onClick:()=>o(A,B),onHover:W=>{m(),W?y({card:W,item:A,index:B}):v()},children:s(A,!b&&t===1)})},B))}),u&&!$&&n.jsx(Nc,{scrollableRef:h,units:e.length,showGradient:l,arrowClassName:d}),r&&n.jsx("div",{ref:k,className:j("absolute z-10",f?"pointer-events-auto opacity-100":"pointer-events-none opacity-0","transition-[transform,opacity] duration-200"),style:{willChange:"opacity, transform",left:C.left,top:C.top,transform:f?"translateY(0)":"translateY(-8px)"},onMouseEnter:m,onMouseLeave:v,children:n.jsx(ie,{className:j(f?"pointer-events-auto":"pointer-events-none","border-light bg-clip-padding px-4 py-2 shadow-md"),size:"small",color:"secondary",onClick:()=>f&&r(f.item,f.index),children:n.jsxs("div",{className:"flex flex-row items-center gap-1",children:[n.jsx(Ei,{className:"icon-sm text-token-text-secondary"}),n.jsx(P,{id:"9TG7OR",defaultMessage:"Ask about this"})]})})})]})}function jc({onShown:e,onClick:t,onHover:s,children:a,cardClassName:o}){const r=g.useRef(null),i=g.useRef(e);return g.useEffect(()=>{i.current=e},[e]),g.useEffect(()=>{if(!r.current)return;const c=new IntersectionObserver(([l])=>l.isIntersecting&&i.current(),{threshold:.5});return c.observe(r.current),()=>c.disconnect()},[]),n.jsx("div",{ref:r,className:j("h-full w-full","bg-token-bg-primary cursor-pointer",o),onClick:t,onMouseEnter:()=>r.current&&s(r.current),onMouseLeave:()=>s(null),children:a})}function Nc({scrollableRef:e,units:t,showGradient:s,arrowClassName:a}){const[o,r]=g.useState({left:!1,right:!1}),[i,c]=g.useState(!1);g.useEffect(()=>{const d=e.current;if(!d)return;const h=()=>{const{scrollLeft:f,scrollWidth:y,clientWidth:x}=d,v=f/(y-x);r({left:v>0,right:v<1}),!i&&f>0&&c(!0)};return h(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)},[e,t,i]);const l=d=>{if(!e.current)return;c(!0);const{clientWidth:h,scrollWidth:f}=e.current,y=f/t,x=Math.floor(h/y)*y;e.current.scrollBy({left:x*d,behavior:"smooth"})};return n.jsxs("div",{className:"pointer-events-none absolute start-0 top-0 flex h-full w-full flex-row",children:[n.jsx("div",{className:j("flex h-full w-9 items-center justify-start",i&&s&&"bg-linear-to-r from-(--bg-primary) to-transparent",o.left?"opacity-100":"opacity-0","transition-opacity duration-100"),children:n.jsx(ie,{color:"secondary",size:"small",className:j("border-token-border-default h-10 w-10 translate-x-[-40%] rounded-full bg-clip-padding",a),onClick:()=>l(-1),children:n.jsx(Or,{className:"icon"})})}),n.jsx("div",{className:j("ms-auto flex h-full w-9 items-center justify-end",i&&s&&"bg-linear-to-l from-(--bg-primary) to-transparent",o.right?"opacity-100":"opacity-0","transition-opacity duration-200"),children:n.jsx(ie,{color:"secondary",size:"small",className:j("border-token-border-default h-10 w-10 translate-x-[40%] rounded-full bg-clip-padding",a),onClick:()=>l(1),children:n.jsx(Xn,{className:"icon"})})})]})}function Tc({contentReference:e,clientThreadId:t,messageId:s,turnIndex:a,analyticsMetadata:o}){const r=e.products,i=e.target_product_count;Jo({clientThreadId:t,messageId:s,products:r});const{showDebugConversationTurns:c}=Ra(),l=jt(t,w=>{const _=mt.getNode(w,s).message.metadata?.content_references?.find(u=>u.type==="products");return e.start_idx===_?.start_idx}),d=de(),h=te(d,"3144771298"),f=te(d,"2212894775"),y=qn(o),x=g.useCallback((w,b)=>y("Search Content Reference Shown","search_content_reference_shown","products",{content_reference_start_index:e.start_idx,product_index:b,product_id:w.id}),[y,e.start_idx]),v=g.useCallback((w,b)=>y("Search Content Reference Clicked","search_content_reference_clicked","products",{content_reference_start_index:e.start_idx,product_index:b,product_id:w.id}),[y,e.start_idx]),{openThreadSidebar:m}=ps(),k=(w,b)=>{t&&(v(w,b),w.offers?m({type:"product",clientThreadId:t,messageId:s,turnIndex:a,contentReferenceStartIndex:e.start_idx,productIndex:b}):window.open(w.url,"_blank"))},{setTargetedContent:C}=zr(),N=(w,b)=>{ct.logEventWithStatsig("Product Targeted Reply Clicked","product_targeted_reply_clicked",{...La(o),content_reference_start_index:e.start_idx,product_index:(b+1).toString(),product_id:w.id}),C({type:"object",label:w.title,createNewCompletionParams:_=>{const u=Da(w.title);return{..._,promptMessage:Br(_.promptMessage,{metadata:{targeted_reply:w.title,targeted_reply_label:w.title,targeted_reply_icon:"product_tag"}}),appendMessages:[..._.appendMessages??[],u]}},onCreateCompletion:({serverThreadId:_,currentLeafId:u})=>{ct.logEventWithStatsig("Targeted Reply Submitted","chatgpt_targeted_reply_submitted",{conversation_id:_,current_leaf_id:u,source_message_id:s,content_reference_start_index:e.start_idx,product_index:(b+1).toString(),product_id:w.id})},onCleared:({serverThreadId:_,currentLeafId:u})=>{ct.logEventWithStatsig("Targeted Reply Cleared","chatgpt_targeted_reply_cleared",{conversation_id:_,current_leaf_id:u,source_message_id:s,content_reference_start_index:e.start_idx,product_index:(b+1).toString(),product_id:w.id})}})};if(e.inline_carousel&&r.length===1){const w=r[0];return n.jsx("div",{className:"flex flex-col",children:n.jsx(Ec,{product:w,showDebug:c,onShown:()=>x(w,0),onClicked:()=>k(w,0)})})}return n.jsxs("div",{className:"flex flex-col",children:[n.jsx(Xo,{items:r,targetItemCount:i,onCardRender:(w,b)=>f?n.jsx(Pc,{product:w,wide:b,showDebug:c}):n.jsx($c,{product:w,wide:b,showDebug:c}),onCardShown:x,onCardClicked:k,onReplyClicked:f?void 0:N,arrowClassName:f?"translate-y-[-80%]":"",allowFullWidth:!0,showGradient:!f,cardClassName:j(f?"group":"transition-all duration-200 border-token-border-default hover:border-light border rounded-xl bg-clip-padding hover:shadow-md overflow-hidden")}),l&&h&&!f&&n.jsxs("div",{className:"text-token-text-tertiary flex text-xs hover:cursor-pointer hover:underline",onClick:()=>window.open("https://help.openai.com/en/articles/11128490","_blank"),children:[n.jsx(P,{id:"4Y5Zn5",defaultMessage:"ChatGPT chooses products independently. Learn more"}),n.jsx(Xn,{className:"icon -ms-0.5"})]})]})}function $c({product:e,wide:t,showDebug:s=!1}){const a=e.image_urls?e.image_urls[0]:void 0,[o,r]=g.useState("contain"),i=g.useRef(null);return n.jsxs("div",{className:j("flex",t?"flex-row":"flex-col"),children:[n.jsxs("div",{className:j("relative aspect-square",t?"w-1/3":"w-full","bg-token-main-surface-secondary dark:bg-token-main-surface-primary-inverse"),children:[a?n.jsx("img",{ref:i,className:`absolute inset-0 m-0 h-full w-full mix-blend-darken object-${o}`,src:a,alt:e.title,onLoad:()=>{if(!i.current)return;const{naturalWidth:c,naturalHeight:l}=i.current,d=c/l;r(Math.abs(d-1)<.25?"cover":"contain")}}):n.jsx("div",{className:"flex aspect-square items-center justify-center",children:n.jsx(St,{className:"text-token-text-tertiary h-12 w-12"})}),e.featured_tag&&n.jsx("div",{className:"absolute start-3 end-3 bottom-3",children:n.jsxs("div",{className:"relative max-w-fit px-2 py-1",children:[n.jsx("div",{className:"absolute inset-0 rounded-full bg-white/60 backdrop-blur-xl"}),n.jsx("div",{className:"relative truncate text-xs font-semibold text-gray-950",children:e.featured_tag})]})})]}),n.jsxs("div",{className:"flex flex-1 flex-col p-4",children:[n.jsx("div",{className:"line-clamp-2 leading-snug font-semibold text-ellipsis",children:e.title}),e.description&&n.jsx("div",{className:"line-clamp-3 pt-3 text-sm text-ellipsis",children:e.description}),n.jsx("div",{className:"flex-1"}),n.jsxs("div",{className:"flex flex-row items-end pt-3",children:[n.jsxs("div",{className:"flex flex-col overflow-hidden",children:[n.jsx("div",{className:"text-md leading-snug font-semibold",children:e.price}),n.jsx("div",{className:"text-token-text-secondary overflow-hidden pt-0.5 text-xs text-ellipsis whitespace-nowrap",children:e.merchants})]}),n.jsx("div",{className:"flex-1"}),e.num_reviews&&e.num_reviews>0&&n.jsxs("div",{className:"text-token-text-secondary flex w-fit flex-row gap-1 text-sm",children:[n.jsx(Wr,{rating:e.rating??0/5}),(e.rating??0).toFixed(1)]})]}),!1]})]})}function Pc({product:e,wide:t,showDebug:s=!1}){const a=e.image_urls?e.image_urls[0]:void 0,[o,r]=g.useState("contain"),i=g.useRef(null);return n.jsxs("div",{className:j("flex pb-2",t?"flex-row gap-3":"flex-col gap-2"),children:[n.jsx("div",{className:j("relative",t?"aspect-square w-1/4":"aspect-[13/16] w-full","bg-token-bg-tertiary dark:bg-token-text-inverted overflow-clip rounded-xl"),children:n.jsx(uo,{className:"mix-blend-darken",children:a?n.jsx("img",{ref:i,className:`absolute inset-0 m-0 h-full w-full object-${o}`,src:a,alt:e.title,onLoad:()=>{if(!i.current)return;const{naturalWidth:c,naturalHeight:l}=i.current,d=c/l;r(Math.abs(d-1)<.6?"cover":"contain")}}):n.jsx("div",{className:"flex aspect-square items-center justify-center",children:n.jsx(St,{className:"text-token-text-tertiary h-12 w-12"})})})}),n.jsxs("div",{className:"flex flex-col gap-1 px-1",children:[n.jsx("div",{className:j("tfont-medium line-clamp-2 text-ellipsis",t?"text-base":"text-sm"),children:e.title}),n.jsxs("div",{className:"text-token-text-secondary flex flex-row gap-0.25 text-xs",children:[n.jsx("div",{children:e.price}),n.jsx("div",{className:"mx-1",children:"•"}),n.jsx("div",{className:"truncate",children:e.merchants})]}),!1]})]})}function Mc({className:e,imageUrl:t,productTitle:s,onClicked:a}){const[o,r]=g.useState("contain"),i=g.useRef(null);return n.jsx("div",{className:j(e,"hover:scale-[1.005]","dark:bg-token-text-inverted bg-token-bg-primary","cursor-pointer overflow-hidden rounded-xl shadow-inner transition-all duration-200","relative aspect-square max-h-60"),onClick:a,children:t?n.jsx("img",{ref:i,className:`m-0 h-full w-full overflow-hidden object-${o} mix-blend-darken`,src:t,alt:s,onLoad:()=>{if(!i.current)return;const{naturalWidth:c,naturalHeight:l}=i.current,d=c/l;r(Math.abs(d-1)<.5?"cover":"contain")}}):n.jsx("div",{className:"flex aspect-square items-center justify-center",children:n.jsx(St,{className:"text-token-text-tertiary h-12 w-12"})})})}function Ec({product:e,showDebug:t=!1,onShown:s,onClicked:a}){return g.useEffect(()=>{s()},[s]),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"flex flex-row gap-2 py-2",children:e.image_urls&&e.image_urls.length>0&&e.image_urls.slice(0,3).map(o=>n.jsx(Mc,{imageUrl:o,productTitle:e.title,onClicked:a},o))}),!1]})}function Ac({attribution:e,wordFadeType:t}){const s=g.useContext(ee),a=Ur(s?.message.id,e.attributable_index),o=Hr();return n.jsx(Lc,{isHighlighted:a,isDebugMode:o&&!1,content:e.alt??"",attributableIndex:e.attributable_index,attributions:void 0,attributionsDebug:void 0,wordFadeType:t})}const Ic=g.memo(bs);function Rc({content:e,isHighlighted:t,isDebugMode:s,attributableIndex:a,attributions:o,attributionsDebug:r,wordFadeType:i}){const c=i==="indexed",l=Gn(),d=g.useMemo(()=>c?{handlers:{text:(y,x,v)=>{const m=[];for(const k of l(x.value))m.push({type:"element",tagName:"span",properties:{className:Zn.fadeIn},children:[{type:"text",value:k}]});return m}}}:void 0,[c,l]),h=g.useMemo(()=>({p:({children:y})=>n.jsx(n.Fragment,{children:y})}),[]),f=n.jsx(Ic,{rehypePlugins:lo,remarkPlugins:io,urlTransform:ao,remarkRehypeOptions:d,components:h,children:e});return n.jsx(Dc,{isHighlighted:t,children:f})}const Lc=fr.memo(Rc);function Dc({isHighlighted:e,className:t,children:s}){return n.jsx("span",{className:j("relative","-mx-px my-[-0.2rem] rounded px-px py-[0.2rem]",e&&"bg-[#FCECC1] dark:bg-[#64572A]","transition-colors duration-100 ease-in-out",t),children:s})}function jn(e,t){try{return BigInt(e).toLocaleString(t)}catch{const s=Number(e);return e.includes("e")||e.includes("E")?s.toExponential():s.toLocaleString(t,{maximumFractionDigits:6})}}function Fc({data:e,trackContentReferenceEvent:t}){g.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type)},[t,e.type]);const s=Fa().locale;return e.expression&&e.result!=null?n.jsxs("div",{className:"no-scrollbar overflow-auto sm:overflow-hidden",children:[n.jsxs("div",{className:"pb-1 text-lg font-semibold",children:[e.prefix&&n.jsx("span",{children:e.prefix}),n.jsx("span",{children:jn(e.result,s)}),e.suffix&&n.jsx("span",{children:e.suffix})]}),n.jsx("div",{className:"text-token-text-primary tracking-wide",children:`${e.expression}=${jn(e.result,s)}`})]}):null}function qo({ref:e,onClick:t,onMouseEnter:s,onMouseLeave:a}){const o=D();return n.jsx("button",{ref:e,"aria-label":o.formatMessage({id:"citation.icon.label",defaultMessage:"Coding Citation"}),onClick:t,onMouseEnter:s,onMouseLeave:a,className:j("rounded-xl px-1","bg-token-interactive-bg-tertiary-press text-token-text-secondary hover:text-token-text-inverted hover:bg-token-interactive-bg-primary-selected"),children:n.jsx(Vr,{className:"icon-sm"})})}function Oc({codeMessage:e,codeExecutionOutputMessage:t,onDismiss:s,FormattedText:a}){const o=D();return n.jsx(Ie.Root,{isOpen:!0,onClose:s,testId:"modal-code-execution",children:n.jsx(Ie.Overlay,{children:n.jsxs(Ie.Content,{className:"flex max-h-[75vh] max-w-lg flex-col overflow-hidden",children:[n.jsx(Ie.Header,{title:o.formatMessage(zc.title),type:"success",closeButton:n.jsx(Oa,{onClick:s})}),n.jsxs("div",{className:"flex flex-1 flex-col overflow-auto",children:[n.jsx("div",{children:n.jsx(Jr,{FormattedText:a,message:e,codeRendererClassName:"border-none rounded-none",removeTopBorderRadius:!0})}),n.jsx("div",{children:n.jsx(Xr,{message:t})})]})]})})})}const zc=ls({title:{id:"CodeExecutionOutputModal.title",defaultMessage:"Analysis"}});function Bc({displayInfo:e,FormattedText:t,trackContentReferenceEvent:s}){const[a,o]=g.useState(!1),r=D();return g.useEffect(()=>{s("Search Content Reference Shown","search_content_reference_shown",e.type)},[s,e.type]),n.jsxs(n.Fragment,{children:[n.jsx($t,{label:r.formatMessage(Wc.viewAnalysis),side:"top",delayDuration:150,className:"align-middle",children:n.jsx(qo,{onClick:()=>o(!0)})}),a&&n.jsx(Oc,{FormattedText:t,codeMessage:e.codeMessage,codeExecutionOutputMessage:e.codeExecutionOutputMessage,onDismiss:()=>o(!1)})]})}const Wc=ls({viewAnalysis:{id:"viewAnalysis",defaultMessage:"View analysis"}});function Uc({contentReference:e,clientThreadId:t,turnIndex:s}){const{toggleThreadSidebar:a}=ps(),o=qr("codingCitations"),[r,i]=g.useState(!1),c=g.useRef(null),l=()=>{c.current!=null&&window.clearTimeout(c.current),i(!0)},d=()=>{c.current=window.setTimeout(()=>i(!1),100)},h=g.useCallback(()=>{t&&a({type:"codingCitations",clientThreadId:t,turnIndex:s||1,messageId:e.cited_message?.id??"",matchedText:e.matched_text},o)},[a,t,o,e,s]);if(!e.cited_message||!e.highlighted_text)return null;let f;e.type==="python"?f=e.cited_message?.metadata?.aggregate_result?.code:e.type==="container"&&(f=e.cited_message?.metadata?.container_citation?.source_cmd);const y=f?.split(`
`).length??0;return n.jsx("span",{className:"relative top-[0.1rem] inline-block align-middle",children:n.jsx("span",{className:"inline-flex items-center",children:n.jsxs(ds,{open:r,onOpenChange:i,children:[n.jsx(us,{asChild:!0,children:n.jsx(qo,{onClick:h,onMouseEnter:l,onMouseLeave:d})}),n.jsx(fs,{children:n.jsx(ms,{align:"start",sideOffset:4,onMouseEnter:l,onMouseLeave:d,className:j("border-default bg-token-bg-primary rounded-2xl border p-3"),children:n.jsxs("aside",{className:"flex flex-col gap-3",children:[n.jsx("h2",{className:j("text-token-text-secondary text-xs font-medium"),children:e.type==="python"?n.jsx(P,{id:"citation.popover.label.python",defaultMessage:"Python script · {count, number} lines",values:{count:y}}):n.jsx(P,{id:"citation.popover.label.container",defaultMessage:"Bash script · {count, number} lines",values:{count:y}})}),n.jsx("hr",{}),n.jsx("h2",{className:j("text-sm font-medium","max-w-full break-words whitespace-pre-line sm:max-w-[300px]"),children:e.highlighted_text})]})})})]})})})}function Hc({iconRef:e,className:t,alt:s}){const a=e?.vector_url??e?.raster_url;return a?n.jsx("img",{src:a,className:t,alt:s}):n.jsx(Kn,{className:t})}function Go(e,t,s,a){const o=te(s,"3958255976"),r=Gr(e.cloud_doc_url??""),i=(o?e.fff_metadata?.name:void 0)??e.name,c=(o?e.fff_metadata?.display_file_type_name:void 0)??r?.type??a.formatMessage({id:"bqY3sN",defaultMessage:"File"}),l=(o&&e.fff_metadata?.display_file_type_icon?n.jsx(Hc,{alt:c,className:t,iconRef:e.fff_metadata?.display_file_type_icon}):void 0)??(r?.Icon?n.jsx(r.Icon,{alt:c,className:t}):e.cloud_doc_url?n.jsx(Yn,{alt:c,className:t}):void 0)??n.jsx(Kn,{alt:c,className:t}),d=(o?e.fff_metadata?.capabilities?.user_view:void 0)??e.cloud_doc_url;let h;o&&e.fff_metadata?.snippet&&e.fff_metadata?.snippet.content.content_type==="text"?h=e.fff_metadata.snippet.content.text:h=e.description;const f=(o?e.fff_metadata?.file_last_modified_time:void 0)??e.last_modified_time,y=o?e.fff_metadata?.file_created_time:void 0;return{fileName:i,fileTypeDisplayName:c,fileTypeIcon:l,url:d,snippet:h,fileLastModifiedTime:f,fileCreatedTime:y}}const Nn=24;function Vc(e){const t=e.split(".");let s=e;return t.length>1&&t.slice(0,-1).some(a=>a.length>0)&&(s=t.slice(0,-1).join(".")),s.length>Nn&&(s=s.slice(0,Nn-1)+"…"),s}function Jc({fileRef:e,index:t,trackContentReferenceEvent:s}){const a=za(),o=g.useContext(ee),r=g.useMemo(()=>({source:e.source,index:t}),[e.source,t]);g.useEffect(()=>{s("File Citation Shown","file_citation_shown","file",r)},[]);const i=g.useCallback(f=>{f?s("File Citation Hovered","file_citation_hovered","file",r):s("File Citation Unhovered","file_citation_unhovered","file",r)},[r,s]),c=g.useCallback(()=>{s("File Citation Clicked","file_citation_clicked","file",r)},[r,s]),l=g.useCallback(()=>{s("File Citation Followup Clicked","file_citation_followup_clicked","file",r)},[r,s]),d=g.useCallback(()=>a(e.id,e.name),[a,e.id,e.name]),h=jt(o?.analyticsMetadata.clientThreadId??so,f=>f?.mode);return Zr(h)?h.gizmo_id&&Ba(h.gizmo_id)?n.jsx("span",{className:j(Ri,"ms-1"),title:e.name,children:Vc(e.name)}):null:n.jsx(Xc,{fileItem:e,onClickDownloadFile:d,trackCloudLinkClick:c,trackFileCitationFollowup:l,trackTooltipOpenChange:i})}function Xc({className:e,fileItem:t,onClickDownloadFile:s,trackCloudLinkClick:a,trackFileCitationFollowup:o,trackTooltipOpenChange:r}){const i=D(),c=de(),{fileName:l,fileTypeDisplayName:d,fileTypeIcon:h,url:f,snippet:y}=Go(t,"h-[16px] w-[16px] object-contain",c,i),x=j("ms-1 flex h-[22px] items-center rounded-xl px-2 relative bottom-[-2px]","bg-[#f4f4f4] text-token-text-secondary! hover:bg-token-bg-secondary dark:bg-token-main-surface-secondary dark:hover:bg-token-bg-secondary",e),v=n.jsx("span",{className:"relative inline-flex items-center",children:f?n.jsx(ue,{href:f,className:x,onClick:a,children:h}):Yr(t.id)?n.jsx("button",{onClick:s,className:x,children:h}):n.jsx("span",{className:x,children:n.jsx(Yn,{})})});return n.jsx(qc,{contentType:d,fileId:t.id,href:f,icon:h,name:l,snippet:y,trackFileCitationFollowup:o,trackTooltipOpenChange:r,children:v})}function qc({children:e,className:t,contentType:s,fileId:a,href:o,icon:r,name:i,snippet:c,trackFileCitationFollowup:l,trackTooltipOpenChange:d}){const h=Mt(),y=g.useContext(ee)?.clientThreadId??so,x=cs(),v=de(),m=te(v,"733205176"),k=Ai(y,a,i,o),C=g.useCallback((N,w)=>{w.length&&(k(N,w),l?.())},[k,l]);return n.jsx($t,{label:n.jsxs(n.Fragment,{children:[n.jsxs(ue,{href:o,className:j("text-token-text-primary flex max-w-80 flex-col gap-1 text-start text-xs font-normal no-underline!",t),children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx("div",{className:"h-4 w-4 shrink-0 overflow-hidden rounded-full",children:r}),n.jsx("div",{className:"text-token-text-primary truncate",children:s})]}),n.jsx("div",{className:"line-clamp-2 text-sm font-medium break-all",children:i}),c&&n.jsx("div",{className:"text-token-text-secondary line-clamp-2 text-sm",children:c})]}),x||m?null:n.jsx("div",{className:"flex w-full cursor-pointer flex-row items-center gap-2 pt-3 text-sm",children:n.jsx(Ii,{sendReply:C})})]}),align:"start",cornerRadius:"xl",customBorderClassName:"border-token-border-default border",customPaddingClassName:"p-3",delayDuration:150,interactive:!0,onOpenChange:d,side:"bottom",theme:h?"default":"white",wide:!0,children:e})}function Gc(e,t){return new Date(e).toLocaleDateString(t,{month:"long",day:"numeric",year:"numeric"})}function Zc({metadata:e,trackContentReferenceEvent:t}){return e.items.length===0?null:n.jsx("div",{className:"mt-6 flex flex-col gap-3",children:e.items.map((s,a)=>n.jsx(Yc,{item:s,index:a,trackContentReferenceEvent:t},a))})}function Yc({item:e,index:t,trackContentReferenceEvent:s}){const a=D(),o=de(),{fileName:r,fileTypeDisplayName:i,fileTypeIcon:c,snippet:l,url:d,fileLastModifiedTime:h}=Go(e,"icon object-contain",o,a),f={title:r,description:l?.toString()??"",index:t};return g.useEffect(()=>{s("Contextual Answers Content Reference Shown","contextual_answers_content_reference_shown","file_navlist",f)},[]),n.jsxs(ue,{className:"group/nav-list relative flex items-center gap-6 py-1.5",href:d??"/",onClick:()=>{s("Contextual Answers Content Reference Clicked","contextual_answers_content_reference_clicked","file_navlist",f)},children:[n.jsx("div",{className:"absolute start-0 top-0 bottom-0 w-[3px] rounded-t-lg rounded-b-lg bg-black/10"}),n.jsxs("div",{className:"ms-4 flex grow flex-col gap-1 overflow-hidden text-ellipsis",children:[n.jsxs("div",{className:"not-prose text-token-text-primary flex items-center gap-1.5 text-sm",children:[c,n.jsx("div",{className:"text-token-text-primary line-clamp-2 text-sm",children:i})]}),n.jsx("div",{className:"text-token-link decoration-token-link line-clamp-2 font-semibold group-hover/nav-list:underline",children:r}),n.jsx("div",{className:"text-token-text-primary line-clamp-2 text-sm leading-snug font-normal",children:l}),h&&n.jsx("div",{className:"text-token-text-secondary text-sm",children:Gc(h,a.locale)})]})]})}var Kt={line:{color:"#F66",width:1,dashPattern:[]},sync:{enabled:!0,group:1,suppressTooltips:!1},zoom:{enabled:!0,zoomboxBackgroundColor:"rgba(66,133,244,0.2)",zoomboxBorderColor:"#48F",zoomButtonText:"Reset Zoom",zoomButtonClass:"reset-zoom"},snap:{enabled:!1},callbacks:{beforeZoom:function(e,t){return!0},afterZoom:function(e,t){}}},Kc={id:"crosshair",afterInit:function(e){if(e.config.options.scales.x){var t=e.config.options.scales.x.type;if(!(t!=="linear"&&t!=="time"&&t!=="category"&&t!=="logarithmic")){e.options.plugins.crosshair===void 0&&(e.options.plugins.crosshair=Kt),e.crosshair={enabled:!1,suppressUpdate:!1,x:null,originalData:[],originalXRange:{},dragStarted:!1,dragStartX:null,dragEndX:null,suppressTooltips:!1,ignoreNextEvents:0,reset:function(){this.resetZoom(e,!1,!1)}.bind(this)};var s=this.getOption(e,"sync","enabled");s&&(e.crosshair.syncEventHandler=function(a){this.handleSyncEvent(e,a)}.bind(this),e.crosshair.resetZoomEventHandler=function(a){var o=this.getOption(e,"sync","group");a.chartId!==e.id&&a.syncGroup===o&&this.resetZoom(e,!0)}.bind(this),window.addEventListener("sync-event",e.crosshair.syncEventHandler),window.addEventListener("reset-zoom-event",e.crosshair.resetZoomEventHandler)),e.panZoom=this.panZoom.bind(this,e)}}},afterDestroy:function(e){var t=this.getOption(e,"sync","enabled");t&&(window.removeEventListener("sync-event",e.crosshair.syncEventHandler),window.removeEventListener("reset-zoom-event",e.crosshair.resetZoomEventHandler))},panZoom:function(e,t){if(e.crosshair.originalData.length!==0){var s=e.crosshair.end-e.crosshair.start,a=e.crosshair.min,o=e.crosshair.max;t<0?(e.crosshair.start=Math.max(e.crosshair.start+t,a),e.crosshair.end=e.crosshair.start===a?a+s:e.crosshair.end+t):(e.crosshair.end=Math.min(e.crosshair.end+t,e.crosshair.max),e.crosshair.start=e.crosshair.end===o?o-s:e.crosshair.start+t),this.doZoom(e,e.crosshair.start,e.crosshair.end)}},getOption:function(e,t,s){return Ls(e.options.plugins.crosshair[t]?e.options.plugins.crosshair[t][s]:void 0,Kt[t][s])},getXScale:function(e){return e.data.datasets.length?e.scales[e.getDatasetMeta(0).xAxisID]:null},getYScale:function(e){return e.scales[e.getDatasetMeta(0).yAxisID]},handleSyncEvent:function(e,t){var s=this.getOption(e,"sync","group");if(t.chartId!==e.id&&t.syncGroup===s){var a=this.getXScale(e);if(a){var o=t.original.native.buttons===void 0?t.original.native.which:t.original.native.buttons;t.original.type==="mouseup"&&(o=0);var r={type:t.original.type=="click"?"mousemove":t.original.type,chart:e,x:a.getPixelForValue(t.xValue),y:t.original.y,native:{buttons:o},stop:!0};e._eventHandler(r)}}},afterEvent:function(e,t){if(e.config.options.scales.x.length==0)return;let s=t.event;var a=e.config.options.scales.x.type;if(!(a!=="linear"&&a!=="time"&&a!=="category"&&xscaleType!=="logarithmic")){var o=this.getXScale(e);if(o){if(e.crosshair.ignoreNextEvents>0){e.crosshair.ignoreNextEvents-=1;return}var r=s.native.buttons===void 0?s.native.which:s.native.buttons;s.native.type==="mouseup"&&(r=0);var i=this.getOption(e,"sync","enabled"),c=this.getOption(e,"sync","group");if(!s.stop&&i){var t=new CustomEvent("sync-event");t.chartId=e.id,t.syncGroup=c,t.original=s,t.xValue=o.getValueForPixel(s.x),window.dispatchEvent(t)}var l=this.getOption(e,"sync","suppressTooltips");if(e.crosshair.suppressTooltips=s.stop&&l,e.crosshair.enabled=s.type!=="mouseout"&&s.x>o.getPixelForValue(o.min)&&s.x<o.getPixelForValue(o.max),!e.crosshair.enabled&&!e.crosshair.suppressUpdate)return s.x>o.getPixelForValue(o.max)&&(e.crosshair.suppressUpdate=!0,e.update("none")),e.crosshair.dragStarted=!1,!1;e.crosshair.suppressUpdate=!1;var d=this.getOption(e,"zoom","enabled");if(r===1&&!e.crosshair.dragStarted&&d&&(e.crosshair.dragStartX=s.x,e.crosshair.dragStarted=!0),e.crosshair.dragStarted&&r===0){e.crosshair.dragStarted=!1;var h=o.getValueForPixel(e.crosshair.dragStartX),f=o.getValueForPixel(e.crosshair.x);Math.abs(e.crosshair.dragStartX-e.crosshair.x)>1&&this.doZoom(e,h,f),e.update("none")}e.crosshair.x=s.x,e.draw()}}},afterDraw:function(e){if(e.crosshair.enabled)return e.crosshair.dragStarted?this.drawZoombox(e):(this.drawTraceLine(e),this.interpolateValues(e),this.drawTracePoints(e)),!0},beforeTooltipDraw:function(e){return!e.crosshair.dragStarted&&!e.crosshair.suppressTooltips},resetZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(s){if(e.crosshair.originalData.length>0)for(var a=0;a<e.data.datasets.length;a++){var o=e.data.datasets[a];o.data=e.crosshair.originalData.shift(0)}e.crosshair.originalXRange.min?(e.options.scales.x.min=e.crosshair.originalXRange.min,e.crosshair.originalXRange.min=null):delete e.options.scales.x.min,e.crosshair.originalXRange.max?(e.options.scales.x.max=e.crosshair.originalXRange.max,e.crosshair.originalXRange.max=null):delete e.options.scales.x.max}e.crosshair.button&&e.crosshair.button.parentNode&&(e.crosshair.button.parentNode.removeChild(e.crosshair.button),e.crosshair.button=!1);var r=this.getOption(e,"sync","enabled");if(!t&&s&&r){var i=this.getOption(e,"sync","group"),c=new CustomEvent("reset-zoom-event");c.chartId=e.id,c.syncGroup=i,window.dispatchEvent(c)}s&&e.update("none")},doZoom:function(e,t,s){if(t>s){var a=t;t=s,s=a}var o=Ls(e.options.plugins.crosshair.callbacks?e.options.plugins.crosshair.callbacks.beforeZoom:void 0,Kt.callbacks.beforeZoom);if(!o(t,s))return!1;if(e.crosshair.dragStarted=!1,e.options.scales.x.min&&e.crosshair.originalData.length===0&&(e.crosshair.originalXRange.min=e.options.scales.x.min),e.options.scales.x.max&&e.crosshair.originalData.length===0&&(e.crosshair.originalXRange.max=e.options.scales.x.max),!e.crosshair.button){var r=document.createElement("button"),i=this.getOption(e,"zoom","zoomButtonText"),c=this.getOption(e,"zoom","zoomButtonClass"),l=document.createTextNode(i);r.appendChild(l),r.className=c,r.addEventListener("click",function(){this.resetZoom(e)}.bind(this)),e.canvas.parentNode.appendChild(r),e.crosshair.button=r}e.options.scales.x.min=t,e.options.scales.x.max=s;var d=e.crosshair.originalData.length===0,h=e.config.options.scales.x.type!=="category";if(h)for(var f=0;f<e.data.datasets.length;f++){var y=[],x=0,v=!1,m=!1;d&&(e.crosshair.originalData[f]=e.data.datasets[f].data);for(var k=e.crosshair.originalData[f],C=0;C<k.length;C++){var N=k[C],w=N.x!==void 0?N.x:NaN;w>=t&&!v&&x>0&&(y.push(k[x-1]),v=!0),w>=t&&w<=s&&y.push(N),w>s&&!m&&x<k.length&&(y.push(N),m=!0),x+=1}e.data.datasets[f].data=y}if(e.crosshair.start=t,e.crosshair.end=s,d){var b=this.getXScale(e);e.crosshair.min=b.min,e.crosshair.max=b.max}e.crosshair.ignoreNextEvents=2,e.update("none");var _=this.getOption(e,"callbacks","afterZoom");_(t,s)},drawZoombox:function(e){var t=this.getYScale(e),s=this.getOption(e,"zoom","zoomboxBorderColor"),a=this.getOption(e,"zoom","zoomboxBackgroundColor");e.ctx.beginPath(),e.ctx.rect(e.crosshair.dragStartX,t.getPixelForValue(t.max),e.crosshair.x-e.crosshair.dragStartX,t.getPixelForValue(t.min)-t.getPixelForValue(t.max)),e.ctx.lineWidth=1,e.ctx.strokeStyle=s,e.ctx.fillStyle=a,e.ctx.fill(),e.ctx.fillStyle="",e.ctx.stroke(),e.ctx.closePath()},drawTraceLine:function(e){var t=this.getYScale(e),s=this.getOption(e,"line","width"),a=this.getOption(e,"line","color"),o=this.getOption(e,"line","dashPattern"),r=this.getOption(e,"snap","enabled"),i=e.crosshair.x;r&&e._active.length&&(i=e._active[0].element.x),e.ctx.beginPath(),e.ctx.setLineDash(o),e.ctx.moveTo(i,t.getPixelForValue(t.max)),e.ctx.lineWidth=s,e.ctx.strokeStyle=a,e.ctx.lineTo(i,t.getPixelForValue(t.min)),e.ctx.stroke(),e.ctx.setLineDash([])},drawTracePoints:function(e){for(var t=0;t<e.data.datasets.length;t++){var s=e.data.datasets[t],a=e.getDatasetMeta(t),o=e.scales[a.yAxisID];a.hidden||!s.interpolate||(e.ctx.beginPath(),e.ctx.arc(e.crosshair.x,o.getPixelForValue(s.interpolatedValue),3,0,2*Math.PI,!1),e.ctx.fillStyle="white",e.ctx.lineWidth=2,e.ctx.strokeStyle=s.borderColor,e.ctx.fill(),e.ctx.stroke())}},interpolateValues:function(e){for(var t=0;t<e.data.datasets.length;t++){var s=e.data.datasets[t],a=e.getDatasetMeta(t),o=e.scales[a.xAxisID],r=o.getValueForPixel(e.crosshair.x);if(!(a.hidden||!s.interpolate)){var i=s.data,c=i.findIndex(function(f){return f.x>=r}),l=i[c-1],d=i[c];if(e.data.datasets[t].steppedLine&&l)s.interpolatedValue=l.y;else if(l&&d){var h=(d.y-l.y)/(d.x-l.x);s.interpolatedValue=l.y+(r-l.x)*h}else s.interpolatedValue=NaN}}}};const yt=(e=1)=>`rgba(48, 166, 51, ${e})`,vt=(e=1)=>`rgba(241, 77, 66, ${e})`,Tn="text-[#30a633]",$n="text-[#f14d42]",Qc=["1d","5d","1m","6m","ytd","1y","5y","max"];function ed({histories:e,selectedInterval:t,onSelectHistoryInterval:s}){const a=Object.keys(e?.quotes??{});return n.jsx("div",{className:"text-token-text-tertiary inline-flex items-start justify-between rounded-[10px] bg-[#f4f4f4] p-[3px] text-xs font-semibold sm:justify-start sm:gap-1 dark:bg-[#393939]",children:a.map(o=>n.jsx("button",{onClick:()=>{s?.(o)},className:j("border border-transparent px-3 py-1.5 text-xs font-semibold uppercase",t===o?"border-token-border-default! bg-token-main-surface-primary text-token-text-primary shadow-xxs dark:border-token-border-medium! rounded-lg":"hover:text-token-text-secondary"),children:Zo[o].label},o))})}const Zo={"1d":{label:"1D",formatTimestampLabel:Pn,formatTimestampTooltip:Pn,maxTicksLimit:6,lineTension:.1},"5d":{label:"5D",formatTimestampLabel:Mn,formatTimestampTooltip:sd,maxTicksLimit:6,lineTension:.1},"1m":{label:"1M",formatTimestampLabel:Mn,formatTimestampTooltip:nd,maxTicksLimit:6,lineTension:.1,useUtc:!0},"6m":{label:"6M",formatTimestampLabel:Qt,formatTimestampTooltip:Oe,maxTicksLimit:5,lineTension:.1,useUtc:!0},ytd:{label:"YTD",formatTimestampLabel:Qt,formatTimestampTooltip:Oe,maxTicksLimit:5,lineTension:.1,useUtc:!0},"1y":{label:"1Y",formatTimestampLabel:Qt,formatTimestampTooltip:Oe,maxTicksLimit:5,lineTension:.2,useUtc:!0},"5y":{label:"5Y",formatTimestampLabel:En,formatTimestampTooltip:Oe,maxTicksLimit:5,lineTension:.2,useUtc:!0},max:{label:"max",formatTimestampLabel:En,formatTimestampTooltip:Oe,maxTicksLimit:5,lineTension:.2,useUtc:!0}};function td(e){return e?Qc.filter(s=>s in e.quotes).find(s=>e.quotes[s].length>0):void 0}function be(e,t){return We(new Date(e*1e3),t??"America/New_York")}function Pn(e,t,s){const a=be(t,s);return e.formatTime(a,{hour:"numeric",minute:"numeric"})}function sd(e,t,s){const a=be(t,s);return e.formatDate(a,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}function Oe(e,t,s){const a=be(t,s);return e.formatDate(a,{month:"short",day:"numeric",year:"numeric"})}function Qt(e,t,s){const a=be(t,s);return e.formatDate(a,{month:"short",year:"numeric"})}function Mn(e,t,s){const a=be(t,s);return e.formatDate(a,{month:"short",day:"numeric"})}function nd(e,t,s){const a=be(t,s);return e.formatDate(a,{weekday:"short",month:"short",day:"numeric"})}function En(e,t,s){const a=be(t,s);return e.formatDate(a,{year:"numeric"})}Li.register(Di,Fi,Oi,zi,Bi,Wi,Ui,Hi,Vi,Kc,Ji);const od=100,An={color:"#b4b4b4",font:{size:10,weight:"600",family:"Menlo"}};function rd({isUp:e,histories:t,selectedInterval:s,setHighlightedPrice:a,latestTradingPeriod:o,timezone:r}){return n.jsx(n.Fragment,{children:t&&s&&o?n.jsx(ad,{isUp:e,histories:t,selectedInterval:s,latestTradingPeriod:o,timezone:r,setHighlightedPrice:a}):n.jsx(ze,{className:"h-full",index:1,width:100})})}function ad({isUp:e,histories:t,selectedInterval:s,latestTradingPeriod:a,timezone:o,setHighlightedPrice:r}){const[i,c]=g.useState(null),[l,d]=g.useState(!1),h=s==="1d",f=g.useMemo(()=>{let b=t.quotes[s].filter(_=>_.close>=0);if(h&&a){const _=a.regular.start_timestamp,u=a.regular.end_timestamp;if(b=b.filter($=>$.timestamp>=_&&$.timestamp<=u),b.length===0||b[b.length-1].timestamp<u){let A=b.length>0?b[b.length-1].timestamp:_-600;for(;A<u;)A+=600,b.push({timestamp:A,close:null})}}return b},[t,s,h,a]),y=Zo[s],{formatTimestampTooltip:x,maxTicksLimit:v,useUtc:m=!1}=y,k=D(),C=no(),N=Mt(),w=g.useMemo(()=>{const{formatTimestampLabel:b,lineTension:_}=y;return{labels:f.map(u=>b(k,u.timestamp,m?"UTC":o)),datasets:[{data:f.map(u=>u.close),borderColor:e?yt():vt(),pointRadius:0,pointHoverRadius:4,pointStyle:"circle",pointBackgroundColor:e?yt():vt(),pointHoverBorderWidth:2,pointHoverBorderColor:"rgba(255, 255, 255, 1)",backgroundColor:function(u){const{ctx:$,chartArea:A}=u.chart;if(A)return ld($,A,e)},fill:!0,borderWidth:2,lineTension:_??.4}]}},[y,f,e,m,o,k]);return n.jsx("div",{className:"flex h-full flex-col gap-6",children:n.jsxs("div",{className:"relative h-full",onMouseEnter:()=>d(!0),onMouseLeave:()=>{d(!1),r(null)},children:[n.jsx(Xi,{options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},hover:{mode:l?"index":"point"},animation:!1,scales:{x:{afterBuildTicks:b=>{if(b.ticks.length>v)if(h)b.ticks=b.ticks.filter((_,u)=>f[u].timestamp%(C?3600:7200)===0);else{const _=Math.ceil(b.ticks.length/(v-1));b.ticks=b.ticks.filter((u,$)=>$>0&&($%_===0||$===b.ticks.length-1))}},grid:{display:!1},ticks:{...An,align:"end"}},y:{ticks:{...An,maxTicksLimit:7},border:{display:!1},grid:{color:N?"rgba(255, 255, 255, 0.1)":"rgba(229, 229, 229, 0.5)"}}},plugins:{datalabels:{display:!1},legend:{display:!1},tooltip:{enabled:!1,animation:!1,displayColors:!1,callbacks:{title:function(b){const _=b[0];if(!_)return"";const u=f[_.dataIndex]?.timestamp;return u?x(k,u,m?"UTC":o):""}},external:({tooltip:b})=>{l&&b.opacity>0&&r(Ve(b.dataPoints?.[0]?.parsed?.y??0)),c(_=>{const u=b.chart.width,$=b.caretX>u-od;return!_||_.x!==b.caretX||_.y!==b.caretY||_.opacity!==b.opacity||_.flip!==$?{..._,x:b.caretX,y:b.caretY,dateLabel:b.title?.[0],value:Ve(b.dataPoints?.[0]?.parsed?.y??0),opacity:b.opacity,flip:$}:_})}},dropShadow:!1,crosshair:{line:{color:N?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)",width:.5},zoom:{enabled:!1}}}},data:w}),n.jsx(id,{tooltipData:i})]})})}function id({tooltipData:e}){return!e||!e.opacity?null:n.jsx("div",{style:{left:e.x-5,top:10,transform:"translate(-50%, -50%)"},className:j("text-token-main-surface-primary dark:bg-token-main-surface-secondary pointer-events-none absolute translate-y-[-100%] rounded-lg bg-black px-2 py-1 font-mono font-semibold whitespace-nowrap dark:text-white"),children:n.jsx("div",{className:"text-xs",children:e.dateLabel})})}function ld(e,t,s){const a=e.createLinearGradient(0,t.top,0,t.bottom);return a.addColorStop(0,s?yt(.4):vt(.4)),a.addColorStop(1,s?yt(0):vt(0)),a}function Ve(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function Y({label:e,value:t,className:s}){return n.jsxs("div",{className:j("flex w-full flex-1 flex-row justify-between text-sm",s),children:[n.jsx("span",{className:"text-token-text-secondary font-normal whitespace-nowrap",children:e}),n.jsx("span",{className:"text-token-text-primary font-normal whitespace-nowrap",children:t})]})}function cd({metrics:e}){const t=D(),s=!!(e.marketCap&&e.peRatio&&e.eps);return n.jsx("div",{className:"border-token-border-default flex flex-col gap-1 rounded-b-lg border-t bg-[#f4f4f4] px-4 py-3 dark:bg-[#393939]",children:n.jsxs("div",{className:j("grid grid-cols-2 gap-x-10 gap-y-3 lg:grid-cols-3 lg:gap-x-6"),children:[n.jsx(Y,{label:t.formatMessage({id:"MDHEj7",defaultMessage:"Open"}),value:t.formatNumber(e.openPrice,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),className:"order-1"}),n.jsx(Y,{label:t.formatMessage({id:"PboNMC",defaultMessage:"Volume"}),value:t.formatNumber(e.intradayVolume,{notation:"compact",maximumFractionDigits:1}),className:j("order-2",!s&&"lg:order-last")}),n.jsxs("div",{className:"order-4 row-span-2 flex flex-col gap-3",children:[n.jsx(Y,{label:t.formatMessage({id:"bresUW",defaultMessage:"Day Low"}),value:t.formatNumber(e.intradayLow,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),n.jsx(Y,{label:t.formatMessage({id:"oWyv5V",defaultMessage:"Day High"}),value:t.formatNumber(e.intradayHigh,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})]}),n.jsxs("div",{className:"order-5 row-span-2 flex flex-col gap-3",children:[n.jsx(Y,{label:t.formatMessage({id:"DcEYIK",defaultMessage:"Year Low"}),value:t.formatNumber(e.fiftyTwoWeekLow,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})}),n.jsx(Y,{label:t.formatMessage({id:"ZfFtJ4",defaultMessage:"Year High"}),value:t.formatNumber(e.fiftyTwoWeekHigh,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2})})]}),e.marketCap&&n.jsx(Y,{label:t.formatMessage({id:"BzyP4Y",defaultMessage:"Market Cap"}),value:t.formatNumber(e.marketCap,{notation:"compact",maximumFractionDigits:2}),className:"order-last lg:order-3"}),e.peRatio&&e.eps&&n.jsxs(n.Fragment,{children:[n.jsx(Y,{label:t.formatMessage({id:"edGd+S",defaultMessage:"EPS (TTM)"}),value:t.formatNumber(e.eps,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),className:"order-last"}),n.jsx(Y,{label:t.formatMessage({id:"AhpCu1",defaultMessage:"P/E Ratio"}),value:t.formatNumber(e.peRatio,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}),className:"order-last"})]})]})})}function dd({data:e,priceChange:t,highlightedPrice:s,extendedPriceChange:a,url:o}){function r(i,c="intraday",l=null){const{isUp:d,changePercentage:h,changeLabel:f,changeAmount:y}=i,x=Math.abs(h).toFixed(2),v=Ve(y);return n.jsxs("span",{className:"flex min-w-0 items-center gap-1",children:[c==="extended_hours"&&l!=null&&n.jsx("span",{className:"font-semibold",children:n.jsx(P,{id:"HWwWpW",defaultMessage:"{price}",values:{price:l}})}),n.jsx("span",{className:j("font-semibold",d?Tn:$n),children:n.jsx(P,{id:"3x4Lkl",defaultMessage:"{sign}{changeAmount}",values:{changeAmount:v,sign:d?"+":""}})}),n.jsx("span",{className:j("font-semibold",d?Tn:$n),children:n.jsx(P,{id:"MbfF1T",defaultMessage:"({sign}{changePercentage}%)",values:{changePercentage:x,sign:d?"+":"-"}})}),c==="extended_hours"?n.jsx("span",{className:"text-token-text-primary min-w-0 truncate",children:f}):n.jsx("span",{className:"text-token-text-primary min-w-0 truncate",children:f})]})}return n.jsxs("div",{children:[n.jsx("div",{className:"mt-2 text-sm",children:e?n.jsx(P,{id:"+2WHuv",defaultMessage:"{name} ({ticker})",values:{name:e.asset.name,ticker:e.asset.ticker}}):n.jsx("div",{className:"w-32 font-medium",children:n.jsx(ze,{index:9,width:100})})}),n.jsx("div",{className:"text-token-text-tertiary text-sm",children:e?n.jsx(n.Fragment,{children:o!=null&&n.jsxs(n.Fragment,{children:[" · ",n.jsx(ue,{href:o,className:"text-token-link hover:underline",children:Ct(o,"hostname")})]})}):n.jsx("div",{className:"mt-2 w-36",children:n.jsx(ze,{index:6,width:100})})}),n.jsx("div",{className:"mt-2 flex text-4xl font-semibold",children:e?n.jsx(P,{id:"s+1uly",defaultMessage:"{price}",values:{price:s??Ve(e.price.price)}}):n.jsx("div",{className:"w-32",children:n.jsx(ze,{index:0,width:100})})}),n.jsx("div",{className:"mt-2 flex items-center justify-start gap-1 text-sm",children:t?r(t):n.jsx("div",{className:"mt-2 w-40",children:n.jsx(ze,{index:3,width:100})})}),n.jsx("div",{className:"mt-0.5 flex items-center justify-start gap-1 text-sm",children:e?.price?.extended_price!=null&&a!=null&&r(a,"extended_hours",Ve(e.price.extended_price))})]})}function ud({contentReference:e,trackContentReferenceEvent:t}){const s=D();g.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown","stock")},[t]);const a=td(e?.stock?.histories),o=e?.stock,[r,i]=g.useState(a),[c,l]=g.useState(null),d=r==="1d",h=o?.histories?.quotes?.[r??""]?.[0],f=r&&r in ut?r:void 0,y=o&&(h&&!d?{changePercentage:(o.price.price-h.close)/h.close*100,changeAmount:o.price.price-h.close,changeLabel:f?s.formatMessage(ut[f]):"",isUp:o.price.price>h.close}:o.price.change_percent&&o.price.change?{changePercentage:o.price.change_percent*100,changeAmount:o.price.change,changeLabel:md(o.price.latest_trade_timestamp,o.asset.timezone,s),isUp:o.price.change?o.price.change>0:!1}:null),x=o&&o.price.extended_price!=null&&o.price.extended_change_percent!=null&&o.price.extended_change!=null?{changePercentage:o.price.extended_change_percent*100,changeAmount:o.price.extended_change,changeLabel:s.formatMessage(fd(o.price.market_status)??ut.extended),isUp:o.price.extended_change>0}:null,{fiftyTwoWeekHigh:v,fiftyTwoWeekLow:m}=g.useMemo(()=>{const N=o?.histories?.quotes["1y"];if(!N)return{fiftyTwoWeekHigh:null,fiftyTwoWeekLow:null};const w=N.map(_=>_.high).filter(_=>_!=null),b=N.map(_=>_.low).filter(_=>_!=null);return{fiftyTwoWeekHigh:w.length>0?Math.max(...w):null,fiftyTwoWeekLow:b.length>0?Math.min(...b):null}},[o?.histories?.quotes]),k=o?.price.open_price&&o.price.intraday_high&&o.price.intraday_low&&o.price.intraday_volume&&v&&m?{openPrice:o.price.open_price,intradayHigh:o.price.intraday_high,intradayLow:o.price.intraday_low,intradayVolume:o.price.intraday_volume,fiftyTwoWeekHigh:v,fiftyTwoWeekLow:m,marketCap:o.metrics?.market_cap??void 0,peRatio:o.metrics?.pe_ratio??void 0,eps:o.metrics?.eps??void 0}:null,C=k!=null;return n.jsxs("div",{className:j("border-token-border-default mb-2 flex min-h-[480px] flex-col gap-8 rounded-lg border"),children:[n.jsxs("div",{className:"mx-6 flex flex-wrap items-end justify-between",children:[n.jsx(dd,{data:o??null,highlightedPrice:c,priceChange:y??null,extendedPriceChange:x??null,url:e?.url??null}),n.jsx("div",{className:"mt-4",children:n.jsx(ed,{selectedInterval:r,onSelectHistoryInterval:i,histories:o?.histories})})]}),n.jsx("div",{className:"mx-6 h-[340px]",children:n.jsx(rd,{isUp:y?.isUp??!1,selectedInterval:r,histories:o?.histories,setHighlightedPrice:l,onSelectHistoryInterval:N=>i(N),latestTradingPeriod:o?.asset.latest_trading_period,timezone:o?.asset.timezone??null})}),C&&n.jsx("div",{className:"-mt-4",children:n.jsx(cd,{metrics:k})})]})}function fd(e){if(e==null)return null;const t=e.toLowerCase();return t==="premarket"||t==="open"?zt({id:"By+pvF",defaultMessage:"Pre-Market"}):t==="afterhours"||t==="closed"?zt({id:"aLCg3c",defaultMessage:"After Hours"}):zt({id:"2p526c",defaultMessage:"Extended Hours"})}function md(e,t,s){function a(o,r){const c=We(new Date,r),l=s.formatDate(c,{year:"numeric",month:"2-digit",day:"2-digit"}),d=Ds(o*1e3),h=We(d,r),f=s.formatDate(h,{year:"numeric",month:"2-digit",day:"2-digit"});return l===f}if(!e||!t||a(e,t))return s.formatMessage(ut["1d"]);{const o=Ds(e*1e3),r=We(o,t);return s.formatDate(r,{month:"long",day:"numeric"})}}const ut=ls({"1d":{id:"SMdcuo",defaultMessage:"Today"},extended:{id:"2p526c",defaultMessage:"Extended Hours"},"5d":{id:"HCA6lr",defaultMessage:"Past 5 days"},"1m":{id:"DJpPMq",defaultMessage:"Past month"},"6m":{id:"1mUJ2L",defaultMessage:"Past 6 months"},ytd:{id:"b9KkhV",defaultMessage:"Year to date"},"1y":{id:"XnvD9A",defaultMessage:"Past year"},"5y":{id:"DfI1RB",defaultMessage:"Past 5 years"},max:{id:"WzOhuU",defaultMessage:"Max"}}),hd={google_maps:{title:"Google Maps"}};function pd({metadata:e,trackContentReferenceEvent:t}){g.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type)},[t,e.type]);const s=hd[e.provider]?.title??"Maps";return n.jsx("span",{children:n.jsx(P,{id:"ZSUz1k",defaultMessage:" ({link}) ",values:{link:n.jsx(ue,{href:e.url,children:s})}})})}const gd=30;function xd(e){"use forget";const t=is.c(19),{metadata:s,trackContentReferenceEvent:a}=e,o=s.items.length>0,r=g.useRef(a);let i,c;t[0]!==a?(i=()=>{r.current=a},c=[a],t[0]=a,t[1]=i,t[2]=c):(i=t[1],c=t[2]),g.useEffect(i,c);let l,d;t[3]!==o?(l=()=>{o&&r.current("Search Content Reference Shown","search_content_reference_shown","nav_list")},d=[o],t[3]=o,t[4]=l,t[5]=d):(l=t[4],d=t[5]),g.useEffect(l,d);let h;t[6]!==a?(h=(C,N)=>{a("link_action","link_action","nav_list",{...In(C,N),action:"click"})},t[6]=a,t[7]=h):h=t[7];const f=h;let y;t[8]!==a?(y=(C,N)=>{a("link_action","link_action","nav_list",{...In(C,N),action:"show"})},t[8]=a,t[9]=y):y=t[9];const x=y;if(s.items.length===0)return null;let v;t[10]!==s.title?(v=s.title&&n.jsx("div",{className:"text-token-text-primary -mb-1 pb-3 font-semibold",children:s.title}),t[10]=s.title,t[11]=v):v=t[11];let m;t[12]!==f||t[13]!==x||t[14]!==s.items?(m=n.jsx(Xo,{items:s.items,onCardRender:bd,onCardShown:x,onCardClicked:f,cardClassName:"transition-all duration-200 border-token-border-default hover:border-light border rounded-xl bg-clip-padding hover:shadow-md overflow-hidden"}),t[12]=f,t[13]=x,t[14]=s.items,t[15]=m):m=t[15];let k;return t[16]!==v||t[17]!==m?(k=n.jsxs("div",{className:"mt-6 mb-1",children:[v,m]}),t[16]=v,t[17]=m,t[18]=k):k=t[18],k}function bd(e){return n.jsx(vd,{item:e})}function yd(e,t){if(t==null)return null;const s=new Date(t*1e3),a=e.locale,o=Math.max(Math.floor((Date.now()-s.getTime())/(1e3*60*60*24)),0);if(o>gd)return e.formatDate(s,{dateStyle:"medium"});const r=e.formatRelativeTime(-o,"day",{numeric:"auto"});return a.startsWith("en")?r.charAt(0).toUpperCase()+r.slice(1):r}function vd({item:e}){const{isSuccess:t}=ts(e.thumbnail_url??void 0),s=D(),a=yd(s,e.pub_date);return n.jsxs(ue,{className:"flex flex-col items-center gap-4 overflow-hidden pb-6",href:e.url,children:[t&&e.thumbnail_url?n.jsx("div",{className:"relative h-36 w-full overflow-hidden",children:n.jsx("img",{src:e.thumbnail_url,className:"m-0 h-full w-full",style:{objectFit:"cover"},alt:e.title})}):n.jsxs("div",{className:"icon-bg relative flex h-36 w-full shrink-0 items-center justify-center overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-cover bg-center bg-no-repeat blur-3xl",children:n.jsx(lt,{url:e.url,size:256,minSize:128,className:"mix-soft-light opacity-30 dark:opacity-20"})}),n.jsx("div",{className:"absolute flex h-10 w-10 items-center justify-center",children:n.jsx(lt,{url:e.url,size:128,minSize:80,className:"icon-xl rounded-full"})})]}),n.jsxs("div",{className:"flex flex-col gap-2 overflow-hidden px-4 text-ellipsis",children:[n.jsxs("div",{className:"text-token-text-primary flex items-center gap-1.5 text-xs",children:[n.jsx(lt,{url:e.url,size:32,minSize:16,className:"icon-xs my-0 rounded-full"}),e.attribution??Ct(e.url)]}),n.jsx("div",{className:"text-token-text-primary decoration-token-link line-clamp-5 text-sm font-medium",children:e.title}),a&&n.jsx("div",{className:"text-token-text-secondary text-xs",children:a})]})]})}const In=(e,t)=>({url:e.url,title:e.title,section_index:t,link_type:"text",section:"nav_list",section_location:"response"}),wd="/assets/missing-logo-h96s4tk9.webp",Rn={src:wd};function Yo({team:e,className:t}){const[s,a]=g.useState(e.logo??Rn.src),o=()=>{Tt.addError("Unable to load sports widget logo",{name:e.name,logo:e.logo}),a(Rn.src)};return n.jsx("img",{src:s,alt:e.name,className:t,onError:o})}const Ge=["ipl"],Ln=6,pe="home",ge="away";function _d({scheduleRef:e,trackContentReferenceEvent:t}){const[s,a]=g.useState(!0),o=D(),r=e.games.length>0,i=e.league.id,c=Wa(),l=Pt();if(g.useEffect(()=>{r&&t("Search Content Reference Shown","search_content_reference_shown","sports",{hasSchedule:!0})},[r]),!r)return null;const h=(o.formatDateToParts(new Date,{timeZoneName:"long"}).find(v=>v.type==="timeZoneName")?.value??Intl.DateTimeFormat().resolvedOptions().timeZone).replace(/Daylight|Standard/g,"");let f=e.games;const y=v=>Math.abs(new Date().getTime()-new Date(v.date).getTime());y(f[0])>y(f[f.length-1])&&(f=f.slice().reverse());const x=s?f.slice(0,Ln):f;return n.jsxs("div",{className:"not-prose mb-3",children:[n.jsx("div",{className:"font-semibold",children:n.jsx(P,{id:"LA6z9q",defaultMessage:"{league} Schedule",values:{league:e.league.display_name}})}),n.jsx("div",{className:"text-token-text-secondary text-sm",children:h}),x.length===1?n.jsx("div",{children:n.jsx(Ms,{children:n.jsx(es.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.2},children:n.jsx("div",{className:"border-token-border-medium mt-3 rounded-xl border py-3",children:n.jsx(Sd,{game:x[0],useAlias:Ge.includes(i),leagueId:i,activeTeam:x[0]?.active_team??null,isMobile:l})})})})}):n.jsx("div",{className:"grid grid-cols-1 pt-3 lg:grid-cols-2",children:n.jsx(Ms,{children:x.map((v,m)=>n.jsx(es.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0,transition:{delay:m*.04}},exit:{opacity:0,y:-15},transition:{duration:.2},children:n.jsx("div",{className:j("border-token-border-medium border-b py-3",m%2===0&&"lg:border-e lg:pe-4",m%2===1&&"lg:ps-4",Math.floor(m/2)===Math.ceil(f.length/2)-1&&"lg:border-b-0",m===f.length-1&&"border-b-0"),children:n.jsx(kd,{game:v,useAlias:(c||l)&&Ge.includes(i),leagueId:i,activeTeam:v.active_team??null})})},m))})}),f.length>Ln&&n.jsx("div",{className:"mt-2 flex items-center justify-between",children:n.jsx("button",{className:"flex items-center text-sm font-semibold",onClick:()=>a(!s),children:s?n.jsx(P,{id:"BH/Ee5",defaultMessage:"Show more {icon}",values:{icon:n.jsx(Kr,{className:"mb-[-2px]"})}}):n.jsx(P,{id:"Z9BlEu",defaultMessage:"Show less {icon}",values:{icon:n.jsx(Qr,{className:"mb-[-2px]"})}})})})]})}function kd({game:e,useAlias:t=!1,leagueId:s,activeTeam:a}){const o=Qo(e),r=[e.first_team_info,e.second_team_info],i=r.find(h=>h.location===pe)??e.first_team_info,c=r.find(h=>h.location===ge)??e.second_team_info,l=o?.team.name===i?.team.name,d=o?.team.name===c?.team.name;return n.jsxs("div",{className:"flex w-full gap-1.5 py-3 text-base",children:[n.jsxs("div",{className:"flex flex-auto flex-col items-start gap-1 pe-3",children:[n.jsx(_t,{team:c.team,isWinner:d,isActive:a===ge,logoSize:"small",useAlias:t}),n.jsx(_t,{team:i.team,isWinner:l,isActive:a===pe,logoSize:"small",useAlias:t})]}),n.jsxs("div",{className:j("flex flex-none flex-col items-start gap-1",Ge.includes(s)&&"me-4"),children:[n.jsx(kt,{score:c.score,scoreSuffix:c.score_suffix,scoreParenthetical:c.score_parenthetical?{message:c.score_parenthetical,position:"right"}:null,isWinner:d,negateScore:wt(s,ge,a)}),n.jsx(kt,{score:i.score,scoreSuffix:i.score_suffix,scoreParenthetical:i.score_parenthetical?{message:i.score_parenthetical,position:"right"}:null,isWinner:l,negateScore:wt(s,pe,a)})]}),n.jsx("div",{className:"flex min-w-24 flex-none flex-col items-end justify-center gap-1 text-sm",children:n.jsx(er,{game:e})})]})}function Sd({game:e,useAlias:t=!1,leagueId:s,activeTeam:a,isMobile:o}){const r=Qo(e),i=[e.first_team_info,e.second_team_info],c=i.find(f=>f.location===pe)??e.first_team_info,l=i.find(f=>f.location===ge)??e.second_team_info,d=r?.team.name===c?.team.name,h=r?.team.name===l?.team.name;return n.jsxs("div",{className:"flex w-full py-3 text-base",children:[n.jsx("div",{className:"flex flex-1 items-center justify-center px-2",children:n.jsx(_t,{team:l.team,isWinner:h,isActive:a===ge,useAlias:t,layoutDirection:o?"column":"row"})}),n.jsx("div",{className:"ms-2 flex items-center justify-start sm:ms-8",children:n.jsx(kt,{score:l.score,scoreSuffix:l.score_suffix,scoreParenthetical:l.score_parenthetical?{message:l.score_parenthetical,position:"bottom"}:null,isWinner:h,negateScore:wt(s,ge,a),className:"text-sm font-semibold sm:text-lg"})}),n.jsx("div",{className:"mx-2 flex w-24 shrink flex-col items-center justify-center gap-1 align-middle text-sm",children:n.jsx(er,{game:e})}),n.jsx("div",{className:"me-2 flex items-center justify-end sm:me-8",children:n.jsx(kt,{score:c.score,scoreSuffix:c.score_suffix,scoreParenthetical:c.score_parenthetical?{message:c.score_parenthetical,position:"bottom"}:null,isWinner:d,negateScore:wt(s,pe,a),className:"text-sm font-semibold sm:text-lg"})}),n.jsx("div",{className:"flex flex-1 items-center justify-center md:px-2",children:n.jsx(_t,{team:c.team,isWinner:d,isActive:a===pe,useAlias:t,layoutDirection:o?"column":"row"})})]})}function Ko(e){return e.live?"live":new Date(e.date)<new Date?"complete":"scheduled"}function Qo(e){return Ko(e)!=="complete"||e.first_team_info.score==null||e.second_team_info.score==null?null:e.first_team_info.score>e.second_team_info.score?e.first_team_info:e.second_team_info}function wt(e,t,s){return Ge.includes(e)&&t===pe&&s===ge}function _t({team:e,isWinner:t,isActive:s,logoSize:a,useAlias:o=!1,layoutDirection:r="row"}){return n.jsxs("span",{className:j("flex items-center gap-1",t&&"font-semibold","max-w-64 lg:max-w-52 xl:max-w-64",r==="column"&&"flex-col"),children:[e.logo&&n.jsx(Yo,{team:{name:e.name,logo:e.logo},className:j(a==="small"?"w-6":"w-8")}),n.jsx("span",{className:"truncate",children:o?e.alias:e.name}),s&&n.jsx("span",{className:"bg-token-surface-error inline-block h-2 w-2 rounded-full"})]})}function kt({score:e,scoreSuffix:t,scoreParenthetical:s,isWinner:a,negateScore:o=!1,className:r}){const i=D();return e==null?null:n.jsxs("span",{className:j(a&&"font-semibold",r),children:[o?i.formatMessage({id:"sports.dash",defaultMessage:"-"}):e,t&&!o&&n.jsx("span",{children:t}),s&&!o&&n.jsx("span",{className:j("text-token-text-secondary font-normal",s.position==="right"&&"ms-1",s.position==="bottom"&&"mx-auto block text-center"),children:`(${s.message})`})]})}function er({game:e}){const t=D();switch(Ko(e)){case"live":return n.jsxs(n.Fragment,{children:[n.jsx(Cd,{}),n.jsx("div",{children:e.details})]});case"complete":return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"font-semibold",children:n.jsx(P,{id:"q/iMZL",defaultMessage:"Final"})}),n.jsx("div",{className:"text-token-text-secondary",children:ss(t,new Date(e.date))})]});case"scheduled":{const s=new Date(e.date);return isNaN(s.getTime())?null:n.jsxs(n.Fragment,{children:[n.jsx("div",{children:ss(t,s)}),n.jsx("div",{className:"text-token-text-secondary",children:t.formatDate(s,{timeStyle:"short"})})]})}}}function Cd(){return n.jsx("div",{className:"bg-token-surface-error rounded-[4px] px-1.5 py-1 text-xs font-semibold text-white",children:n.jsx(P,{id:"vObALn",defaultMessage:"Live"})})}function jd({standingsRef:e,trackContentReferenceEvent:t}){const[s,a]=g.useState(0),o=e.conferences.length>0,r=Pt(),i=e.league.id;g.useEffect(()=>{o&&t("Search Content Reference Shown","search_content_reference_shown","sports",{hasStandings:!0})},[o]);const c=e.conferences[s],l=e.conferences.length>1?e.conferences.map((d,h)=>n.jsx("button",{className:j(s===h?"text-token-text-primary":"text-token-text-tertiary","text-sm font-semibold"),onClick:()=>a(h),children:d.name},d.name)):null;return n.jsxs(n.Fragment,{children:[l&&n.jsx("div",{className:"flex gap-4",children:l}),n.jsx("div",{className:"mt-3",children:c.divisions.map(d=>d.name?n.jsx("div",{className:"mt-3",children:n.jsx(Dn,{division:d,teamsColumnHeader:d.name})},d.name):n.jsx(Dn,{division:d,useAlias:r&&Ge.includes(i)}))})]})}function Dn({division:e,teamsColumnHeader:t,useAlias:s}){const a=e.headers.map(o=>o.key);return n.jsxs(H.Root,{size:"compact",className:"not-prose",children:[n.jsxs(H.Header,{children:[n.jsx(Nd,{children:t??n.jsx(P,{id:"kKSGje",defaultMessage:"Team"})}),e.headers.map(o=>n.jsx(tr,{textAlign:"center",className:"min-w-11 px-0!",children:n.jsx(Fn,{data:o})},o.key))]}),n.jsx(H.Body,{children:e.teams.map(({team:o,data:r},i)=>{const c=r.reduce((l,d)=>(l[d.key]=d,l),{});return n.jsxs(H.Row,{children:[n.jsx(H.Cell,{className:"w-full border-0! py-0! ps-0!",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"text-token-text-tertiary me-2 w-4 whitespace-nowrap tabular-nums",children:i+1}),n.jsxs("div",{className:"flex items-center justify-start gap-2",children:[n.jsx(Yo,{team:o,className:"w-6"}),n.jsx("span",{className:"text-base whitespace-nowrap",children:s?o.alias:o.name})]})]})}),a.map(l=>n.jsx(H.Cell,{className:"min-w-11 border-0! px-0! py-0! text-start whitespace-nowrap tabular-nums",textAlign:"center",children:n.jsx(Fn,{data:c[l]})},l))]},o.name)})})]})}function Fn({data:e}){switch(e.type){case"text":return n.jsx(n.Fragment,{children:e.text});default:return n.jsx(n.Fragment,{children:e.alt})}}const tr=oo(H.HeaderCell)`text-token-text-secondary font-normal! text-sm static! bg-transparent! border-token-border-default! border-t-0! border-s-0! border-e-0!`,Nd=oo(tr)`text-token-text-primary ps-0!`;function Td({metadata:e,trackContentReferenceEvent:t}){g.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type)},[t,e.type]);const s=D(),a=We(e.utc_time,e.utc_offset),o=s.formatDate(a,{hour:"numeric",minute:"numeric"});return n.jsx("span",{children:o})}function $d({metadata:e,trackContentReferenceEvent:t}){return g.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type)},[t,e.type]),n.jsx("div",{children:e.url?n.jsx(ea,{webpageItem:{url:e.url,title:e.description,pub_date:null,snippet:"",attributions:null},className:"inline-flex flex-col",children:n.jsx(ue,{href:e.url,className:"font-semibold!",children:e.description})}):n.jsx("div",{className:"font-semibold!",children:e.description})})}function Pd({url:e,className:t,iframeClassName:s,iframeTitle:a}){let o;const r=j("aspect-video w-full",s),i=Md(e);i&&(o=n.jsx(Ed,{videoId:i,className:r,iframeTitle:a}));const c=Ad(e);return c&&(o=n.jsx(Id,{videoId:c,className:r,iframeTitle:a})),o?n.jsx("div",{className:t,children:o}):null}function Md(e){const t=/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,s=e.match(t);return s?s[1]:null}function Ed({videoId:e,className:t,iframeTitle:s}){return n.jsx("iframe",{className:t,src:`https://www.youtube.com/embed/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0,title:s})}function Ad(e){const t=/vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/[^/]+\/videos\/|video\/|)(\d+)/,s=e.match(t);return s?s[1]:null}function Id({videoId:e,className:t,iframeTitle:s}){return n.jsx(n.Fragment,{children:n.jsx("iframe",{className:t,src:`https://player.vimeo.com/video/${e}`,frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0,title:s})})}function Rd({video:e,trackContentReferenceEvent:t}){const s={url:e.url,title:e.title};return g.useEffect(()=>{t("Search Content Reference Shown","search_content_reference_shown",e.type,s)},[]),e.url==null||e.url===""?null:n.jsx("div",{className:"not-prose mb-3 flex flex-col gap-4 text-base",children:n.jsx(Pd,{url:e.url,iframeClassName:"rounded-lg"})})}const Ld="webp",Dd=96,Fd=96,Od="srgb",zd=4,Bd="uchar",Wd=288,Ud=!1,Hd=!1,Vd=!0,Jd="/assets/cloud-foggy-o4a3hmky.webp",Xd={format:Ld,width:Dd,height:Fd,space:Od,channels:zd,depth:Bd,density:Wd,isProgressive:Ud,hasProfile:Hd,hasAlpha:Vd,src:Jd},qd="webp",Gd=96,Zd=96,Yd="srgb",Kd=4,Qd="uchar",eu=288,tu=!1,su=!1,nu=!0,ou="/assets/cloudy-co8vwrk7.webp",ru={format:qd,width:Gd,height:Zd,space:Yd,channels:Kd,depth:Qd,density:eu,isProgressive:tu,hasProfile:su,hasAlpha:nu,src:ou},au="webp",iu=96,lu=96,cu="srgb",du=4,uu="uchar",fu=288,mu=!1,hu=!1,pu=!0,gu="/assets/heavy-snow-mke52kag.webp",xu={format:au,width:iu,height:lu,space:cu,channels:du,depth:uu,density:fu,isProgressive:mu,hasProfile:hu,hasAlpha:pu,src:gu},bu="webp",yu=96,vu=96,wu="srgb",_u=4,ku="uchar",Su=288,Cu=!1,ju=!1,Nu=!0,Tu="/assets/light-snow-mcy1l7t9.webp",$u={format:bu,width:yu,height:vu,space:wu,channels:_u,depth:ku,density:Su,isProgressive:Cu,hasProfile:ju,hasAlpha:Nu,src:Tu},Pu="webp",Mu=96,Eu=96,Au="srgb",Iu=4,Ru="uchar",Lu=288,Du=!1,Fu=!1,Ou=!0,zu="/assets/moon-drizzle-cplxr2ub.webp",Bu={format:Pu,width:Mu,height:Eu,space:Au,channels:Iu,depth:Ru,density:Lu,isProgressive:Du,hasProfile:Fu,hasAlpha:Ou,src:zu},Wu="webp",Uu=96,Hu=96,Vu="srgb",Ju=4,Xu="uchar",qu=288,Gu=!1,Zu=!1,Yu=!0,Ku="/assets/moon-hazy-jvgt25bp.webp",Qu={format:Wu,width:Uu,height:Hu,space:Vu,channels:Ju,depth:Xu,density:qu,isProgressive:Gu,hasProfile:Zu,hasAlpha:Yu,src:Ku},ef="webp",tf=96,sf=96,nf="srgb",of=4,rf="uchar",af=288,lf=!1,cf=!1,df=!0,uf="/assets/moon-mostly-cloudy-cia3do0v.webp",ff={format:ef,width:tf,height:sf,space:nf,channels:of,depth:rf,density:af,isProgressive:lf,hasProfile:cf,hasAlpha:df,src:uf},mf="webp",hf=96,pf=96,gf="srgb",xf=4,bf="uchar",yf=288,vf=!1,wf=!1,_f=!0,kf="/assets/moon-mostly-sunny-n3mh1b6a.webp",Sf={format:mf,width:hf,height:pf,space:gf,channels:xf,depth:bf,density:yf,isProgressive:vf,hasProfile:wf,hasAlpha:_f,src:kf},Cf="webp",jf=96,Nf=96,Tf="srgb",$f=4,Pf="uchar",Mf=288,Ef=!1,Af=!1,If=!0,Rf="/assets/moon-shower-ntzhti9o.webp",Lf={format:Cf,width:jf,height:Nf,space:Tf,channels:$f,depth:Pf,density:Mf,isProgressive:Ef,hasProfile:Af,hasAlpha:If,src:Rf},Df="webp",Ff=96,Of=96,zf="srgb",Bf=4,Wf="uchar",Uf=288,Hf=!1,Vf=!1,Jf=!0,Xf="/assets/moon-sunny-eg2emh4d.webp",qf={format:Df,width:Ff,height:Of,space:zf,channels:Bf,depth:Wf,density:Uf,isProgressive:Hf,hasProfile:Vf,hasAlpha:Jf,src:Xf},Gf="webp",Zf=96,Yf=96,Kf="srgb",Qf=4,em="uchar",tm=288,sm=!1,nm=!1,om=!0,rm="/assets/rain-thunder-bx7a0l5g.webp",am={format:Gf,width:Zf,height:Yf,space:Kf,channels:Qf,depth:em,density:tm,isProgressive:sm,hasProfile:nm,hasAlpha:om,src:rm},im="webp",lm=96,cm=96,dm="srgb",um=4,fm="uchar",mm=288,hm=!1,pm=!1,gm=!0,xm="/assets/rain-cxs76xuj.webp",bm={format:im,width:lm,height:cm,space:dm,channels:um,depth:fm,density:mm,isProgressive:hm,hasProfile:pm,hasAlpha:gm,src:xm},ym="webp",vm=96,wm=96,_m="srgb",km=4,Sm="uchar",Cm=288,jm=!1,Nm=!1,Tm=!0,$m="/assets/sleet-gc63vwmo.webp",Pm={format:ym,width:vm,height:wm,space:_m,channels:km,depth:Sm,density:Cm,isProgressive:jm,hasProfile:Nm,hasAlpha:Tm,src:$m},Mm="webp",Em=96,Am=96,Im="srgb",Rm=4,Lm="uchar",Dm=288,Fm=!1,Om=!1,zm=!0,Bm="/assets/snow-d0k6tmmc.webp",Wm={format:Mm,width:Em,height:Am,space:Im,channels:Rm,depth:Lm,density:Dm,isProgressive:Fm,hasProfile:Om,hasAlpha:zm,src:Bm},Um="webp",Hm=96,Vm=96,Jm="srgb",Xm=4,qm="uchar",Gm=288,Zm=!1,Ym=!1,Km=!0,Qm="/assets/sun-drizzle-g94obr5e.webp",eh={format:Um,width:Hm,height:Vm,space:Jm,channels:Xm,depth:qm,density:Gm,isProgressive:Zm,hasProfile:Ym,hasAlpha:Km,src:Qm},th="webp",sh=96,nh=96,oh="srgb",rh=4,ah="uchar",ih=288,lh=!1,ch=!1,dh=!0,uh="/assets/sun-hazy-c3z1j0hy.webp",fh={format:th,width:sh,height:nh,space:oh,channels:rh,depth:ah,density:ih,isProgressive:lh,hasProfile:ch,hasAlpha:dh,src:uh},mh="webp",hh=96,ph=96,gh="srgb",xh=4,bh="uchar",yh=288,vh=!1,wh=!1,_h=!0,kh="/assets/sun-mostly-cloudy-d4o4zkga.webp",Sh={format:mh,width:hh,height:ph,space:gh,channels:xh,depth:bh,density:yh,isProgressive:vh,hasProfile:wh,hasAlpha:_h,src:kh},Ch="webp",jh=96,Nh=96,Th="srgb",$h=4,Ph="uchar",Mh=288,Eh=!1,Ah=!1,Ih=!0,Rh="/assets/sun-mostly-sunny-livrdkgu.webp",Lh={format:Ch,width:jh,height:Nh,space:Th,channels:$h,depth:Ph,density:Mh,isProgressive:Eh,hasProfile:Ah,hasAlpha:Ih,src:Rh},Dh="webp",Fh=96,Oh=96,zh="srgb",Bh=4,Wh="uchar",Uh=288,Hh=!1,Vh=!1,Jh=!0,Xh="/assets/sun-shower-lvtjthah.webp",qh={format:Dh,width:Fh,height:Oh,space:zh,channels:Bh,depth:Wh,density:Uh,isProgressive:Hh,hasProfile:Vh,hasAlpha:Jh,src:Xh},Gh="webp",Zh=96,Yh=96,Kh="srgb",Qh=4,ep="uchar",tp=288,sp=!1,np=!1,op=!0,rp="/assets/sun-sunny-kqjpjzd8.webp",ap={format:Gh,width:Zh,height:Yh,space:Kh,channels:Qh,depth:ep,density:tp,isProgressive:sp,hasProfile:np,hasAlpha:op,src:rp},ip="webp",lp=96,cp=96,dp="srgb",up=4,fp="uchar",mp=288,hp=!1,pp=!1,gp=!0,xp="/assets/thunder-jgjqg9ai.webp",bp={format:ip,width:lp,height:cp,space:dp,channels:up,depth:fp,density:mp,isProgressive:hp,hasProfile:pp,hasAlpha:gp,src:xp},yp="webp",vp=96,wp=96,_p="srgb",kp=4,Sp="uchar",Cp=288,jp=!1,Np=!1,Tp=!0,$p="/assets/tornado-opa24tq3.webp",Pp={format:yp,width:vp,height:wp,space:_p,channels:kp,depth:Sp,density:Cp,isProgressive:jp,hasProfile:Np,hasAlpha:Tp,src:$p},Mp="webp",Ep=96,Ap=96,Ip="srgb",Rp=4,Lp="uchar",Dp=288,Fp=!1,Op=!1,zp=!0,Bp="/assets/windy-mw0a3u21.webp",Wp={format:Mp,width:Ep,height:Ap,space:Ip,channels:Rp,depth:Lp,density:Dp,isProgressive:Fp,hasProfile:Op,hasAlpha:zp,src:Bp},Up="webp",Hp=96,Vp=96,Jp="srgb",Xp=4,qp="uchar",Gp=288,Zp=!1,Yp=!1,Kp=!0,Qp="/assets/cloud-foggy-fhg0jn0w.webp",eg={format:Up,width:Hp,height:Vp,space:Jp,channels:Xp,depth:qp,density:Gp,isProgressive:Zp,hasProfile:Yp,hasAlpha:Kp,src:Qp},tg="webp",sg=96,ng=96,og="srgb",rg=4,ag="uchar",ig=288,lg=!1,cg=!1,dg=!0,ug="/assets/cloudy-disd26f3.webp",fg={format:tg,width:sg,height:ng,space:og,channels:rg,depth:ag,density:ig,isProgressive:lg,hasProfile:cg,hasAlpha:dg,src:ug},mg="webp",hg=96,pg=96,gg="srgb",xg=4,bg="uchar",yg=288,vg=!1,wg=!1,_g=!0,kg="/assets/heavy-snow-g6jjwo2d.webp",Sg={format:mg,width:hg,height:pg,space:gg,channels:xg,depth:bg,density:yg,isProgressive:vg,hasProfile:wg,hasAlpha:_g,src:kg},Cg="webp",jg=96,Ng=96,Tg="srgb",$g=4,Pg="uchar",Mg=288,Eg=!1,Ag=!1,Ig=!0,Rg="/assets/light-snow-iz0efpkh.webp",Lg={format:Cg,width:jg,height:Ng,space:Tg,channels:$g,depth:Pg,density:Mg,isProgressive:Eg,hasProfile:Ag,hasAlpha:Ig,src:Rg},Dg="webp",Fg=96,Og=96,zg="srgb",Bg=4,Wg="uchar",Ug=288,Hg=!1,Vg=!1,Jg=!0,Xg="/assets/moon-drizzle-b1nfv39c.webp",qg={format:Dg,width:Fg,height:Og,space:zg,channels:Bg,depth:Wg,density:Ug,isProgressive:Hg,hasProfile:Vg,hasAlpha:Jg,src:Xg},Gg="webp",Zg=96,Yg=96,Kg="srgb",Qg=4,ex="uchar",tx=288,sx=!1,nx=!1,ox=!0,rx="/assets/moon-hazy-nfnzea7a.webp",ax={format:Gg,width:Zg,height:Yg,space:Kg,channels:Qg,depth:ex,density:tx,isProgressive:sx,hasProfile:nx,hasAlpha:ox,src:rx},ix="webp",lx=96,cx=96,dx="srgb",ux=4,fx="uchar",mx=288,hx=!1,px=!1,gx=!0,xx="/assets/moon-mostly-cloudy-e56e3z55.webp",bx={format:ix,width:lx,height:cx,space:dx,channels:ux,depth:fx,density:mx,isProgressive:hx,hasProfile:px,hasAlpha:gx,src:xx},yx="webp",vx=96,wx=96,_x="srgb",kx=4,Sx="uchar",Cx=288,jx=!1,Nx=!1,Tx=!0,$x="/assets/moon-mostly-sunny-ffu4gzf4.webp",Px={format:yx,width:vx,height:wx,space:_x,channels:kx,depth:Sx,density:Cx,isProgressive:jx,hasProfile:Nx,hasAlpha:Tx,src:$x},Mx="webp",Ex=96,Ax=96,Ix="srgb",Rx=4,Lx="uchar",Dx=288,Fx=!1,Ox=!1,zx=!0,Bx="/assets/moon-shower-e5dy9u48.webp",Wx={format:Mx,width:Ex,height:Ax,space:Ix,channels:Rx,depth:Lx,density:Dx,isProgressive:Fx,hasProfile:Ox,hasAlpha:zx,src:Bx},Ux="webp",Hx=96,Vx=96,Jx="srgb",Xx=4,qx="uchar",Gx=288,Zx=!1,Yx=!1,Kx=!0,Qx="/assets/moon-sunny-d9o08xiw.webp",eb={format:Ux,width:Hx,height:Vx,space:Jx,channels:Xx,depth:qx,density:Gx,isProgressive:Zx,hasProfile:Yx,hasAlpha:Kx,src:Qx},tb="webp",sb=96,nb=96,ob="srgb",rb=4,ab="uchar",ib=288,lb=!1,cb=!1,db=!0,ub="/assets/rain-thunder-eplemvu1.webp",fb={format:tb,width:sb,height:nb,space:ob,channels:rb,depth:ab,density:ib,isProgressive:lb,hasProfile:cb,hasAlpha:db,src:ub},mb="webp",hb=96,pb=96,gb="srgb",xb=4,bb="uchar",yb=288,vb=!1,wb=!1,_b=!0,kb="/assets/rain-ogayr6kt.webp",Sb={format:mb,width:hb,height:pb,space:gb,channels:xb,depth:bb,density:yb,isProgressive:vb,hasProfile:wb,hasAlpha:_b,src:kb},Cb="webp",jb=96,Nb=96,Tb="srgb",$b=4,Pb="uchar",Mb=288,Eb=!1,Ab=!1,Ib=!0,Rb="/assets/sleet-o8noil7l.webp",Lb={format:Cb,width:jb,height:Nb,space:Tb,channels:$b,depth:Pb,density:Mb,isProgressive:Eb,hasProfile:Ab,hasAlpha:Ib,src:Rb},Db="webp",Fb=96,Ob=96,zb="srgb",Bb=4,Wb="uchar",Ub=288,Hb=!1,Vb=!1,Jb=!0,Xb="/assets/snow-lq4cl3uc.webp",qb={format:Db,width:Fb,height:Ob,space:zb,channels:Bb,depth:Wb,density:Ub,isProgressive:Hb,hasProfile:Vb,hasAlpha:Jb,src:Xb},Gb="webp",Zb=96,Yb=96,Kb="srgb",Qb=4,ey="uchar",ty=288,sy=!1,ny=!1,oy=!0,ry="/assets/sun-drizzle-htsohv65.webp",ay={format:Gb,width:Zb,height:Yb,space:Kb,channels:Qb,depth:ey,density:ty,isProgressive:sy,hasProfile:ny,hasAlpha:oy,src:ry},iy="webp",ly=96,cy=96,dy="srgb",uy=4,fy="uchar",my=288,hy=!1,py=!1,gy=!0,xy="/assets/sun-hazy-nfj7clcd.webp",by={format:iy,width:ly,height:cy,space:dy,channels:uy,depth:fy,density:my,isProgressive:hy,hasProfile:py,hasAlpha:gy,src:xy},yy="webp",vy=96,wy=96,_y="srgb",ky=4,Sy="uchar",Cy=288,jy=!1,Ny=!1,Ty=!0,$y="/assets/sun-mostly-cloudy-e3pqqgs7.webp",Py={format:yy,width:vy,height:wy,space:_y,channels:ky,depth:Sy,density:Cy,isProgressive:jy,hasProfile:Ny,hasAlpha:Ty,src:$y},My="webp",Ey=96,Ay=96,Iy="srgb",Ry=4,Ly="uchar",Dy=288,Fy=!1,Oy=!1,zy=!0,By="/assets/sun-mostly-sunny-o99k1c7a.webp",Wy={format:My,width:Ey,height:Ay,space:Iy,channels:Ry,depth:Ly,density:Dy,isProgressive:Fy,hasProfile:Oy,hasAlpha:zy,src:By},Uy="webp",Hy=96,Vy=96,Jy="srgb",Xy=4,qy="uchar",Gy=288,Zy=!1,Yy=!1,Ky=!0,Qy="/assets/sun-shower-ldwl4jbp.webp",ev={format:Uy,width:Hy,height:Vy,space:Jy,channels:Xy,depth:qy,density:Gy,isProgressive:Zy,hasProfile:Yy,hasAlpha:Ky,src:Qy},tv="webp",sv=96,nv=96,ov="srgb",rv=4,av="uchar",iv=!1,lv=!1,cv=!0,dv="/assets/sun-sunny-kqjpjzd8.webp",uv={format:tv,width:sv,height:nv,space:ov,channels:rv,depth:av,isProgressive:iv,hasProfile:lv,hasAlpha:cv,src:dv},fv="webp",mv=96,hv=96,pv="srgb",gv=4,xv="uchar",bv=288,yv=!1,vv=!1,wv=!0,_v="/assets/thunder-xzn1cku3.webp",kv={format:fv,width:mv,height:hv,space:pv,channels:gv,depth:xv,density:bv,isProgressive:yv,hasProfile:vv,hasAlpha:wv,src:_v},Sv="webp",Cv=96,jv=96,Nv="srgb",Tv=4,$v="uchar",Pv=288,Mv=!1,Ev=!1,Av=!0,Iv="/assets/tornado-diqu61wg.webp",Rv={format:Sv,width:Cv,height:jv,space:Nv,channels:Tv,depth:$v,density:Pv,isProgressive:Mv,hasProfile:Ev,hasAlpha:Av,src:Iv},Lv="webp",Dv=96,Fv=96,Ov="srgb",zv=4,Bv="uchar",Wv=288,Uv=!1,Hv=!1,Vv=!0,Jv="/assets/windy-n2v8wtyp.webp",Xv={format:Lv,width:Dv,height:Fv,space:Ov,channels:zv,depth:Bv,density:Wv,isProgressive:Uv,hasProfile:Hv,hasAlpha:Vv,src:Jv},qv={foggy:{default:Xd},cloudy:{default:ru},"heavy-snow":{default:xu},"light-snow":{default:$u},sleet:{default:Pm},drizzle:{default:eh,night:Bu},hazy:{default:fh,night:Qu},"mostly-cloudy":{default:Sh,night:ff},"mostly-sunny":{default:Lh,night:Sf},shower:{default:qh,night:Lf},sunny:{default:ap,night:qf},"rain-thunder":{default:am},rain:{default:bm},snow:{default:Wm},thunder:{default:bp},tornado:{default:Pp},windy:{default:Wp}},Gv={foggy:{default:eg},cloudy:{default:fg},"heavy-snow":{default:Sg},"light-snow":{default:Lg},sleet:{default:Lb},drizzle:{default:ay,night:qg},hazy:{default:by,night:ax},"mostly-cloudy":{default:Py,night:bx},"mostly-sunny":{default:Wy,night:Px},shower:{default:ev,night:Wx},sunny:{default:uv,night:eb},"rain-thunder":{default:fb},rain:{default:Sb},snow:{default:qb},thunder:{default:kv},tornado:{default:Rv},windy:{default:Xv}};function Zv({weatherCode:e,isDarkMode:t,isNight:s}){const a=t?Gv:qv,o=Yv(e),r=a[o];return r.night&&s?r.night:r.default}function Yv(e){switch(e){case 1:case 33:return"sunny";case 2:case 3:case 34:case 35:case 36:return"mostly-sunny";case 4:case 6:case 13:case 14:case 38:return"mostly-cloudy";case 5:case 37:return"hazy";case 7:case 8:return"cloudy";case 11:return"foggy";case 12:case 39:case 40:return"shower";case 15:case 16:case 17:case 41:case 42:return"thunder";case 18:return"rain";case 19:case 20:case 21:case 43:return"light-snow";case 22:case 23:case 44:return"snow";case 24:case 25:case 26:case 29:return"sleet";case 32:return"windy";default:return"cloudy"}}const Kv="C";function Qv(e,t){return Math.round(e==="F"?t*9/5+32:(t-32)*5/9)}function On(e,t,s=Kv){return e===s?`${Math.round(t)}°`:`${Qv(e,t)}°`}const ew=7,zn=8,tw=g.memo(function({weatherResults:t,dateRange:s,turnIndex:a,trackContentReferenceEvent:o}){const[r,i]=fw(),c=ow(t);g.useEffect(()=>{o("Search Content Reference Shown","search_content_reference_shown","forecast")},[o]);const{daily:l,hourly:d,historical:h}=t;let f="daily";if(s||d&&l.length<2)f="hourly";else if(l.length>0)f="daily";else if(h&&h?.length>0)f="historical";else return null;return n.jsxs("div",{className:"relative",children:[c?n.jsxs(n.Fragment,{children:[n.jsx(nw,{weatherResults:t}),n.jsx(rw,{weatherResults:t,temperatureUnit:r,setTemperatureUnit:i})]}):n.jsx("div",{className:"bg-token-main-surface-primary absolute end-0 top-3 z-10 rounded-sm",children:n.jsx(sr,{onTemperatureUnitChange:i,temperatureUnit:r})}),n.jsx(cw,{turnIndex:a}),f==="hourly"&&n.jsx(aw,{weatherResults:t,temperatureUnit:r,dateRange:s}),f==="daily"&&n.jsx(iw,{dailyForecast:l.slice(0,ew),temperatureUnit:r}),f==="historical"&&n.jsx(lw,{historical:h,temperatureUnit:r})]})});function sw({weatherAlert:e}){const[t,s]=g.useState(!1),a=D(),o=no(),r=se(e.start_timestamp,e.utc_offset_sec),i=e.end_timestamp?se(e.end_timestamp,e.utc_offset_sec):null,c=n.jsxs(n.Fragment,{children:[n.jsx("div",{children:n.jsx(P,{id:"JnuGPS",defaultMessage:"{start}{separator}{end}",values:{start:a.formatDate(r,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}),separator:i?" - ":"",end:i?a.formatDate(i,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):""}})}),n.jsx("div",{children:e.summary})]});return n.jsxs("button",{className:"my-2 flex w-full flex-col gap-2 rounded-xl border border-red-200 bg-red-100 px-4 py-3 text-start text-sm text-red-800",onClick:()=>s(!t),children:[n.jsxs("div",{className:"flex w-full items-center gap-4",children:[n.jsx(Xa,{className:"h-9 w-9 shrink-0"}),n.jsxs("div",{className:"flex flex-col",children:[n.jsx("div",{className:"font-bold",children:n.jsx(P,{id:"y+fy/l",defaultMessage:"Severe Weather: {name}",values:{name:e.name}})}),o&&c]}),n.jsx("div",{className:"grow"}),n.jsx("div",{className:"opacity-30",children:t?n.jsx(Yi,{className:"icon-lg"}):n.jsx(Zi,{className:"icon-lg"})})]}),t&&e.details&&n.jsxs(n.Fragment,{children:[!o&&c,n.jsx("div",{className:"mt-1 whitespace-pre-wrap",children:e.details.trim()})]})]})}function nw({weatherResults:e}){const{severe:t}=e;return t?n.jsx("div",{className:"my-2",children:t.map((s,a)=>n.jsx(sw,{weatherAlert:s},a))}):null}function ow(e){const{historical:t,daily:s,hourly:a,current:o}=e;if(!o)return!1;let r=!1;const i=se(o.timestamp,o.utc_offset_sec);for(const c of[t,s,a])c&&(r=r||c?.some(l=>Ha(i,se(l.timestamp,l.utc_offset_sec))));return r}function rw({weatherResults:e,temperatureUnit:t,setTemperatureUnit:s}){const a=D(),{current:o}=e;if(!o)return null;const r=o.temperature.current,i=o.description,c=r!=null&&i&&" · ";return n.jsxs("div",{className:"not-prose flex items-center gap-4",children:[n.jsxs("div",{className:"grow",children:[n.jsxs("div",{className:"text-lg font-semibold",children:[r!=null&&n.jsx(P,{id:"FiwByI",defaultMessage:"Currently {temperature}",values:{temperature:xe(a,r,t)}}),c,i.description]}),n.jsx("div",{className:"text-token-text-secondary",children:uw(e.location)})]}),n.jsxs("div",{className:"flex",children:[n.jsx(sr,{onTemperatureUnitChange:s,temperatureUnit:t}),n.jsx($s,{weatherDescriptionData:i,isNight:o.night})]})]})}function Ts({children:e}){return n.jsx("div",{className:"no-scrollbar not-prose mt-1 overflow-auto sm:overflow-hidden",children:n.jsx(H.Root,{className:"min-w-0",children:n.jsx(H.Body,{className:"border-token-border-medium border-b-[0.5px] [&_tr:last-child]:border-b-0",children:e})})})}function aw({weatherResults:e,temperatureUnit:t,dateRange:s}){const a=D(),{hourly:o,current:r}=e;let i=o??[];s&&(i=i.filter(h=>h.timestamp>=s.start_timestamp&&h.timestamp<s.end_timestamp));const[c,l]=g.useState(!1),d=i.length>zn;if(!c&&d){const h=i[0],f=se(h.timestamp,h.utc_offset_sec);let y=!1;if(r){const x=se(r.timestamp,r.utc_offset_sec);f.getTime()-x.getTime()>8*60*60*1e3&&i.length>18&&(i=i.slice(7,18),y=!0)}y||(i=i.slice(0,zn))}return n.jsxs(Ts,{children:[i.map((h,f)=>n.jsxs(H.Row,{children:[n.jsxs(G,{className:"w-44",children:[n.jsx($s,{weatherDescriptionData:h.description,isNight:h.night,size:"small"}),n.jsx("div",{className:"ms-3 whitespace-nowrap",children:n.jsx("span",{className:"lowercase",children:dw(a,h)})})]}),n.jsx(G,{className:"w-[60px] tabular-nums",children:n.jsx("div",{children:xe(a,h.temperature.current,t)})}),n.jsx(G,{children:h.description.description})]},f)),d&&n.jsx(H.Row,{children:n.jsx(G,{className:"w-44",children:n.jsx(ie,{color:"secondary",onClick:()=>l(!c),size:"small",children:c?n.jsx(P,{id:"KoC8Ym",defaultMessage:"Show less"}):n.jsx(P,{id:"X8F8Y/",defaultMessage:"Show more"})})})})]})}function iw({dailyForecast:e,temperatureUnit:t}){const s=D();return n.jsx(Ts,{children:e.map((a,o)=>n.jsxs(H.Row,{children:[n.jsxs(G,{className:"w-[7.5rem] min-w-[7.5rem]",children:[n.jsx($s,{weatherDescriptionData:a.description,isNight:a.night,size:"small"}),n.jsx("div",{className:"ms-3 whitespace-nowrap",children:ss(s,se(a.timestamp,a.utc_offset_sec))})]}),n.jsxs(G,{className:"tabular-nums",children:[n.jsx("div",{children:xe(s,a.temperature.max,t)}),n.jsx("div",{className:"text-token-text-secondary ms-1",children:xe(s,a.temperature.min,t)})]}),n.jsx(G,{className:"min-w-80",children:a.description.description})]},o))})}function lw({historical:e,temperatureUnit:t}){const s=D();return e?n.jsx(Ts,{children:e.map((a,o)=>{const r=se(a.timestamp,a.utc_offset_sec);return n.jsxs(H.Row,{children:[n.jsx(G,{className:"w-[250px]",children:n.jsx("div",{className:"ms-3 whitespace-nowrap",children:s.formatDate(r,{weekday:"long",month:"short",day:"numeric"})})}),n.jsx(G,{className:"tabular-nums",children:a.temperature.max&&a.temperature.min?n.jsxs(n.Fragment,{children:[n.jsx("div",{children:xe(s,a.temperature.max,t)}),n.jsx("div",{className:"text-token-text-secondary ms-1",children:xe(s,a.temperature.min,t)})]}):n.jsx("div",{children:xe(s,a.temperature.current,t)})}),n.jsx(G,{})]},o)})}):null}function G({className:e,children:t}){return n.jsx(H.Cell,{className:j("border-token-border-xlight! border-s-0! border-e-0! py-2! ps-4! pe-3! first:ps-0! last:pe-0!",e),divClassName:"items-start leading-relaxed",children:t})}function cw({turnIndex:e}){const t=Pi(a=>a.thread?.turns[e]?.use_location),[s]=ji();return!s.useLocation&&t?n.jsx("div",{className:"mt-3",children:n.jsx(ie,{color:"secondary",icon:ta,onClick:()=>{Ni.setSettingsModalOpen(!0)},children:n.jsx(P,{id:"f47VEc",defaultMessage:"Share precise location"})})}):null}function sr({temperatureUnit:e,onTemperatureUnitChange:t}){const s=a=>e===a?"font-bold":"font-light";return n.jsx(Va,{size:"small",triggerButton:n.jsx("button",{className:"text-token-text-tertiary hover:text-token-text-primary flex items-center justify-center p-1.5",children:n.jsx(qi,{className:"icon-sm"})}),children:n.jsxs(Ja.Item,{onClick:()=>{t(e==="C"?"F":"C")},className:"text-token-text-primary",children:[n.jsx(P,{id:"bQIoe/",defaultMessage:"Temperature"}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:s("F"),children:n.jsx(P,{id:"bvDeBB",defaultMessage:"°F"})}),n.jsx("div",{className:"mx-1 h-4 border-s border-gray-300"}),n.jsx("div",{className:s("C"),children:n.jsx(P,{id:"iNiz6O",defaultMessage:"°C"})})]})]})})}function $s({weatherDescriptionData:e,isNight:t=!1,size:s="normal"}){const a=Mt(),o=s==="small"?30:50;return n.jsx("img",{draggable:!1,alt:e.description,src:Zv({weatherCode:e.id,isDarkMode:a,isNight:t}).src,width:o,height:o})}function dw(e,t){const s=se(t.timestamp,t.utc_offset_sec);return e.formatDate(s,{hour:"numeric"})}function xe(e,t,s){return t==null?"-":On(s?s??"F":nr(e),t)}function nr(e){const t=["en-US","en-BZ","en-BS","en-KY","en-PW"],s=e.locale||"en-US";return t.includes(s)?"F":"C"}function uw(e){const t=e.name.split(",").map(s=>s.trim());return e.country&&!t.includes(e.country)&&t.push(e.country),t.join(", ")}const fw=()=>{const e=D(),[t,s]=Ua("USER_TEMPERATURE_UNIT",nr(e),a=>["F","C"].includes(a));return[t,s]},mw=qa(()=>ft(()=>import("./j68j9ti01uzipo54.js"),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10])).then(e=>e.BusinessesMap));function hw(e){"use forget";const t=is.c(123),{index:s,FormattedText:a,node:o,wordFadeType:r}=e,i=parseInt(s,10),c=g.useContext(ee),l=qn(c?.analyticsMetadata),d=g.useRef(!1);if(c==null)return null;const{contentReferences:h,onShowSearchResults:f,numImageResults:y,analyticsMetadata:x,message:v}=c,m=h?.[i];if(!m||x.turnIndex===void 0||m.type===void 0)return null;let k;t[0]===Symbol.for("react.memo_cache_sentinel")?(k={img:gw},t[0]=k):k=t[0];let C;t[1]!==m.alt?(C=n.jsx(bs,{components:k,children:m.alt}),t[1]=m.alt,t[2]=C):C=t[2];const N=C;let w=null;e:switch(m.type){case"title_citation":{let u;t[3]!==m||t[4]!==l?(u=n.jsx($d,{metadata:m,trackContentReferenceEvent:l}),t[3]=m,t[4]=l,t[5]=u):u=t[5],w=u;break e}case"location_search":{let u;t[6]!==m||t[7]!==l?(u=n.jsx(pd,{metadata:m,trackContentReferenceEvent:l}),t[6]=m,t[7]=l,t[8]=u):u=t[8],w=u;break e}case"time":{let u;t[9]!==m||t[10]!==l?(u=n.jsx(Td,{metadata:m,trackContentReferenceEvent:l}),t[9]=m,t[10]=l,t[11]=u):u=t[11],w=u;break e}case"image_v2":{const u=y??0;let $;t[12]!==x||t[13]!==m||t[14]!==l||t[15]!==u?($=n.jsx(js,{metadata:m,numImageResults:u,analyticsMetadata:x,trackContentReferenceEvent:l}),t[12]=x,t[13]=m,t[14]=l,t[15]=u,t[16]=$):$=t[16],w=$;break e}case"nav_list":{let u;t[17]!==m||t[18]!==l?(u=n.jsx(xd,{metadata:m,trackContentReferenceEvent:l}),t[17]=m,t[18]=l,t[19]=u):u=t[19],w=u;break e}case"file_navlist":{let u;t[20]!==m||t[21]!==l?(u=n.jsx(Zc,{metadata:m,trackContentReferenceEvent:l}),t[20]=m,t[21]=l,t[22]=u):u=t[22],w=u;break e}case"file":{let u;t[23]!==m||t[24]!==l||t[25]!==i?(u=n.jsx(Jc,{fileRef:m,index:i,trackContentReferenceEvent:l}),t[23]=m,t[24]=l,t[25]=i,t[26]=u):u=t[26],w=u;break e}case"grouped_webpages_model_predicted_fallback":{let u;t[27]!==m||t[28]!==c.message.id||t[29]!==l||t[30]!==i||t[31]!==o?(u=n.jsx(na,{webpageRef:m,node:o,trackContentReferenceEvent:l,messageId:c.message.id,index:i}),t[27]=m,t[28]=c.message.id,t[29]=l,t[30]=i,t[31]=o,t[32]=u):u=t[32],w=u;break e}case"grouped_webpages":{let u;t[33]!==m||t[34]!==c.message.id||t[35]!==l||t[36]!==i||t[37]!==o?(u=n.jsx(sa,{webpageRef:m,node:o,trackContentReferenceEvent:l,messageId:c.message.id,index:i}),t[33]=m,t[34]=c.message.id,t[35]=l,t[36]=i,t[37]=o,t[38]=u):u=t[38],w=u;break e}case"tldr":break e;case"navigation":{let u;t[39]!==m||t[40]!==l||t[41]!==f?(u=n.jsx(aa,{navigation:m,onShowSearchResults:f,trackContentReferenceEvent:l}),t[39]=m,t[40]=l,t[41]=f,t[42]=u):u=t[42],w=u;break e}case"stock":{let u;t[43]!==m||t[44]!==l?(u=n.jsx(ud,{contentReference:m,trackContentReferenceEvent:l}),t[43]=m,t[44]=l,t[45]=u):u=t[45],w=u;break e}case"calculator":{let u;t[46]!==m||t[47]!==l?(u=n.jsx(Fc,{data:m,trackContentReferenceEvent:l}),t[46]=m,t[47]=l,t[48]=u):u=t[48],w=u;break e}case"python":case"container":{let u;t[49]!==x.turnIndex||t[50]!==m||t[51]!==c.clientThreadId?(u=n.jsx(Uc,{clientThreadId:c.clientThreadId,turnIndex:x.turnIndex,contentReference:m}),t[49]=x.turnIndex,t[50]=m,t[51]=c.clientThreadId,t[52]=u):u=t[52],w=u;break e}case"code_execution":{let u;t[53]!==a||t[54]!==m||t[55]!==l?(u=n.jsx(Bc,{FormattedText:a,displayInfo:m,trackContentReferenceEvent:l}),t[53]=a,t[54]=m,t[55]=l,t[56]=u):u=t[56],w=u;break e}case"forecast":{let u;t[57]!==x||t[58]!==m.date_range||t[59]!==m.forecast||t[60]!==l?(u=m?.forecast&&n.jsx(tw,{weatherResults:m.forecast,dateRange:m.date_range,turnIndex:x.turnIndex,trackContentReferenceEvent:l}),t[57]=x,t[58]=m.date_range,t[59]=m.forecast,t[60]=l,t[61]=u):u=t[61],w=u;break e}case"businesses_map":{let u;t[62]!==m||t[63]!==l?(u=n.jsx(mw,{contentReference:m,trackContentReferenceEvent:l}),t[62]=m,t[63]=l,t[64]=u):u=t[64],w=u;break e}case"video":{let u;t[65]!==m||t[66]!==l?(u=n.jsx(Rd,{video:m,trackContentReferenceEvent:l}),t[65]=m,t[66]=l,t[67]=u):u=t[67],w=u;break e}case"sports_standings":{let u;t[68]!==m||t[69]!==l?(u=n.jsx(jd,{standingsRef:m,trackContentReferenceEvent:l}),t[68]=m,t[69]=l,t[70]=u):u=t[70],w=u;break e}case"sports_schedule":{let u;t[71]!==m||t[72]!==l?(u=n.jsx(_d,{scheduleRef:m,trackContentReferenceEvent:l}),t[71]=m,t[72]=l,t[73]=u):u=t[73],w=u;break e}case"attribution":{let u;t[74]!==m||t[75]!==r?(u=n.jsx(Ac,{attribution:m,wordFadeType:r}),t[74]=m,t[75]=r,t[76]=u):u=t[76],w=u;break e}case"debug":{let u;t[77]!==m?(u=Object.entries(m).map(pw),t[77]=m,t[78]=u):u=t[78];let $;t[79]!==u?($=n.jsx(n.Fragment,{children:u}),t[79]=u,t[80]=$):$=t[80],w=$;break e}case"image_inline":{let u;t[81]!==m||t[82]!==c.clientThreadId||t[83]!==l||t[84]!==v?(u=v.metadata?.b1de6e2_rm?n.jsx(_c,{reference:m,clientThreadId:c.clientThreadId,trackContentReferenceEvent:l,message:v}):n.jsx(Sc,{reference:m,clientThreadId:c.clientThreadId,trackContentReferenceEvent:l,message:v}),t[81]=m,t[82]=c.clientThreadId,t[83]=l,t[84]=v,t[85]=u):u=t[85],w=u;break e}case"image_group":{let u;t[86]!==x||t[87]!==m||t[88]!==l?(u=null,t[86]=x,t[87]=m,t[88]=l,t[89]=u):u=t[89],w=u;break e}case"product_entity":{let u;t[90]!==x.turnIndex||t[91]!==m||t[92]!==c.clientThreadId||t[93]!==c.message.id||t[94]!==l?(u=n.jsx(Cc,{contentReference:m,clientThreadId:c.clientThreadId,messageId:c.message.id,turnIndex:x.turnIndex,trackContentReferenceEvent:l}),t[90]=x.turnIndex,t[91]=m,t[92]=c.clientThreadId,t[93]=c.message.id,t[94]=l,t[95]=u):u=t[95],w=u;break e}case"checkout_confirmation":{let u;t[96]!==m||t[97]!==l?(u=null,t[96]=m,t[97]=l,t[98]=u):u=t[98],w=u;break e}case"entity":{let u;t[99]!==x||t[100]!==m||t[101]!==c.clientThreadId||t[102]!==c.message||t[103]!==l?(u=null,t[99]=x,t[100]=m,t[101]=c.clientThreadId,t[102]=c.message,t[103]=l,t[104]=u):u=t[104],w=u;break e}case"products":{let u;t[105]!==x||t[106]!==m||t[107]!==c.clientThreadId||t[108]!==c.message.id?(u=n.jsx(Tc,{contentReference:m,clientThreadId:c.clientThreadId,messageId:c.message.id,turnIndex:x.turnIndex,analyticsMetadata:x}),t[105]=x,t[106]=m,t[107]=c.clientThreadId,t[108]=c.message.id,t[109]=u):u=t[109],w=u;break e}case"product_reviews":{let u;t[110]!==m||t[111]!==l?(u=n.jsx(ra,{contentReference:m,disableAnimation:!0,trackContentReferenceEvent:l}),t[110]=m,t[111]=l,t[112]=u):u=t[112],w=u;break e}case"product_rationale":{let u;t[113]!==m||t[114]!==l?(u=n.jsx(oa,{contentReference:m,trackContentReferenceEvent:l,disableAnimation:!0}),t[113]=m,t[114]=l,t[115]=u):u=t[115],w=u;break e}case"sources_footnote":return null}let b;t[116]!==N||t[117]!==m||t[118]!==l?(b=u=>(d.current||(l("Search Content Reference Failed","search_content_reference_failed",m.type),Tt.addError(`Error rendering content reference: ${m.type}`,{...u,contentReference:m}),d.current=!0),m?.alt?N:n.jsx("span",{className:`errored-object-${m.type}`})),t[116]=N,t[117]=m,t[118]=l,t[119]=b):b=t[119];let _;return t[120]!==w||t[121]!==b?(_=n.jsx(ro,{name:"content-reference-renderer",fallback:b,children:w}),t[120]=w,t[121]=b,t[122]=_):_=t[122],_}function pw(e){const[t,s]=e;return n.jsx("sub",{className:"ms-1 w-fit rounded-md border-2 border-solid border-orange-500 px-1 leading-none",children:s},t)}function gw(e){const{src:t,alt:s}=e;return n.jsx("img",{src:t,alt:s,className:"max-h-28"})}const xw=({onClick:e})=>{const[t,s]=g.useState(!1),a=ia(),o=D(),r=l=>{e(l),s(!0),setTimeout(()=>{a()&&s(!1)},2e3)},i=t?la:ca,c=o.formatMessage({id:"KrNQPS",defaultMessage:"Copy Table"});return n.jsx($t,{label:c,side:"bottom",align:"center",alignOffset:0,children:n.jsx("button",{"aria-label":c,onClick:r,className:"hover:bg-token-bg-tertiary text-token-text-secondary my-1 rounded-sm p-1 transition-opacity group-[:not(:hover):not(:focus-within)]:pointer-events-none group-[:not(:hover):not(:focus-within)]:opacity-0",children:n.jsx(i,{className:"icon"})})})},bw="_tableContainer_16hzy_1",yw="_tableWrapper_16hzy_14",Bn={tableContainer:bw,tableWrapper:yw},vw=({onClickCopy:e,children:t,...s})=>{const a=g.useRef(null),o=g.useRef(null);return Ga(()=>{da({axis:"height",target:a.current?.firstElementChild,onChange:({height:r})=>{o.current&&(o.current.style.height=`${r}px`)}})},[]),n.jsx("div",{className:Bn.tableContainer,children:n.jsxs("div",{tabIndex:-1,className:j(Bn.tableWrapper,"group flex w-fit flex-col-reverse"),children:[n.jsx("table",{...s,className:"w-fit min-w-(--thread-content-width)",ref:a,children:t}),n.jsx("div",{className:"sticky end-(--thread-content-margin) h-0 self-end select-none",children:n.jsx("div",{className:"absolute end-0 flex items-end",ref:o,children:n.jsx(xw,{onClick:e})})})]})})},ww=({node:e,children:t,...s})=>n.jsx("td",{...s,children:g.Children.map(t,(a,o)=>a==="<br>"?n.jsx("br",{},o):a)});function _w(e){const{src:t,clientThreadId:s,...a}=e,o=hs(s),r=g.useContext(ee),i=ki(o,t,r?.useSafeUrls);return i==null?n.jsx("div",{}):n.jsx("img",{...a,src:i})}function kw(e){return n.jsx(hw,{...e,FormattedText:Sw})}function Sw({size:e="medium",children:t,className:s,clientThreadId:a,messageId:o,isActivelyStreaming:r=!1,componentOverrides:i,isDeepResearchResultMessage:c,forceDarkMode:l,disableWordFade:d}){const h=Mt()||l,{wordFadeType:f}=ua(),y=fa(),x=g.useMemo(()=>({pre:({children:b,"data-start":_,"data-end":u,"data-is-last-node":$})=>n.jsx("pre",{className:"overflow-visible!","data-start":_,"data-end":u,"data-is-last-node":$,children:b}),code:b=>n.jsx(ha,{...b,clientThreadId:a}),[Ya]:b=>n.jsx(kw,{wordFadeType:f,...b}),[ma]:b=>a==null?null:n.jsx(Gl,{...b,clientThreadId:a,messageId:o}),[Ci]:Si,[bi]:Zl,[xi]:ac,[gi]:oc,a:b=>{const{node:_,children:u,...$}=b,A=_?.properties?.href;if(typeof A=="string"&&A.startsWith(As))return a!=null&&o!=null?n.jsx(Qa,{...$,clientThreadId:a,messageId:o,href:A,children:u}):null;if(typeof A=="string"&&A===ei){const B=_?.children?.map(W=>typeof W.value=="string"?W.value:"").join("").trim();return n.jsx(ti,{...b,text:B,clientThreadId:a,messageId:o,className:"cursor-pointer"})}if(typeof A=="string"&&A===si){const B=_?.children?.map(W=>typeof W.value=="string"?W.value:"").join("").trim();return n.jsx(ni,{...b,text:B,clientThreadId:a,messageId:o})}if(typeof A=="string"&&A===oi){const B=_?.children?.map(W=>typeof W.value=="string"?W.value:"").join("").trim();return n.jsx(ri,{...b,text:B,clientThreadId:a,messageId:o})}return A&&typeof A=="string"&&cc(A)?u:n.jsx(ai,{...b,clientThreadId:a,messageId:o})},table:({node:b,..._})=>n.jsx(vw,{..._,onClickCopy:u=>{ct.logEvent("ChatGPT Table Copy Clicked");const $=a!=null&&o!=null?mt.getNode(Za(a),o).message:void 0;Un(Ka(b.markdownSource,$?.metadata?.content_references),void 0,u)}}),td:ww,...y?{h1:({node:b,..._})=>n.jsx("h1",{"data-section-id":Wt(b.markdownSource),..._}),h2:({node:b,..._})=>n.jsx("h2",{"data-section-id":Wt(b.markdownSource),..._}),h3:({node:b,..._})=>n.jsx("h3",{"data-section-id":Wt(b.markdownSource),..._})}:{},img:({node:b,..._})=>{const u=b?.properties?.src;return typeof u=="string"&&(u.startsWith(As)||u.startsWith("attachment:"))?null:n.jsx(_w,{..._,clientThreadId:a})},...f==="delay"?Ki:[],...i}),[y,f,i,a,o]),v=g.useMemo(()=>r&&t?Qi(t):t??"",[t,r]),m=de(),k=te(m,"1839283687"),C=Gn(),N=g.useMemo(()=>[...lo,[ii,v]],[v]),w=g.useMemo(()=>f==="indexed"&&!d?{handlers:{text:(b,_,u)=>{const $=[];for(const A of C(_.value))$.push({type:"element",tagName:"span",properties:{className:Zn.fadeIn},children:[{type:"text",value:A}]});return $}}}:void 0,[f,C,d]);return k?!1:n.jsx(ro,{name:"formatted_text_error",fallback:()=>n.jsx(n.Fragment,{children:v}),children:n.jsx(Cw,{rehypePlugins:N,remarkPlugins:io,remarkRehypeOptions:w,className:j(s,"markdown prose dark:prose-invert w-full break-words",h?"dark":"light",e==="small"&&"prose-xs",c&&"deep-research-result","markdown-new-styling"),urlTransform:ao,components:x,children:v})})}const Cw=g.memo(bs);export{Sw as FormattedText,Cw as ReactMarkdownMemo};
//# sourceMappingURL=h3t9twq34obyw62q.js.map
