import{j as e,u as C,a as N,e as w,M as p}from"./gg0tb34p9fzo1omt.js";import{hx as F,ch as v,R as S,bU as E,gP as O,dX as P,d as R,G as q,ma as M,iA as U,mb as B,eO as I,eP as A}from"./g670b8vtkhx0yc6d.js";import{c as Q}from"./m22845s1ft2he4f8.js";function h(){return e.jsx(F,{className:"icon-sm text-token-text-tertiary ms-1"})}function T({onChange:t,enabled:s,Icon:a,label:n,labelValues:u,description:o,onClickInfo:r,tooltip:i,tooltipValues:d,hasPadding:m=!0,className:x,disabled:c=!1,messageAfterTooltip:l=void 0}){return e.jsx(Q,{className:E("justify-start",m?"py-6":"py-0",x),children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsx(O,{label:"",disabled:c,enabled:s,onChange:t}),e.jsxs("p",{className:"text-md inline-flex items-center",children:[a&&e.jsx(a,{className:"icon me-1.5"}),n&&e.jsx(p,{...n,values:u}),i&&e.jsx(P,{interactive:!0,label:e.jsx(p,{...i,values:d}),side:"top",children:r?e.jsx("button",{className:"block h-full",onClick:r,children:e.jsx(h,{})}):e.jsx(h,{})}),l&&e.jsx("span",{className:"text-token-text-secondary ps-1 text-sm",children:e.jsx(p,{...l})})]})]}),o&&e.jsx("span",{className:"text-token-text-secondary ms-14 text-sm",children:e.jsx(p,{...o})})]})})}function W({workspaceId:t,Icon:s,label:a,description:n,onClickInfo:u,feature:o,value:r,tooltip:i,hasPadding:d=!0,className:m,disabled:x=!1,overrideDisplayValue:c=void 0,messageAfterTooltip:l=void 0}){const j=v(),_=C(),{variables:y,mutate:f}=N({mutationFn:({feature:g,enabled:b})=>S.safePost("/accounts/{account_id}/beta_features",{parameters:{path:{account_id:t}},requestBody:{feature:g,value:b}}),onSettled:()=>{_.invalidateQueries({queryKey:["workspace-settings",t]})},onError:()=>{j.danger(k.featureSettingsUpdateFailed,{toastId:"workspace_beta_feature_toggle_row"})}});return e.jsx(T,{onChange:g=>{f({feature:o,enabled:g})},enabled:c??y?.enabled??r,Icon:s,label:a,description:n,tooltip:i,hasPadding:d,className:m,disabled:x,messageAfterTooltip:l,onClickInfo:u})}function z({connectorId:t,workspaceId:s,Icon:a,label:n,tooltip:u,tooltipValues:o,messageAfterTooltip:r,description:i,labelValues:d,disabled:m}){const x=v(),c=C(),l=R(),j=q(l),{enabled:_,isLoading:y}=M(t,U.ADMIN_SETTING),{variables:f,mutate:g}=N({mutationFn:b=>S.safePost("/accounts/{account_id}/connectors/{connector_id}/workspace_permissions",{parameters:{path:{account_id:s,connector_id:t}},requestBody:{enabled:b}}),onSettled:()=>{c.invalidateQueries({queryKey:B(j?.normalizedAccountUserId)}),t===I[A.GITHUB_CONNECTOR]&&!f&&c.invalidateQueries({queryKey:["workspace-settings",s]})},onError:()=>{x.danger(k.featureSettingsUpdateFailed,{toastId:"workspace_platform_connector_toggle_row"})}});return e.jsx(T,{onChange:g,enabled:f??!!_,Icon:a,label:n,labelValues:d,disabled:y||m,tooltip:u,tooltipValues:o,messageAfterTooltip:r,description:i})}const k=w({featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"}});export{W as B,h as S,z as W};
//# sourceMappingURL=lonahjnblx03zpuk.js.map
