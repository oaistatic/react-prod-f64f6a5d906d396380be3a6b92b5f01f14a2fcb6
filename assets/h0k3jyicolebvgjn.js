import{hm as T,co as _,dw as v,ml as w,D as F,mm as q}from"./g670b8vtkhx0yc6d.js";import{D as A,aQ as C,aR as D,aS as b}from"./forbprkns1cohsbl.js";import{r as c,f as x}from"./gg0tb34p9fzo1omt.js";const i=5*60*1e3,Q=30*1e3;function U(l,y,m,h,f){const s=c.useContext(A)?.serverSharedThreadId,r=C(m),p=c.useMemo(()=>({asset_pointer:r,content_type:T.ArbitraryAssetPointer}),[r]),o=D(),{isUnauthenticated:E}=_(),a=v(y),t=b.makeQueryOptions({asset:p,sharedThreadId:s,postId:o,gizmoId:void 0,isUnauthenticated:E,conversationId:s?void 0:a}),n=w(),I=!!(l&&(a||s||o)&&r&&t.enabled),d=t.queryFn;if(typeof d=="symbol")throw Error("Unexpected symbol query fn...");return x({queryKey:t.queryKey,queryFn:async g=>{try{const e=await d(g);return h?.(e.url),{status:"success",download_url:e.url}}catch(e){F.addError(e);let u=n("default_download_link_error",{fileName:r});throw e instanceof q&&e.code!=null&&(u=n(e.code)),f?.(u),e}},enabled:I,staleTime:i,gcTime:Q,refetchInterval:i,refetchOnWindowFocus:!0})}export{U as u};
//# sourceMappingURL=h0k3jyicolebvgjn.js.map
