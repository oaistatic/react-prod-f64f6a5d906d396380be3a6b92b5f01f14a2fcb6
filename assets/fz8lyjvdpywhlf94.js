const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bd5pjq3kc7qmzp75.js","assets/gg0tb34p9fzo1omt.js","assets/g670b8vtkhx0yc6d.js","assets/root-ilxovqci.css","assets/goe70pn8nvo8qwal.js","assets/ih4emx2c6pvtq9at.js","assets/forbprkns1cohsbl.js","assets/conversation-small-mtta3ozz.css","assets/nd9kb6ubz8frkxm9.js","assets/isob33hcu783pyvb.js"])))=>i.map(i=>d[i]);
import{r as z,b as q,j as t,M as C,v as es,c as U,h as xe,L as ts,m as ss,A as ns,u as et,R as St,e as Ct}from"./gg0tb34p9fzo1omt.js";import{c2 as os,dv as is,ot as as,ch as Ne,mC as rs,mB as ls,js as ve,mD as cs,kA as ds,H as Y,ou as ms,P as W,bS as us,go as He,bQ as gs,ov as qe,ow as Ke,hZ as hs,bR as fs,cY as Ve,be as bt,je as yt,d as B,G as ps,bg as pe,cl as V,gj as xs,bU as Z,a8 as vs,e9 as js,ea as Ss,bm as It,dE as Cs,c6 as bs,a7 as tt,$ as ys,fz as Is,bV as Fe,bW as Ee,dw as st,j1 as _t,fn as _s,e as zt,dz as Xe,kp as Mt,c5 as y,cD as Tt,dX as be,L as mt,fa as wt,mY as zs,jt as Ms,dl as Pt,dm as kt,dU as Ge,aQ as Ts,ox as ws,dZ as Ps,nF as ks,nN as Ns,oy as Fs,oz as Es,N as Nt,oA as Gs,fg as ut,m as Se,hw as Ds,mu as As,co as nt,hx as Os,dy as Ls,dW as Rs,dj as Ce,cO as Us,nD as Bs,g as $s,fA as Hs,dL as Vs,R as Ws,S as qs,F as Ft,i as Ks,bn as Xs,cg as Qs,o as we,cq as Ys,cr as Zs,oB as Js,b0 as We,nB as en,oC as tn,h as gt}from"./g670b8vtkhx0yc6d.js";import{aB as De,lx as sn,cf as nn,lX as on,bV as ht,hV as an,aD as b,cs as ot,cg as rn,lY as Qe,c0 as ln,lZ as cn,l_ as dn,l$ as mn,m0 as un,m1 as gn,m2 as Et,m3 as Pe,m4 as Gt,m5 as it,E as hn,z as fn,fl as pn,ld as xn,m6 as Dt,m7 as vn,m8 as At,m9 as Ot,ma as jn,dC as Sn,mb as Cn,d as bn,mc as yn,md as ft,me as In,mf as _n,mg as Lt,mh as zn,mi as Mn,mj as Ye,e$ as Rt,fn as at,iX as Tn,mk as Ut,cq as wn,ml as Pn,mm as kn,cm as Nn,mn as Fn,mo as En,mp as Gn,N as Bt,mq as $t,mr as Dn,ms as An,b6 as Ze,cv as Ht,mt as On,mu as Ln,hN as Vt,a7 as Wt,mv as Rn,w as Un,mw as Bn,i5 as $n,a3 as Hn,mx as Vn,cu as Wn,my as qn,eo as Kn,mz as Xn,eY as qt,mA as ke,a1 as Qn,mB as Yn,i as Zn,A as Jn,mC as eo,dI as to,H as so,mD as no,mE as oo,mF as io,mG as ao,fE as ro,dS as lo,mH as co,mI as mo,bE as rt,mJ as uo,mK as go,i_ as ho,mL as fo,jZ as pt,gd as po,mM as xo,lr as vo,lv as jo,lw as So,mN as Co,mO as bo,mP as yo}from"./forbprkns1cohsbl.js";import{g as Io,D as Je}from"./cs320738df36xnc1.js";import{u as _o}from"./f51c6zie1stj9anw.js";import{P as zo}from"./jpdmr6hprcjyd5ie.js";const Kt=os.div`text-sm text-red-500`,Mo=5,To=20,wo=40,Po=n=>{switch(n){case Y.FREE:return Mo;case Y.GO:case Y.PLUS:case Y.EDUCATION:case Y.QUORUM:case Y.DEPRECATED_ENTERPRISE:case Y.DEPRECATED_EDU:return To;case Y.PRO:case Y.TEAM:case Y.BUSINESS:return wo}};function Xt({onClose:n,gizmo:e}){const s=q(),[o,r]=z.useState(e?.gizmo?.instructions||""),i=De(),a=Ne(),d=[];o?.length>Qe&&d.push(s.formatMessage(b.instructionsTooLong,{length:Qe}));const u=p=>{r(p.target.value)},f=()=>{n()},h=async()=>{try{await i.mutateAsync({update:{instructions:o??""},id:e.gizmo.id}),n()}catch(p){const x=yt(p);a.danger(x??"Error",{duration:2,toastId:"custom_instructions_modal_save_error"})}},l=t.jsx(Ve.Button,{title:s.formatMessage(b.save),color:"primary",onClick:h,loading:i.isPending,disabled:d.length>0}),g=t.jsx(Ve.Button,{title:s.formatMessage(b.cancel),color:"secondary",onClick:f,disabled:i.isPending}),{canEdit:c}=ve(e);return t.jsx(bt,{testId:"modal-project-custom-instructions",className:"min-h-[50dvh] max-w-[820px]",isOpen:!0,showCloseButton:!i.isPending,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",title:t.jsx("div",{className:"h-8",children:s.formatMessage(b.editCustomInstructionsTitle)}),onClose:()=>{i.isPending||n()},children:t.jsxs("div",{className:"flex h-full flex-col px-4 pt-0 pb-4",children:[t.jsx("div",{className:"text-sm font-medium",children:s.formatMessage(c?b.editCustomInstructionsSubtitle:b.readOnlyCustomInstructionsTitle)}),t.jsx("div",{className:"text-token-text-secondary text-sm",children:s.formatMessage(c?b.editCustomInstructionsDescription:b.readOnlyCustomInstructionsDescription)}),t.jsx("textarea",{autoFocus:!0,placeholder:s.formatMessage(b.projectInstructionsPlaceholder),className:"focus:ring-token-text-primary border-heavy mt-4 mb-1 min-h-24 w-full grow resize-none overflow-x-clip overflow-y-auto rounded-lg border bg-transparent px-3 py-2 focus:ring-2",name:"instructions",onChange:u,value:o,disabled:i.isPending||!c}),d.map(p=>t.jsx(Kt,{className:"mt-1",children:p},p)),c&&t.jsx(Ve.Actions,{primaryButton:l,secondaryButton:g})]})})}function ko({gizmoId:n,gizmoName:e,canEdit:s,gizmoEditorData:o,openFileDialog:r,pendingFiles:i,setVersion:a,pendingFileUpsertMutationsRef:d,currentModelConfig:u}){const f=o?.files?.reduce((m,j)=>m+(j.file_size_tokens??0),0)??0,h=o?.contextStuffingBudget;let l;h&&(l=f/h,f>0&&l<.01&&(l=.01));const g=o?.files??[],c=Array.from(i.current.values()).filter(m=>g.every(j=>j.file_id!==m.fileId)),p=c.filter(m=>u!=null&&qe(u,m.file.type,m.file.name)===Ke.CodeInterpreter),x=g.filter(m=>u!=null&&m.type!=null&&qe(u,m.type,m.name)===Ke.CodeInterpreter),v=[...p.map(m=>m.tempId),...x.map(m=>m.file_id)];return t.jsx(dn,{gizmoId:n,gizmoName:e,canEdit:s,pendingFiles:c,pendingFileUpsertMutationsRef:d,files:g,modelCapacityUsed:l,interpreterOnlyFileIds:v,onAddFiles:r,removePendingFile:m=>{i.current.delete(m),a(j=>j+1)}})}const No=z.forwardRef(function({gizmo:e,accountPlanType:s,showInstructions:o=!0},r){const i=Po(s),a=q(),[d,u]=z.useState(!1),f=De(),h=sn(e),l=nn(h),{data:g}=is(),c=g?.models.get(as)??(g&&on(g.models.values(),A=>A.tags.includes(ms.GPT_4o))),p=Ne(),[x,v]=z.useState(0),m=z.useRef(new Map),j=z.useRef([]),_=rs(c,void 0),I=A=>{A.some(({errors:O})=>O.length!==1||O[0]?.code!==ht.TooManyFiles)?p.danger(b.unknownError,{duration:2,toastId:"snorlax_handle_file_rejected"}):p.danger(a.formatMessage(b.dragTooManyFilesError,{maxFileLimit:i}),{duration:2,toastId:"snorlax_handle_file_rejected",loggingTitle:"drag_too_many_files_error"})},S=async A=>{W.logEvent("Upload File",{client:"web",eventSource:"mouse",intent:"gizmo"});const O=h.id;A.length>0&&await Promise.all(A.map(K=>{const X=us(K);m.current.set(X,{tempId:X,gizmoId:O,file:K,status:He.Uploading,progress:1,fileId:null,cdnUrl:null}),gs(X,K,a,p,{kind:fs.Gizmo,gizmoId:O},{onFileUploaded:async(w,L,$,R)=>{const H=m.current.get(w);H?.fileId&&H?.fileId&&(j.current.push({id:e.gizmo.id,mutationId:es(),update:Q=>{if(!H.fileId)return Q;const se=[...Q.files??[],{file_id:H.fileId,name:H.file.name,size:H.file.size,type:R?.mimeType??hs(H.file),last_modified:H.file.lastModified,file_size_tokens:R?.fileTokenSize}];return{...Q,files:se}},onSuccess:()=>{m.current.delete(w),v(Q=>Q+1)}}),cn(e.gizmo.id)({gizmoId:e.gizmo.id,upsertProjectMutation:f,pendingFileUpsertMutationsRef:j}))},onFileCreated:(w,L,$)=>{m.current.set(w,{tempId:w,gizmoId:O,file:K,status:He.Uploading,progress:1,...m.current.get(w),fileId:L,cdnUrl:$}),v(R=>R+1)},onFileUploadProgress:(w,L)=>{const $=m.current.get(w);$?.status===He.Uploading&&m.current.set(w,{...$,progress:L>95?95:L}),v(R=>R+1)},onError:w=>{m.current.delete(w),v(L=>L+1)}},{usesRetrievalIndex:c!=null&&qe(c,K.type,K.name)===Ke.Retrieval})}))},M=ls(_),P=Io(M),k=m.current.size+h.files.length,{canEdit:E}=ve(e),{open:N,getInputProps:D,getRootProps:T,isDragAccept:J,isDragReject:ee}=_o({noClick:!0,noKeyboard:!0,noDragEventsBubbling:!0,onDropAccepted:S,onDropRejected:I,multiple:!0,maxSize:cs,maxFiles:i-k,validator:()=>k>=i?{code:ht.TooManyFiles,message:"Too many files"}:null,...M});return z.useImperativeHandle(r,()=>({openFileDialog:N})),t.jsxs("div",{...T({className:"h-full px-4"}),children:[t.jsx("input",{...D()}),o&&t.jsxs(an,{children:[t.jsx("button",{className:"w-full",onClick:()=>u(!0),children:t.jsx("div",{className:"border-token-border-default w-full rounded-lg border text-start text-sm",children:h?.instructions?.length?t.jsx("div",{className:"mx-4 my-3 line-clamp-4",children:h.instructions}):t.jsxs("div",{className:"text-token-text-secondary flex h-full w-full items-center px-4 py-3",children:[t.jsx("div",{className:"flex-1",children:t.jsx(C,{...b.addCustomInstructions})}),t.jsx(ot,{className:"icon-sm"})]})})}),l.includes(rn.GizmoInstructionsTooLong)?t.jsx(Kt,{className:"mt-1",children:t.jsx(C,{...b.instructionsTooLong,values:{length:Qe}})}):null]}),d&&t.jsx(Xt,{gizmo:e,onClose:()=>{u(!1)}}),t.jsx(ko,{gizmoId:e.gizmo.id,gizmoName:e.gizmo.display.name,canEdit:E,gizmoEditorData:h,openFileDialog:N,pendingFiles:m,pendingFileUpsertMutationsRef:j,setVersion:v,currentModelConfig:c}),J&&t.jsxs(Je,{children:[t.jsx(ln,{}),t.jsx("h3",{children:t.jsx(C,{...b.dragInstructions})}),t.jsx("h4",{className:"w-2/3 text-center",children:P.length>0?P.join(", "):t.jsx(C,{...b.dragAllAccepted})})]}),ee&&t.jsxs(Je,{children:[t.jsx(ds,{className:"icon-2xl"}),t.jsx("h3",{children:t.jsx(C,{...b.dragTooManyFiles})}),t.jsx("h4",{className:"w-2/3 text-center",children:t.jsx(C,{...b.dragTooManyFilesDescription,values:{maxFileLimit:i}})})]})]})});function Fo({gizmo:n,onClose:e}){const s=z.useRef(null),o=z.useCallback(()=>{s.current?.openFileDialog()},[s]),r=B(),i=ps(r),{canEdit:a}=ve(n);return t.jsx(t.Fragment,{children:t.jsx(bt,{testId:"modal-project-files",className:"min-h-72 max-w-[820px]",isOpen:!0,showCloseButton:!0,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",headerAccessory:a&&t.jsx(pe,{color:"secondary",onClick:o,children:t.jsx(C,{...b.addFilesButtonLabel})}),title:t.jsx(C,{...b.projectFilesModalTitle}),onClose:()=>{e()},children:t.jsx("div",{className:"grid min-h-[50dvh] grow overflow-y-auto pt-0",children:i&&t.jsx(No,{ref:s,gizmo:n,showInstructions:!1,accountPlanType:i.planType})})})})}function Eo({gizmo:n}){return t.jsx("div",{className:"mt-6 grid grid-cols-2 items-start",children:n?t.jsxs(t.Fragment,{children:[t.jsx(Go,{gizmo:n,className:"rounded-[20px_0px_0px_20px] [border-width:1px_0.5px_1px_1px]"}),t.jsx(Ao,{gizmo:n,className:"rounded-[0px_20px_20px_0px] [border-width:1px_1px_1px_0.5px]"})]}):t.jsxs(t.Fragment,{children:[t.jsx(xt,{}),t.jsx(xt,{})]})})}const lt=({className:n,header:e,context:s,contextClassName:o="",icon:r,onClick:i,disabled:a=!1})=>t.jsx("button",{onClick:i,disabled:a,className:Z("group/snorlax-control-tile border-token-border-light bg-token-bg-primary hover:bg-token-bg-tertiary active:bg-token-bg-tertiary relative h-full rounded-2xl border disabled:pointer-events-none disabled:opacity-50",n),children:t.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[t.jsxs("div",{className:"w-full grow text-start",children:[t.jsx("div",{className:"text-sm font-medium",children:e}),t.jsx("div",{className:Z("text-token-text-secondary text-xs",o),children:s})]}),r]})}),xt=()=>t.jsx(lt,{disabled:!0,header:t.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-48 rounded-full"}),context:t.jsx("div",{className:"bg-token-bg-tertiary my-2 h-2 w-32 rounded-full contain-inline-size"})});function Go({className:n,gizmo:e}){const{files:s}=e,o=!s.length,r=B(),i=()=>V(r,Fo,{gizmo:e});let a,d,u;const{canEdit:f}=ve(e);if(o)a=t.jsx(C,{...f?b.addFilesButtonLabel:b.viewFilesButtonLabel}),d=t.jsx(C,{...f?b.filesControlDescription:b.noFilesReadOnlyDescription}),u=null;else{const l=s.slice(0,3);a=t.jsx(C,{...b.projectFilesModalTitle}),d=t.jsx(C,{...b.filesCount,values:{count:s.length}}),u=t.jsx("div",{className:"relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full max-sm:sr-only",children:l.toReversed().map((g,c)=>t.jsx(Do,{file:g,index:c,gizmoId:e.gizmo.id},g.id))})}return t.jsx(lt,{className:n,onClick:i,header:a,context:d,icon:u,disabled:o&&!f})}function Do({file:n,index:e,gizmoId:s}){const o=n.name,i=xs(o)&&n.file_id!=null&&t.jsx(mn,{fileName:o,fileId:n.file_id,gizmoId:s,className:"[box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]"});return t.jsx("div",{className:"border-token-bg-primary group-hover/snorlax-control-tile:border-token-bg-tertiary absolute end-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2",style:{transform:`translateX(${e*-20}px)`},children:i||t.jsx(un,{className:"h-9 w-9 shrink-0 [box-shadow:0px_4px_16px_0px_rgba(0,0,0,0.05)]",filename:n.name,contextConnectorInfo:void 0})})}function Ao({gizmo:n,className:e}){const{instructions:s}=n.gizmo,o=!s.length,r=B(),i=()=>V(r,Xt,{gizmo:n});let a,d,u;const{canEdit:f}=ve(n);return o?(a=t.jsx(C,{...f?b.customInstructionsTitle:b.customInstructionsReadOnlyTitle}),d=t.jsx(C,{...f?b.customInstructionsDescription:b.customInstructionsReadOnlyDescription})):(a=t.jsx(C,{...b.editCustomInstructionsTitle}),u="overflow-hidden text-ellipsis whitespace-nowrap",d=s),t.jsx(lt,{className:e,onClick:i,header:a,context:d,contextClassName:u,disabled:o&&!f})}const Oo=()=>t.jsx("div",{className:"ms-1 mt-3 h-10",children:t.jsx("div",{className:"bg-token-tertiary my-[15px] h-[10px] w-48 rounded-full"})}),vt=new Map;function Lo(n){const e=vt.get(n);if(e)return e;const s=bn(Ro,2e3,{trailing:!0});return vt.set(n,s),s}async function Ro({gizmoId:n,upsertProjectMutation:e,toaster:s}){const o=In,r=ft(o.getState(),"theme",n);try{r!==void 0&&await e.mutateAsync({id:n,update:{theme:r??void 0}}),ft(o.getState(),"theme",n)===r&&_n(n,"theme")}catch(i){const a=yt(i);s.warning(a??"Error",{duration:2})}}function Uo({gizmoId:n,theme:e,upsertProjectMutation:s,toaster:o}){Cn(n,"theme",e),Lo(n)({gizmoId:n,upsertProjectMutation:s,toaster:o})}function Bo(n){"use forget";const e=U.c(15),{gizmo:s}=n,o=Ot(s),r=De(),[i,a]=z.useState(!1),d=Ne();let u;e[0]!==o||e[1]!==s||e[2]!==d||e[3]!==r?(u=p=>{p!==o&&(W.logEventWithStatsig("Projects: Theme Change","chatgpt_web_projects_theme_change",{theme:p??"default"}),Uo({gizmoId:s.gizmo.id,theme:p,upsertProjectMutation:r,toaster:d}))},e[0]=o,e[1]=s,e[2]=d,e[3]=r,e[4]=u):u=e[4];const f=u;let h;e[5]===Symbol.for("react.memo_cache_sentinel")?(h=p=>a(p),e[5]=h):h=e[5];let l;e[6]!==o?(l=t.jsx(Dt,{currentTheme:o}),e[6]=o,e[7]=l):l=e[7];let g;e[8]!==o||e[9]!==f?(g=t.jsx(jn,{currentTheme:o,onSelect:f}),e[8]=o,e[9]=f,e[10]=g):g=e[10];let c;return e[11]!==i||e[12]!==l||e[13]!==g?(c=t.jsx(Sn,{open:i,sideOffset:4,alignOffset:7,side:"bottom",alignAgainstAnchor:"start",size:"none",modal:!0,onOpenChange:h,triggerButton:l,children:g}),e[11]=i,e[12]=l,e[13]=g,e[14]=c):c=e[14],c}function $o(n){"use forget";const e=U.c(4),{gizmo:s}=n,o=q(),r=B();let i;return e[0]!==r||e[1]!==s||e[2]!==o?(i=t.jsx("div",{className:"mb-8 inline-flex w-full justify-center gap-2",children:s?t.jsxs("div",{className:"text-page-header mt-0.5 inline-block px-4",children:[s?t.jsx(Bo,{gizmo:s}):t.jsx(Dt,{disabled:!0,currentTheme:null}),t.jsx("h1",{className:"contents",children:t.jsx("a",{href:"#edit-title",role:"button","aria-label":o.formatMessage({id:"edit-title",defaultMessage:"Edit the title of {projectName}"},{projectName:s.gizmo.display.name}),className:"text-page-header group hover:text-token-text-secondary relative ms-2 text-balance",onClick:a=>{a.preventDefault(),V(r,it,{submitButtonTitle:o.formatMessage(b.projectSettingsSubmitButton),gizmo:s})},children:s.gizmo.display.name})})]}):t.jsx(Oo,{})}),e[0]=r,e[1]=s,e[2]=o,e[3]=i):i=e[3],i}function Ho(n){"use forget";const e=U.c(2),{children:s}=n;let o;return e[0]!==s?(o=t.jsx("div",{className:"group relative flex flex-col gap-1 p-3",children:t.jsx("div",{className:"flex items-center gap-4",children:s})}),e[0]=s,e[1]=o):o=e[1],o}function Vo(n){"use forget";const e=U.c(23),{conversation:s,gizmo:o}=n,r=tt(s.id,Wo)??s.title,[i,a]=z.useState(!1);let d,u;e[0]!==s.id?(d=()=>Is(Lt,{editTitleInMainScreen:m=>{const{serverThreadId:j}=m;j===s.id&&a(!0)}}),u=[s.id],e[0]=s.id,e[1]=d,e[2]=u):(d=e[1],u=e[2]),z.useEffect(d,u);const{snippet:f}=s;let h;e[3]!==s||e[4]!==r||e[5]!==i?(h=i?t.jsx(yn,{conversationId:s.id,historyConversationResponse:s,onClose:()=>{a(!1)}}):t.jsx("div",{className:"text-sm font-medium",children:r}),e[3]=s,e[4]=r,e[5]=i,e[6]=h):h=e[6];let l;e[7]!==f?(l=f&&t.jsx("div",{className:"text-token-text-secondary truncate text-sm",children:f}),e[7]=f,e[8]=l):l=e[8];let g;e[9]!==h||e[10]!==l?(g=t.jsxs("div",{className:"grow overflow-hidden group-hover:me-5",children:[h,l]}),e[9]=h,e[10]=l,e[11]=g):g=e[11];let c;e[12]!==s||e[13]!==i?(c=!i&&t.jsx(qo,{conversation:s}),e[12]=s,e[13]=i,e[14]=c):c=e[14];let p;e[15]!==g||e[16]!==c?(p=t.jsxs(Ho,{children:[g,c]}),e[15]=g,e[16]=c,e[17]=p):p=e[17];const x=p;let v;return e[18]!==x||e[19]!==s.id||e[20]!==o||e[21]!==i?(v=i?x:t.jsx(ts,{to:ys(s.id,o),draggable:!1,children:x}),e[18]=x,e[19]=s.id,e[20]=o,e[21]=i,e[22]=v):v=e[22],v}function Wo(n){return n?.title}const qo=n=>{"use forget";const e=U.c(19),{conversation:s}=n,[o,r]=z.useState(!1),i=q();let a;e[0]!==s.update_time||e[1]!==i?(a=s.update_time&&Intl.DateTimeFormat(i.locale,{month:"short",day:"numeric"}).format(new Date(s.update_time)),e[0]=s.update_time,e[1]=i,e[2]=a):a=e[2];const d=a;let u;e[3]!==d||e[4]!==o?(u=!!d&&t.jsx("span",{className:Z("transition-opacity duration-100 ease-out",o?"opacity-0":"opacity-100 group-hover:opacity-0"),children:d}),e[3]=d,e[4]=o,e[5]=u):u=e[5];const f=o&&"pointer-events-auto translate-y-0 scale-100 opacity-100";let h;e[6]!==f?(h=Z("absolute end-0 top-0 bottom-0 flex items-center gap-1.5 pe-2","transition-all duration-100 ease-out","pointer-events-none translate-y-0 scale-95 opacity-0","group-hover:pointer-events-auto group-hover:translate-y-0 group-hover:scale-100 group-hover:opacity-100",f),e[6]=f,e[7]=h):h=e[7];let l;e[8]!==s.id?(l=x=>{r(x),x&&W.logEvent("Conversation History Item Open Menu",{conversationId:s.id})},e[8]=s.id,e[9]=l):l=e[9];let g;e[10]!==s||e[11]!==l?(g=t.jsx(zn,{conversation:s,onOpenChange:l,inMainScreen:!0,isActiveConversation:!1}),e[10]=s,e[11]=l,e[12]=g):g=e[12];let c;e[13]!==h||e[14]!==g?(c=t.jsx("div",{className:h,onClick:Yo,children:g}),e[13]=h,e[14]=g,e[15]=c):c=e[15];let p;return e[16]!==u||e[17]!==c?(p=t.jsxs("div",{className:"group text-token-text-tertiary relative flex items-center justify-between text-sm",children:[u,c]}),e[16]=u,e[17]=c,e[18]=p):p=e[18],p};function Ko(n){"use forget";const e=U.c(19),{gizmo:s}=n;vn(s.gizmo.id);const{items:o,hasNextPage:r,fetchNextPage:i,isLoading:a,isFetching:d,isFetchingNextPage:u}=At(s.gizmo.id),f=z.useRef(null);let h;e[0]!==r||e[1]!==d||e[2]!==a||e[3]!==i?(h=j=>{a||j==null||(f.current?.disconnect(),f.current=new IntersectionObserver(_=>{_[0].isIntersecting&&r&&!d&&i()}),f.current.observe(j))},e[0]=r,e[1]=d,e[2]=a,e[3]=i,e[4]=h):h=e[4];const l=h;let g,c;e[5]===Symbol.for("react.memo_cache_sentinel")?(g=()=>()=>{f.current?.disconnect()},c=[],e[5]=g,e[6]=c):(g=e[5],c=e[6]),z.useEffect(g,c);const p=o.length;let x;e[7]!==p||e[8]!==s||e[9]!==r||e[10]!==l||e[11]!==a||e[12]!==o?(x=(p||a)&&t.jsx(Xo,{gizmo:s,items:o??[],hasNextPage:r,infiniteScrollTriggerElementRef:l}),e[7]=p,e[8]=s,e[9]=r,e[10]=l,e[11]=a,e[12]=o,e[13]=x):x=e[13];let v;e[14]!==u?(v=u&&t.jsx("div",{className:"m-4 mb-5 flex justify-center",children:t.jsx(bs,{})}),e[14]=u,e[15]=v):v=e[15];let m;return e[16]!==x||e[17]!==v?(m=t.jsxs("div",{className:"mt-8 mb-14 contain-inline-size",children:[x,v]}),e[16]=x,e[17]=v,e[18]=m):m=e[18],m}function Xo(n){"use forget";const e=U.c(12),{gizmo:s,items:o,hasNextPage:r,infiniteScrollTriggerElementRef:i}=n;let a;if(e[0]!==s||e[1]!==r||e[2]!==i||e[3]!==o){let u;e[5]!==s||e[6]!==r||e[7]!==i||e[8]!==o.length?(u=(f,h)=>{const l=r&&h===o.length-3?i:void 0;return t.jsx("li",{ref:l,className:"border-token-border-light border-t first:border-t-0 last:border-b-0",children:t.jsx("div",{className:"hover:bg-token-interactive-bg-tertiary-hover",children:t.jsx(Vo,{conversation:f,gizmo:s})})},f.id)},e[5]=s,e[6]=r,e[7]=i,e[8]=o.length,e[9]=u):u=e[9],a=o.map(u),e[0]=s,e[1]=r,e[2]=i,e[3]=o,e[4]=a}else a=e[4];let d;return e[10]!==a?(d=t.jsx("ol",{children:a}),e[10]=a,e[11]=d):d=e[11],d}function ct(n,e){"use forget";const s=U.c(14),o=gn(),r=B(),i=xe(),a=Et(),d=Pe.useStore(),u=o?.kind==="conversation"&&o.gizmoId!==e;let f;s[0]!==i||s[1]!==d||s[2]!==a?(f=async function(x){const{conversation:v,newGizmoId:m,previousGizmoId:j}=x;d.expandProject(m),await a({newGizmoId:m,conversation:v,previousGizmoId:j}),i(`/g/${m}/project`)},s[0]=i,s[1]=d,s[2]=a,s[3]=f):f=s[3];const h=f;let l;s[4]!==h||s[5]!==u||s[6]!==r||s[7]!==o||s[8]!==e||s[9]!==n?(l=()=>{if(!u)return;const{conversation:p,gizmoId:x}=o;if(e)return h({conversation:p,newGizmoId:e,previousGizmoId:x});V(r,v=>{const{onClose:m}=v;return t.jsx(it,{onClose:m,onSuccess:j=>{if(!j)return;const _=h({conversation:p,newGizmoId:j,previousGizmoId:x});return W.logEventWithStatsig("Projects: Create Open","chatgpt_web_projects_create_open",{source:n}),_}})})},s[4]=h,s[5]=u,s[6]=r,s[7]=o,s[8]=e,s[9]=n,s[10]=l):l=s[10];const g=l;let c;return s[11]!==u||s[12]!==g?(c={canDropConversation:u,onDropConversation:g},s[11]=u,s[12]=g,s[13]=c):c=s[13],c}function Qo(n){"use forget";const e=U.c(37),{clientThreadId:s,gizmoId:o,currentModelId:r,onRequestCompletion:i}=n,{data:a}=vs(o),d=z.useContext(js),u=Ss(d),f=It(Cs),{onDropConversation:h,canDropConversation:l}=ct(void 0,o),[g,c]=z.useState(!1);let p;e[0]!==l?(p=T=>{T.preventDefault(),l&&c(!0)},e[0]=l,e[1]=p):p=e[1];let x;e[2]!==l||e[3]!==h?(x=T=>{T.preventDefault(),l&&(c(!1),h())},e[2]=l,e[3]=h,e[4]=x):x=e[4];let v,m;e[5]!==l?(v=T=>{T.preventDefault(),l&&c(!0)},m=T=>{T.preventDefault(),l&&c(!1)},e[5]=l,e[6]=v,e[7]=m):(v=e[6],m=e[7]);const j=u?"last-standard":"none",_=f?"none":"standard";let I;e[8]!==a?(I=t.jsx($o,{gizmo:a}),e[8]=a,e[9]=I):I=e[9];let S;e[10]!==s||e[11]!==r||e[12]!==a||e[13]!==i?(S=a?t.jsx(zo,{clientThreadId:s,isNewThread:!0,currentModelId:r,onContinueGenerating:T=>i(fn(T)),onRequestCompletion:async T=>i(await hn(T)),hideHeader:!0}):t.jsx("div",{className:"bg-token-tertiary h-24 w-full rounded-3xl"}),e[10]=s,e[11]=r,e[12]=a,e[13]=i,e[14]=S):S=e[14];let M,P;e[15]!==a?(P=t.jsx(Eo,{gizmo:a}),M=a&&t.jsx(Ko,{gizmo:a}),e[15]=a,e[16]=M,e[17]=P):(M=e[16],P=e[17]);let k;e[18]!==a?.gizmo||e[19]!==g?(k=g&&t.jsxs(Je,{children:[t.jsx(Gt,{className:"h-12 w-12",style:{color:"#3C46FF"}}),t.jsx("h3",{className:"text-center",children:t.jsx(C,{...b.addConversationToNamedSnorlax,values:{projectName:a?.gizmo.display.name??"project"}})}),t.jsx("h4",{className:"text-center",children:t.jsx(C,{...b.moveConversation})})]}),e[18]=a?.gizmo,e[19]=g,e[20]=k):k=e[20];let E;e[21]!==M||e[22]!==k||e[23]!==I||e[24]!==S||e[25]!==P?(E=t.jsxs(pn,{className:"[width:min(90cqw,var(--thread-content-max-width))]",children:[I,S,P,M,k]}),e[21]=M,e[22]=k,e[23]=I,e[24]=S,e[25]=P,e[26]=E):E=e[26];let N;e[27]!==E||e[28]!==j||e[29]!==_?(N=t.jsx(xn,{verticalMargin:"none",verticalPadding:j,horizontalPadding:_,children:E}),e[27]=E,e[28]=j,e[29]=_,e[30]=N):N=e[30];let D;return e[31]!==p||e[32]!==N||e[33]!==x||e[34]!==v||e[35]!==m?(D=t.jsx("div",{onDragOver:p,onDrop:x,onDragEnter:v,onDragLeave:m,className:"flex max-h-full min-h-full flex-col pt-(--header-height)",children:N}),e[31]=p,e[32]=N,e[33]=x,e[34]=v,e[35]=m,e[36]=D):D=e[36],D}function Yo(n){return n.preventDefault()}const Ci=Object.freeze(Object.defineProperty({__proto__:null,SnorlaxSplashScreen:Qo,useProjectsDragDrop:ct},Symbol.toStringTag,{value:"Module"})),Zo=Fe(()=>Ee(()=>import("./bd5pjq3kc7qmzp75.js"),__vite__mapDeps([0,1,2,3,4])).then(n=>n.SnorlaxFolderAnimation),{loading:({color:n,isSharedProject:e})=>t.jsx(dt,{color:n,isSharedProject:e})}),Jo={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function ei(n){"use forget";const e=U.c(20),{color:s,folderState:o,gizmoId:r,sidebarSnorlaxFolderStore:i,isSharedProject:a}=n,d=q(),[u,f]=z.useState(!1);let h;e[0]!==o||e[1]!==d?(h=d.formatMessage(o==="open"?b.hideChatsForProjectTooltip:b.showChatsForProjectTooltip),e[0]=o,e[1]=d,e[2]=h):h=e[2];let l;e[3]!==o||e[4]!==r||e[5]!==i?(l=j=>{j.preventDefault(),o==="open"?i.collapseProject(r):i.expandProject(r)},e[3]=o,e[4]=r,e[5]=i,e[6]=l):l=e[6];let g,c;e[7]===Symbol.for("react.memo_cache_sentinel")?(g=()=>f(!0),c=()=>f(!1),e[7]=g,e[8]=c):(g=e[7],c=e[8]);const p=o==="open";let x;e[9]!==s||e[10]!==u||e[11]!==a||e[12]!==p?(x=t.jsx(Zo,{isOpen:p,isHovered:u,color:s,isSharedProject:a}),e[9]=s,e[10]=u,e[11]=a,e[12]=p,e[13]=x):x=e[13];let v;e[14]!==l||e[15]!==x?(v=t.jsx("button",{className:"icon",onClick:l,onMouseEnter:g,onMouseLeave:c,children:x}),e[14]=l,e[15]=x,e[16]=v):v=e[16];let m;return e[17]!==h||e[18]!==v?(m=t.jsx(be,{label:h,triggerAs:null,children:v}),e[17]=h,e[18]=v,e[19]=m):m=e[19],m}function dt(n){"use forget";const e=U.c(5),{color:s,isSharedProject:o}=n,r=o?Mn:Ye;let i;e[0]!==s?(i={color:s},e[0]=s,e[1]=i):i=e[1];let a;return e[2]!==r||e[3]!==i?(a=t.jsx(r,{className:"icon",style:i}),e[2]=r,e[3]=i,e[4]=a):a=e[4],a}function bi(n){"use forget";const e=U.c(104),{gizmo:s,historyDisabled:o,flair:r,onClick:i,isActive:a,hideOverflowMenu:d,inGPTDropdown:u}=n,f=d===void 0?!1:d,h=u===void 0?!1:u,l=B(),{clientThreadId:g}=Rt(),c=st(g),p=xe(),x=q();let v;e[0]!==l?(v=_t(l),e[0]=l,e[1]=v):v=e[1];const m=v,j=s.gizmo.id,_=Pe.useStore();let I;e[2]!==j?(I=F=>Pe.selectFolderState(F,j),e[2]=j,e[3]=I):I=e[3];const S=Pe.useState(I);let M;e[4]!==s.gizmo.tags?(M=s.gizmo.tags?.includes(_s.FirstParty),e[4]=s.gizmo.tags,e[5]=M):M=e[5];const P=!!M,{items:k,hasNextPage:E}=At(s.gizmo.id);let N;e[6]!==k?(N=k===void 0?[]:k,e[6]=k,e[7]=N):N=e[7];const D=N,T=at(j),J=Ot(s);let ee;e[8]!==j||e[9]!==m.projects?(ee=()=>m.projects.renamingProjectId$()===j,e[8]=j,e[9]=m.projects,e[10]=ee):ee=e[10];const A=zt(ee),O=a&&(!T||!(S==="open"&&c)),K=z.useRef(S);let X,w;e[11]!==S?(w=()=>{K.current=S},X=[S],e[11]=S,e[12]=X,e[13]=w):(X=e[12],w=e[13]),z.useEffect(w,X);let L,$;e[14]!==j||e[15]!==a||e[16]!==c||e[17]!==_?(L=()=>{K.current!=="open"&&a&&c&&_.expandProject(j)},$=[a,c,_,j],e[14]=j,e[15]=a,e[16]=c,e[17]=_,e[18]=L,e[19]=$):(L=e[18],$=e[19]),z.useEffect(L,$);let R;if(s!=null)R=s.gizmo.display.name||Tn;else if(o){let F;e[20]!==x?(F=x.formatMessage(Ut.clearChat),e[20]=x,e[21]=F):F=e[21],R=F}else R=Fn;const[H,Ae]=z.useState();let Q;e[22]===Symbol.for("react.memo_cache_sentinel")?(Q=()=>{Ae(void 0)},e[22]=Q):Q=e[22];let se;e[23]!==s?(se=[s],e[23]=s,e[24]=se):se=e[24],z.useEffect(Q,se);const Oe=De(),[te,Le]=z.useState(!1),{canDropConversation:ne,onDropConversation:Re}=ct("sidebar_row_button",j);let ye;e[25]!==m.composer||e[26]!==m.projects?(ye=()=>{z.startTransition(()=>{mt(()=>{m.composer.reset(),m.projects.reset()})})},e[25]=m.composer,e[26]=m.projects,e[27]=ye):ye=e[27];const Ie=ye;let _e;e[28]!==Ie||e[29]!==l||e[30]!==s.gizmo.id||e[31]!==a||e[32]!==A||e[33]!==R||e[34]!==p||e[35]!==H||e[36]!==Oe?(_e=A?t.jsx(En,{initialValue:R,onCommit:async F=>{Ae(F),Ie();const{resource:je}=await Oe.mutateAsync({update:{name:F},id:s.gizmo.id});je&&a&&p(Xe(l,je),{replace:!0})},onCancel:Ie}):H??R,e[28]=Ie,e[29]=l,e[30]=s.gizmo.id,e[31]=a,e[32]=A,e[33]=R,e[34]=p,e[35]=H,e[36]=Oe,e[37]=_e):_e=e[37];const Ue=_e,Be=h&&!T?y.LinkItem:Pn,ze=(s?.gizmo?.sharing?.subjects?.length??0)>0,$e=te&&"[&>*]:pointer-events-none";let oe;e[38]!==$e?(oe=Z($e),e[38]=$e,e[39]=oe):oe=e[39];let ie;e[40]!==ne||e[41]!==Re?(ie=F=>{ne&&(F.preventDefault(),F.stopPropagation(),Le(!1),Re())},e[40]=ne,e[41]=Re,e[42]=ie):ie=e[42];let ae;e[43]!==ne||e[44]!==T?(ae=F=>{ne&&F.target===F.currentTarget&&T&&(F.preventDefault(),Le(!0))},e[43]=ne,e[44]=T,e[45]=ae):ae=e[45];let Me;e[46]===Symbol.for("react.memo_cache_sentinel")?(Me=F=>{F.target===F.currentTarget&&Le(!1)},e[46]=Me):Me=e[46];let re;e[47]!==l||e[48]!==s?(re=Xe(l,s),e[47]=l,e[48]=s,e[49]=re):re=e[49];let le;e[50]!==j||e[51]!==m.composer||e[52]!==m.projects.renamingProjectId$?(le=()=>{mt(()=>{m.projects.renamingProjectId$.set(j),m.composer.autofocusDisabled$.set(!0)})},e[50]=j,e[51]=m.composer,e[52]=m.projects.renamingProjectId$,e[53]=le):le=e[53];let ce;e[54]!==s.gizmo.id||e[55]!==i?(ce=F=>{const je=s?.gizmo.id??"primary";W.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:je}),W.logEvent("Sidebar Click Gizmo",{gizmo_id:je}),i?.(F)},e[54]=s.gizmo.id,e[55]=i,e[56]=ce):ce=e[56];let de;e[57]!==J||e[58]!==S||e[59]!==j||e[60]!==s.gizmo.display||e[61]!==P||e[62]!==ze||e[63]!==T||e[64]!==_||e[65]!==D?(de=T?D.length>0?t.jsx(ei,{color:J,folderState:S,gizmoId:j,sidebarSnorlaxFolderStore:_,isSharedProject:ze}):t.jsx(dt,{color:J,isSharedProject:ze}):t.jsx(wn,{simple:!0,isFirstParty:P,src:s?.gizmo.display.profile_picture_url,className:"icon",alt:""}),e[57]=J,e[58]=S,e[59]=j,e[60]=s.gizmo.display,e[61]=P,e[62]=ze,e[63]=T,e[64]=_,e[65]=D,e[66]=de):de=e[66];let me;e[67]!==r?(me=r===Mt.Workspace&&t.jsx(ti,{}),e[67]=r,e[68]=me):me=e[68];let ue;e[69]!==r||e[70]!==s||e[71]!==f||e[72]!==a||e[73]!==A||e[74]!==T||e[75]!==te?(ue=!f&&!te&&!A&&(T?t.jsx(ni,{gizmoResource:s,isActive:a}):t.jsx(si,{gizmoResource:s,flair:r})),e[69]=r,e[70]=s,e[71]=f,e[72]=a,e[73]=A,e[74]=T,e[75]=te,e[76]=ue):ue=e[76];let ge;e[77]!==Be||e[78]!==Ue||e[79]!==O||e[80]!==te||e[81]!==oe||e[82]!==ie||e[83]!==ae||e[84]!==re||e[85]!==le||e[86]!==ce||e[87]!==de||e[88]!==me||e[89]!==ue?(ge=t.jsx(Be,{className:oe,highlighted:te,onDrop:ie,onDragEnter:ae,onDragLeave:Me,to:re,onDoubleClick:le,onClick:ce,active:O,icon:de,label:Ue,trailing:me,highlightTrailing:ue}),e[77]=Be,e[78]=Ue,e[79]=O,e[80]=te,e[81]=oe,e[82]=ie,e[83]=ae,e[84]=re,e[85]=le,e[86]=ce,e[87]=de,e[88]=me,e[89]=ue,e[90]=ge):ge=e[90];let he;e[91]!==S||e[92]!==s||e[93]!==E||e[94]!==T||e[95]!==c||e[96]!==O||e[97]!==D?(he=T&&S==="open"&&D.length>0&&t.jsx(ss.div,{initial:"closed",animate:"open",exit:"closed",variants:Jo,className:"overflow-hidden",children:t.jsx(kn,{gizmoResource:s,serverThreadId:c,isOnProjectPage:O,conversations:D,hasNextPage:E})},"nested-conversations"),e[91]=S,e[92]=s,e[93]=E,e[94]=T,e[95]=c,e[96]=O,e[97]=D,e[98]=he):he=e[98];let fe;e[99]!==he?(fe=t.jsx(ns,{initial:!1,children:he}),e[99]=he,e[100]=fe):fe=e[100];let Te;return e[101]!==ge||e[102]!==fe?(Te=t.jsxs(t.Fragment,{children:[ge,fe]}),e[101]=ge,e[102]=fe,e[103]=Te):Te=e[103],Te}const ti=()=>{const n=q(),e=Tt(),s=e?.name?n.formatMessage({id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"},{workspace_name:e.name??"Your Workspace"}):n.formatMessage({id:"gizmo.workspaceRecommended.noWorkplaceName",defaultMessage:"Recommended at your workplace"});return t.jsx(be,{side:"right",label:s,children:t.jsx(Nn,{className:"icon",alt:s})})},Qt=Fe(()=>Ee(()=>import("./ih4emx2c6pvtq9at.js"),__vite__mapDeps([5,1,2,3,6,7,8])).then(n=>n.GizmoKeepInSidebarMenuItem)),si=n=>{"use forget";const e=U.c(10),{gizmoResource:s,flair:o}=n,r=et();let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx(Pt,{onMouseOver:oi,icon:kt}),e[0]=i):i=e[0];let a;e[1]!==o||e[2]!==s||e[3]!==r?(a=o===Mt.Recent&&t.jsx(y.Item,{onClick:()=>{wt.updateGizmoSidebar(r,zs,s.gizmo.id,"keep","sidebar")},children:t.jsx(C,{...Ut.keepInSidebar})}),e[1]=o,e[2]=s,e[3]=r,e[4]=a):a=e[4];let d;e[5]!==s?(d=t.jsx(Qt,{gizmoResource:s,location:"sidebar"}),e[5]=s,e[6]=d):d=e[6];let u;return e[7]!==a||e[8]!==d?(u=t.jsxs(Ge,{triggerButton:i,contentAlign:"start",sideOffset:-4,alignOffset:-8,size:"auto",children:[a,d]}),e[7]=a,e[8]=d,e[9]=u):u=e[9],u},ni=n=>{"use forget";const e=U.c(24),{gizmoResource:s,isActive:o}=n,r=B(),i=xe();let a;e[0]!==r?(a=_t(r),e[0]=r,e[1]=a):a=e[1];const d=a,{canEdit:u}=ve(s),{canDelete:f}=Ms(s);let h;e[2]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx(Pt,{icon:kt}),e[2]=h):h=e[2];let l;e[3]!==s.gizmo.id||e[4]!==d.composer.autofocusDisabled$||e[5]!==d.projects.renamingProjectId$?(l=()=>{d.composer.autofocusDisabled$.set(!0),d.projects.renamingProjectId$.set(s.gizmo.id)},e[3]=s.gizmo.id,e[4]=d.composer.autofocusDisabled$,e[5]=d.projects.renamingProjectId$,e[6]=l):l=e[6];const g=!u;let c,p;e[7]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(ot,{className:"icon-sm"}),p=t.jsx(C,{...b.editProjectNameDropdownButton}),e[7]=c,e[8]=p):(c=e[7],p=e[8]);let x;e[9]!==l||e[10]!==g?(x=t.jsxs(y.Item,{onClick:l,disabled:g,children:[c,p]}),e[9]=l,e[10]=g,e[11]=x):x=e[11];let v;e[12]!==r||e[13]!==s.gizmo.id||e[14]!==o||e[15]!==i?(v=S=>{S.preventDefault(),S.stopPropagation();const M=function(k){k(),o&&i("/")};V(r,P=>{const{onClose:k}=P;return t.jsx(Gn,{gizmoId:s.gizmo.id,onError:void 0,onSuccess:()=>M(k),onClose:()=>{k()}})})},e[12]=r,e[13]=s.gizmo.id,e[14]=o,e[15]=i,e[16]=v):v=e[16];const m=!f;let j;e[17]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx(C,{...b.deleteProjectDropdownButton}),e[17]=j):j=e[17];let _;e[18]!==v||e[19]!==m?(_=t.jsx(y.Item,{color:"danger",onClick:v,icon:Bt,disabled:m,children:j}),e[18]=v,e[19]=m,e[20]=_):_=e[20];let I;return e[21]!==_||e[22]!==x?(I=t.jsx(t.Fragment,{children:t.jsxs(Ge,{triggerButton:h,contentAlign:"start",sideOffset:-4,alignOffset:-8,size:"auto",children:[x,_]})}),e[21]=_,e[22]=x,e[23]=I):I=e[23],I};function oi(){return Qt.prefetch()}function ii(n){const e=q(),s=et(),o=B(),r=Ts(o).checkGate("3728943795")&&!n.inSidebarFlyout,{canCreate:i}=ws(),a=xe(),[d,u]=z.useState(!1),{snorlaxes:f,hasNextPage:h,fetchNextPage:l,isLoading:g,isFetchingNextPage:c,isError:p}=$t(),v=(n.inSidebarFlyout?f.slice(Dn):f).filter(({gizmo:I})=>I.gizmo.id!==n.currentGizmoId),m=v.length===0,j=z.useRef(null),_=z.useCallback(I=>{g||I==null||(j.current?.disconnect(),j.current=new IntersectionObserver(S=>{S[0].isIntersecting&&h&&l()}),j.current.observe(I))},[g,h,l]);return z.useEffect(()=>()=>{j.current?.disconnect()},[]),t.jsxs("div",{ref:m&&!p?_:void 0,children:[m&&g&&t.jsxs(Ps,{children:[t.jsx(y.Shimmer,{}),t.jsx(y.Shimmer,{})]}),m&&p&&t.jsxs("div",{className:"text-token-text-tertiary p-3 text-center italic",children:[e.formatMessage(b.unableToLoadHistory),!d&&t.jsx("div",{className:"mt-1",children:t.jsx(pe,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{u(!0),An(s)},children:e.formatMessage(b.retryLoadingHistory)})})]}),r&&i&&t.jsx(t.Fragment,{children:t.jsx(y.Item,{icon:Gt,label:t.jsx(C,{...b.newProjectButton}),onSelect:()=>{V(o,({onClose:I})=>t.jsx(it,{onClose:I,onSuccess:async S=>{S&&(await n.onUpdateConversationGizmo(S),a(`/g/${S}/project`))}}))}})}),!g&&!m&&v.map(({gizmo:I},S)=>{const M=S===v.length-1?_:void 0;return t.jsxs(t.Fragment,{children:[r&&S===0&&t.jsx(y.Separator,{}),t.jsx(y.LinkItem,{to:I!=null?Xe(o,I):"/",icon:t.jsx(dt,{color:I.gizmo.display.theme}),label:I.gizmo.display.name,onClick:()=>{n.inSidebarFlyout||n.onUpdateConversationGizmo(I.gizmo.id)},ref:M},I.gizmo.id)]})}),c&&t.jsxs(t.Fragment,{children:[t.jsx(y.Shimmer,{}),t.jsx(y.Shimmer,{})]})]})}const jt=St.memo(ii),ai=Fe(()=>Ee(()=>import("./isob33hcu783pyvb.js"),__vite__mapDeps([9,1,2,3]))),ri=Fe(()=>Ee(()=>import("./ih4emx2c6pvtq9at.js"),__vite__mapDeps([5,1,2,3,6,7,8])).then(n=>n.GizmoKeepInSidebarMenuItem));function li({children:n,clientThreadId:e,gizmoResource:s,showReportModal:o,inMobileHeader:r,showGizmoModelPicker:i}){return t.jsx(t.Fragment,{children:t.jsx(Ge,{contentAlign:r?"center":"start",size:"small",triggerButton:n,children:t.jsx(Yt,{clientThreadId:e,gizmoResource:s,showReportModal:o,showGizmoModelPicker:i})})})}function Yt({clientThreadId:n,gizmoResource:e,showReportModal:s,showGizmoModelPicker:o}){const{canEdit:r}=ks(e),{canCreate:i}=Ns(),{canViewConfig:a}=Fs(e),d=Es(e.gizmo.id),u=Nt(),f=Gs(e),h=e.gizmo.share_recipient===ut.Marketplace||e.gizmo.share_recipient===ut.Link,l=!f&&h,g=B(),p=Se(g,"1825130190")&&!f&&Ds(e),x=u?.includes(Ze.GizmoSupportEmails)&&!f&&e.gizmo.author.will_receive_support_emails&&p,v=As(),m=st(n),j=Ht(Ze.WorkspaceShareLinks),{isUnauthenticated:_}=nt(),I=j&&m&&!_,S=xe(),M=Tt();return t.jsxs(t.Fragment,{children:[t.jsx(On,{show:o,clientThreadId:n,gizmoHasCustomActions:Ln(e.tools),preferredModelId:e.gizmo.default_model??void 0}),t.jsx(y.Item,{onClick:()=>{W.logNewChatButtonClicked({location:"Gizmo information dropdown",gizmo_id:e.gizmo.id}),Wt(S,`/g/${e.gizmo.short_url}`)},icon:Vt,children:t.jsx(C,{...G.newChat})}),t.jsx(y.Item,{onClick:()=>V(g,Rn,{gizmoId:e.gizmo.id,creatorId:e.gizmo.author.user_id}),icon:Os,children:t.jsx(C,{...G.about})}),e.tools?.find(P=>P.type===Ls.JIT_PLUGIN)&&t.jsx(y.Item,{onClick:()=>V(g,Bn,{gizmo:e}),icon:Un,children:t.jsx(C,{...G.privacySettings})}),r&&t.jsx(y.Item,{onClick:()=>{S(d)},icon:Rs,children:t.jsx(C,{...G.customize})}),!r&&a&&t.jsxs(t.Fragment,{children:[t.jsx(y.Item,{onClick:async()=>{S(`/g/${e.gizmo.id}/view`)},icon:$n,children:t.jsx(C,{id:"GizmoInformation.viewGizmoLabel",defaultMessage:"View configuration"})}),i&&t.jsx(y.Item,{onClick:async()=>{const P=await wt.copyGizmo({gizmoId:e.gizmo.id});P.gizmo.id&&S(`/gpts/editor/${P.gizmo.id}`)},icon:Hn,children:t.jsx(C,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})})]}),t.jsx(ri,{gizmoResource:e,location:"conversation_page"}),t.jsx(Vn,{gizmoResource:e}),x&&t.jsx(y.Item,{onClick:()=>V(g,qn,{gizmo:e}),icon:Wn,children:t.jsx(C,{...G.feedbackEmail})}),p&&t.jsx(y.Item,{onClick:()=>V(g,Xn,{gizmo:e}),icon:Kn,children:t.jsx(C,{...G.reviewGPT})}),l&&t.jsx(y.Item,{onClick:s,icon:qt,children:t.jsx(C,{...G.reportGPT})}),I&&t.jsx(y.Item,{onClick:()=>Ce.openSharingModal(m),icon:ke,children:t.jsx(C,{...G.shareChat})}),v&&t.jsxs(t.Fragment,{children:[t.jsx(y.Separator,{}),t.jsx(y.Item,{color:"danger",onClick:()=>{V(g,({onClose:P})=>t.jsx(ai,{gpt:e,account:M,isOpen:!0,onClose:P}))},icon:Us,children:t.jsx(C,{defaultMessage:"Remove GPT from workspace",id:"GizmoInformation.removeGPT"})})]}),u?.includes("debug")&&t.jsxs(t.Fragment,{children:[t.jsx(y.Separator,{}),t.jsx(y.Item,{onClick:()=>{S(Bs(e))},children:"(Internal) See share page"})]})]})}const ci=({conversation:n,isActiveConversation:e,inMainScreen:s=!1,inChatWindow:o=!1,inOrla:r=!1})=>{const i=B(),a=n.id,d=n.gizmo_id,u=at(d),f=Se(i,"3376455464"),h=Se(i,"16480203"),l=Se(i,"1693134918"),g=Se(i,"2560369700"),c=$s(a),p=Ht(Ze.WorkspaceShareLinks),{isUnauthenticated:x}=nt(),v=p&&c&&!x&&(!u||h),m=Qn(),[j,_]=z.useState(!!n.is_do_not_remember),I=tt(a,w=>w?.isStarred)??!!n.is_starred,S=q();let M=null;const{snorlaxes:P}=$t();M=P;let k=null;u&&M&&(k=M.find(({gizmo:w})=>w.gizmo.id===d)?.gizmo);const E=Et(),{mutate:N}=Yn(),D=et(),{eligible:T,markAsViewed:J}=Zn(Jn.ArchiveConversationOnboarding),ee=Ne(),A=xe(),O=async()=>{await Ws.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:n.id}},requestBody:{is_archived:!0}}),ro(D,n.gizmo_id),qs.logEvent("chatgpt_conversation_archived"),W.logEvent("Conversation Archived"),T&&(ee.info(S.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),J()),e&&Wt(A)},K=async()=>{const w=!I;N({conversation:n,isStarred:w}),W.logEvent(w?"Conversation Pinned":"Conversation Unpinned")},X=[v&&!o&&t.jsx(y.Item,{onClick:()=>Ce.openSharingModal(c,"History Item Menu"),icon:ke,"data-testid":"share-chat-menu-item",children:t.jsx(C,{...G.shareChat})},"share"),!1,!o&&!r&&t.jsx(y.Item,{disabled:!c,onClick:()=>{setTimeout(()=>{c&&Lt.publish({kind:s?"editTitleInMainScreen":"editTitle",serverThreadId:c})},100)},icon:ot,children:t.jsx(C,{...G.renameChat})},"rename"),m&&M&&M?.length>0&&Hs(d)&&c&&t.jsxs(St.Fragment,{children:[u&&t.jsxs(t.Fragment,{children:[M.length>1&&t.jsxs(y.Sub,{children:[t.jsx(y.SubMenuTrigger,{icon:Ye,children:t.jsx(C,{...b.moveConversationToSnorlax})}),t.jsx(y.Portal,{children:t.jsx(y.SubContent,{children:t.jsx(jt,{inSidebarFlyout:!1,onUpdateConversationGizmo:w=>E({newGizmoId:w,conversation:n,previousGizmoId:d??null}),currentGizmoId:d})})})]}),t.jsx(y.Item,{onClick:()=>{E({newGizmoId:null,conversation:n,previousGizmoId:d??null})},icon:eo,children:t.jsx("div",{className:"overflow-hidden text-ellipsis whitespace-nowrap",children:t.jsx(C,{...b.removeConversationFromSnorlax,values:{projectName:k?.gizmo.display.name??"project"}})})})]}),!u&&t.jsxs(y.Sub,{children:[t.jsx(y.SubMenuTrigger,{icon:Ye,children:S.formatMessage(b.addConversationToSnorlax)}),t.jsx(y.Portal,{children:t.jsx(y.SubContent,{children:t.jsx(jt,{inSidebarFlyout:!1,onUpdateConversationGizmo:w=>E({newGizmoId:w,conversation:n,previousGizmoId:d??null})})})})]})]},"snorlax")].filter(Boolean);return t.jsxs(t.Fragment,{children:[X,X.length>0&&t.jsx(y.Separator,{}),t.jsx(to,{children:({openScheduleModal:w,isScheduled:L,isSchedulable:$})=>$||L?t.jsx(y.Item,{onClick:w,disabled:!c,icon:so,children:t.jsx(C,{...L?G.editSchedule:G.scheduleTask})}):null}),!d&&l&&g&&t.jsx(y.Item,{disabled:!c,onClick:K,icon:I?no:oo,iconAriaLabel:S.formatMessage(I?G.unpinChat:G.pinChat),children:I?t.jsx(C,{...G.unpinChat}):t.jsx(C,{...G.pinChat})}),t.jsx(y.Item,{disabled:!c,onClick:()=>{c&&O()},icon:io,children:t.jsx(C,{...G.archiveChat})}),!1,f&&o&&t.jsx(y.Item,{icon:qt,onClick:()=>{Ce.openModal(Vs.ReportConversation)},children:d?t.jsx(C,{id:"thread.reportConversation",defaultMessage:"Report conversation"}):t.jsx(C,{id:"thread.report",defaultMessage:"Report"})}),t.jsx(y.Item,{color:"danger",disabled:!c,onClick:()=>{c&&V(i,ao,{serverThreadId:c,isActiveConversation:e})},icon:Bt,"data-testid":"delete-chat-menu-item",children:t.jsx(C,{...G.deleteChat})})]})};function Zt({clientThreadId:n,gizmoId:e,conversationTitle:s,conversationAsyncStatus:o,isDoNotRemember:r,isStarred:i}){return{id:n,title:s??"",create_time:null,update_time:null,conversation_template_id:null,async_status:o??null,gizmo_id:e??null,snippet:null,is_do_not_remember:r,is_starred:i}}const Jt=({conversation:n,children:e,isActiveConversation:s,onOpenChange:o,inMainScreen:r=!1,inChatWindow:i=!1,inOrla:a=!1,...d})=>{const[u,f]=z.useState(!1);return t.jsx(Ge,{...d,open:u,onOpenChange:h=>{f(h),o?.(h)},side:"bottom",contentAlign:i?"end":"start",alignOffset:i?0:-8,sideOffset:i?0:-4,triggerButton:e,size:"auto",children:u&&t.jsx(ci,{conversation:n,inMainScreen:r,isActiveConversation:s,inChatWindow:i,inOrla:a})})},G=Ct({newChat:{defaultMessage:"New chat",id:"GizmoInformation.newChat"},about:{defaultMessage:"About",id:"GizmoInformation.about"},privacySettings:{defaultMessage:"Privacy settings",id:"GizmoInformation.privacySettings"},viewDetails:{defaultMessage:"View details",id:"GizmoInformation.viewDetails"},share:{defaultMessage:"Share",id:"GizmoInformation.share"},favorite:{defaultMessage:"Favorite",id:"GizmoInformation.favorite"},customize:{defaultMessage:"Edit GPT",id:"GizmoInformation.customize"},feedbackEmail:{defaultMessage:"Send feedback",id:"GizmoInformation.feedbackEmail"},reviewGPT:{defaultMessage:"Review GPT",id:"GizmoInformation.reviewGPT"},report:{defaultMessage:"Report",id:"GizmoInformation.report"},reportGPT:{defaultMessage:"Report GPT",id:"GizmoInformation.reportGPT"},privacy:{defaultMessage:"Privacy",id:"GizmoInformation.privacy"},deleteChat:{defaultMessage:"Delete",id:"GizmoInformation.deleteChat.0"},debugChat:{defaultMessage:"(Internal) Debug",id:"GizmoInformation.debugChat"},renameChat:{defaultMessage:"Rename",id:"GizmoInformation.renameChat"},scheduleTask:{id:"7e1pG9",defaultMessage:"Schedule"},editSchedule:{id:"qzM4nO",defaultMessage:"Edit schedule"},archiveChat:{defaultMessage:"Archive",id:"GizmoInformation.archiveChat.0"},shareChat:{defaultMessage:"Share",id:"GizmoInformation.shareChat"},shareChatLong:{defaultMessage:"Share chat",id:"GizmoInformation.shareChatLong"},pinChat:{defaultMessage:"Pin chat",id:"GizmoInformation.pinChat"},unpinChat:{defaultMessage:"Unpin chat",id:"GizmoInformation.unpinChat"}}),yi=Object.freeze(Object.defineProperty({__proto__:null,GizmoConversationOptionsDropdown:Jt,GizmoInformationDropdown:li,GizmoInformationDropdownItems:Yt,buildConversationResponse:Zt},Symbol.toStringTag,{value:"Module"}));function Ii({showShareButton:n,showProfileDropdown:e,clientThreadId:s}){const o=B(),r=lo(o,s),i=st(s),a=q(),d=Ft(o,"1547743984"),[u,f,h,l,g,c]=tt(s,N=>[gt.hasUserMessage(N),gt.getGizmoId(N),yo(N),N?.title,N?.is_do_not_remember,N?.isStarred]),p=zt(()=>r.asyncStatus$()?.value),x=z.useMemo(()=>Zt({clientThreadId:s,gizmoId:f,conversationTitle:l,conversationAsyncStatus:p,isDoNotRemember:g,isStarred:c}),[s,f,l,p,g,c]),v=Ks(s),{prefetchSearchPromises:m}=Rt(),j=m!=null,_=It(Xs),I=d.get("show_share_button_text",!1)&&!_,S=a.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),M=()=>Ce.openSharingModal(i),P=at(f),k=Nt();Qs();const E=!we(o);return t.jsxs(t.Fragment,{children:[we(o)?t.jsx(co,{}):null,we(o)&&k?.includes("caterpillar")&&t.jsx(mo,{}),null,n&&i&&t.jsx(t.Fragment,{children:I?t.jsx(pe,{onClick:M,icon:ke,label:S,"data-testid":"share-chat-button",color:"ghost",className:"text-token-text-primary",style:{viewTransitionName:"var(--vt_share_chat_wide_button)"},children:S}):t.jsx(be,{label:a.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:t.jsx(rt,{"data-testid":"share-chat-button",onClick:M,icon:ke,style:{viewTransitionName:"var(--vt_share_chat_compact_button)"}})})}),t.jsxs("div",{className:"flex items-center",children:[!E&&!f&&v&&!j&&!u&&t.jsx(t.Fragment,{children:t.jsx(uo,{clientThreadId:s})}),t.jsx(go,{}),i!=null&&!E?t.jsx(Jt,{conversation:x,inMainScreen:!0,isActiveConversation:!0,inChatWindow:!0,children:t.jsx(ho,{"aria-label":a.formatMessage({id:"9Mk/E3",defaultMessage:"Open conversation options"}),"data-testid":"conversation-options-button"})}):f&&P?t.jsx(fo,{gizmoId:f}):null,e&&t.jsx(di,{clientThreadId:s})]})]})}const di=({clientThreadId:n})=>{const e=B();return pt.markStart("LoginOrProfileMenu"),pt.markRendered("LoginOrProfileMenu"),t.jsxs(t.Fragment,{children:[!we(e)&&t.jsx(gi,{}),t.jsx(po,{clientThreadId:n})]})};function mi({onClick:n,className:e,testId:s}){const r=q().formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return t.jsx(be,{label:r,className:Z("flex",e),children:t.jsx(rt,{onClick:i=>bo(i,n),icon:Vt,"aria-label":r,"data-testid":s,as:"link"})})}function _i({clientThreadId:n,hideNewChat:e=!1}){const s=Co({clientThreadId:n,location:"Navigation actions"});return tn()?t.jsxs("div",{className:"flex items-center",children:[t.jsx(ui,{}),!e&&t.jsx(mi,{onClick:s})]}):null}function ui(){const n=q(),e=en(),{isUnauthenticated:s}=nt(),o=vo(So,jo,!1,!0);return s||e?null:t.jsx(be,{label:n.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:t.jsx(rt,{"aria-label":n.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:()=>{Ce.setSidebarOpen(!0)},icon:o})})}function gi(){const n=B(),e=Ys(),s=xo(),o=Zs(hi.signUpCta),r=Js(),a=Ft(n,"3637408529").get("is_desktop_primary_auth_button_on_right",!1),d="Chat header",u=()=>{We(n,{authType:"login",callback:x=>{W.logLogInButtonClicked({location:d,provider:x})}})},f=()=>{We(n,{authType:"signup",callback:x=>{W.logSignUpButtonClicked({location:d,provider:x})}})},h=()=>{We(n,{authType:"login_or_signup",callback:x=>{W.logLoginOrSignUpButtonClicked({location:d,provider:x})}})},l=t.jsx(pe,{onClick:u,color:e?"primary":"secondary","data-testid":"login-button",className:Z(!e&&"screen-arch:hidden md:screen-arch:flex"),children:t.jsx(C,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),g=t.jsx(pe,{color:e?"secondary":"primary",onClick:f,"data-testid":"signup-button",className:Z(e&&"screen-arch:hidden md:screen-arch:flex"),children:t.jsx(C,{...o})},"signup"),c=t.jsx(pe,{color:"primary",onClick:h,"data-testid":"login-or-signup-button",className:Z(e&&"screen-arch:hidden md:screen-arch:flex"),children:t.jsx(C,{...r})},"signup"),p=s?[c]:e?[l,g]:[g,l];return t.jsx("div",{className:"flex items-center justify-center gap-2",children:a?p.reverse():p})}const hi=Ct({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{Ii as C,ui as E,bi as G,di as L,_i as N,jt as S,mi as a,gi as b,Ci as c,yi as d,ct as u};
//# sourceMappingURL=fz8lyjvdpywhlf94.js.map
