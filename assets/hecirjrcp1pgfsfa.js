import{r as d,j as e,M as u,b as w,e as M}from"./gg0tb34p9fzo1omt.js";import{mG as P,mH as C,ch as k,iT as S,bg as A,N as D,gO as f,d as I,m as F,bl as v,iR as x,mV as N,gP as E,bk as L,bp as U}from"./g670b8vtkhx0yc6d.js";import{cU as R,b6 as _,cV as T,S as a,cW as G,cX as W,cY as z}from"./forbprkns1cohsbl.js";import{S as H}from"./h431y4zi2z7ivdmh.js";function J({voice:s}){const[i,o]=d.useState(!1),t=P(),r=s.voice,c=s.preview_url,l=d.useRef({playPromise:null}).current,n=C(g=>g.isPlaying&&g.sourceUrl===c),p=k(),m=d.useCallback(async()=>{if(!t)return;const g={voice:r,source:c};S.previews.click(g);try{o(!0),t.changeSource(c),l.playPromise=t.play(),o(!1)}catch(V){S.previews.error(V,g),p.danger({defaultMessage:"Something went wrong playing preview",description:"Error message when message playing the preview fails"},{toastId:"voice_preview_player_play_error"})}},[t,c,r,l,p]),h=d.useCallback(()=>{t&&(l.playPromise?l.playPromise.then(()=>{t.stop(),l.playPromise=null}):t.stop())},[t,l]),b=d.useCallback(()=>{n?h():i||m()},[h,m,i,n]);return d.useEffect(()=>()=>{n&&h()},[s,n,h]),e.jsx(A,{onClick:b,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:i,icon:n?H:R,children:n?e.jsx(u,{id:"yGpEMJ",defaultMessage:"Stop"}):e.jsx(u,{id:"JwYDVp",defaultMessage:"Play"})})}function O(){const s=I();return F(s,"174366048")}function $(){const s=O(),i=D();if(!s)return null;const o=i?.length&&!i?.includes(_.VideoScreenSharing);return e.jsxs(e.Fragment,{children:[T()&&e.jsx(f,{children:e.jsx(B,{})}),e.jsx(f,{children:e.jsx(Y,{})}),o&&e.jsx(f,{children:e.jsx(X,{})})]})}function y(s,i=!1){const{data:o,isLoading:t}=L(s)||{},r=U(i);return{isLoading:t,value:o,setValue:c=>{r.mutate({setting:s,value:c})}}}function Y(){const{isLoading:s,value:i,setValue:o}=y(v.VoiceName),t=G(),r=W(),c=s?"":z(i,r),l=t.find(({voice:n})=>n===c);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(u,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),e.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[l?e.jsxs(e.Fragment,{children:[e.jsx(J,{voice:l}),e.jsx("div",{className:"h-4 border-s"})]}):null,e.jsxs(a.Root,{value:c,onValueChange:n=>o(n),disabled:s,children:[e.jsxs(a.Trigger,{children:[e.jsx(a.Value,{}),e.jsx(a.Icon,{})]}),e.jsx(a.Portal,{children:e.jsx(a.Content,{children:t.map(({voice:n,name:p})=>e.jsx(a.Item,{value:n,children:p},n))})})]})]})]})})})}function B(){const{isLoading:s,value:i,setValue:o}=y(v.VoiceMainLanguage);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(u,{id:"speechSettings.content.language",defaultMessage:"Spoken language"})}),e.jsxs(a.Root,{value:s?"":i??x.Auto,onValueChange:t=>o(t),disabled:s,children:[e.jsxs(a.Trigger,{children:[e.jsx(a.Value,{}),e.jsx(a.Icon,{})]}),e.jsx(a.Portal,{children:e.jsxs(a.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[e.jsx(a.Item,{value:x.Auto,children:e.jsx(u,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-detect"})}),Object.entries(x).filter(([t,r])=>r!==x.Auto).map(([t,r])=>e.jsx(a.Item,{value:r,className:"capitalize",children:t},r))]})})]})]}),e.jsx(N,{children:e.jsx(u,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}function X(){const s=w();return e.jsx(E,{label:s.formatMessage(j.voiceAndScreenSharing),enabled:!1,onChange:()=>{},disabled:!0,description:s.formatMessage(j.voiceAndScreenSharingDescription)})}const j=M({voiceAndScreenSharing:{id:"9dnywk",defaultMessage:"Voice and screen sharing"},voiceAndScreenSharingDescription:{id:"wjwSas",defaultMessage:"Sharing your screen and video while in voice mode has been disabled by your workspace administrator."}});export{$ as S,y as u};
//# sourceMappingURL=hecirjrcp1pgfsfa.js.map
