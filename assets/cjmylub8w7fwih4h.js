import{b as F,r as c,j as e,M as n,e as ie,L as Ue,f as Ie,A as Le,m as Ee,u as Xe,a as Ze}from"./gg0tb34p9fzo1omt.js";import{be as re,bT as Je,cY as K,dX as he,hx as _e,bU as O,j5 as et,c5 as b,P as V,R as Be,d as ze,ch as tt,eb as st,F as je,lu as at,s as ot,e as lt,cG as rt,fj as it,S as me,c6 as Ae,dR as nt,dj as dt,jQ as ct,n0 as ut,n1 as gt,y as mt,z as xt,lv as ht,bg as ve,G as ft,k2 as ke,m as pt,N as Mt,a1 as T}from"./g670b8vtkhx0yc6d.js";import{i as Oe,A as yt,i2 as Ct,bv as bt,hO as Tt,i3 as jt,i4 as vt,i5 as kt,d1 as St,i6 as wt,i7 as Pt,q as Nt,hU as Ut,b6 as ae,i8 as Se,i9 as It,cs as Lt,O as Et}from"./forbprkns1cohsbl.js";import{S as _t}from"./ddmtsa3894np76m7.js";import{H as Bt}from"./g4tl5lt9yqf20m4s.js";const Fe=yt.FirstTimeUsingUserContext;function zt(){const{eligible:s}=Oe(Fe);return s}const At=({onClose:s})=>{const a=F(),{markAsViewed:o}=Oe(Fe),i=c.useCallback(()=>{o(),s()},[o,s]);return e.jsxs(re,{testId:"modal-user-context-first-time",isOpen:!0,onClose:Je,size:"custom",className:"max-w-xl",type:"success",title:a.formatMessage(W.title),primaryButton:e.jsx(K.Button,{onClick:i,title:a.formatMessage(W.ok),color:"primary"}),children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[e.jsx("p",{children:e.jsx(n,{...W.body1})}),e.jsx("p",{children:e.jsx(n,{...W.body2})})]}),e.jsx("div",{className:"text-token-text-tertiary flex flex-col gap-3 text-sm",children:e.jsx("p",{children:e.jsx(n,{...W.legal1,values:{article:u=>e.jsx("a",{href:Bt,target:"_blank",className:"underline",rel:"noopener noreferrer",children:u})}})})})]})},W=ie({title:{id:"UserContextFirstTimeModal.title",defaultMessage:"Introducing Custom Instructions"},body1:{id:"UserContextFirstTimeModal.body1",defaultMessage:"Customize your interactions with ChatGPT by providing specific details and guidelines for your chats."},body2:{id:"UserContextFirstTimeModal.body2",defaultMessage:"Whenever you edit your custom instructions, they'll take effect in all new chats you create. Existing chats won't be updated."},legal1:{id:"UserContextFirstTimeModal.legal1",defaultMessage:"Your instructions will be used to make our models better unless you've opted out and may be shared with any plugins you've enabled. Visit our <article>Help Center</article> to learn more."},ok:{id:"UserContextFirstTimeModal.ok",defaultMessage:"OK"}});function le({primaryLabel:s,secondaryLabel:a,side:o="top",icon:i=e.jsx(_e,{className:"text-token-text-tertiary h-4 w-4"})}){return e.jsx(he,{interactive:!0,ariaLive:"polite",label:e.jsx("div",{children:s}),secondaryLabel:e.jsx("div",{children:a}),side:o,"aria-label":`${s} ${a}`,theme:"primary",customPaddingClassName:"p-2",customBorderClassName:"border border-token-border-default",labelTextAlign:"left",children:i})}function Ot({label:s,side:a="bottom"}){return e.jsx(he,{ariaLive:"polite",interactive:!0,label:e.jsx("div",{children:s}),side:a,children:e.jsx(_e,{tabIndex:0,className:"text-token-text-tertiary h-4 w-4"})})}function A({children:s,className:a,footer:o,title:i}){return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:O("flex flex-col gap-2",a),children:[e.jsx("div",{className:"text-body-small-emphasized [font-weight:500]",children:i}),s]}),o]})}function Ft(){return Ie({queryKey:["personalityTypeList"],experimental_prefetchInRender:!0,queryFn:()=>Be.safeGet("/personality_types")})}function Rt(){return null}function Gt(s){const{enabled:a,personalityType:o,hasFieldsChanged$:i,updateLocalUserContext:u}=s,{promise:g}=Ft();return e.jsx(et,{name:"PersonalityTypeSelect",fallback:e.jsx(Rt,{}),children:e.jsx(A,{className:"flex-row items-center justify-between",title:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(n,{id:"user-context-modal.personality.section",defaultMessage:"What personality should ChatGPT have?"}),e.jsx(le,{primaryLabel:e.jsx("div",{className:"text-muted p-2 text-sm font-medium",children:e.jsx(n,{...we.personalityOverview,values:{link:d=>e.jsx(Ue,{className:"underline",target:"_blank",rel:"noreferrer",to:we.personalityOverview.link,children:d},"personality-overview-link")}})})})]}),footer:o&&e.jsx(Dt,{enabled:a,personality:o,models:g}),children:e.jsx(Ht,{enabled:a,models:g,onSelect:d=>{u({personalityTypeMessage:d}),i.set(!0)},selectedModel:o})})})}const Dt=({enabled:s,personality:a,models:o})=>{const u=c.use(o).find(g=>g.key===a);return e.jsx("div",{className:O("text-body-small-regular text-token-text-secondary -mt-3 mb-3 w-full leading-4 text-pretty whitespace-pre [text-wrap-mode:wrap]",!s&&"opacity-15"),children:u?.footer_text})},Ht=({enabled:s,models:a,onSelect:o,selectedModel:i})=>{const[u,g]=c.useState(!1),d=c.use(a),p=F();return e.jsx(c.Suspense,{fallback:e.jsxs("div",{className:"mb-4",children:[e.jsx(b.Shimmer,{size:"short"}),e.jsx(b.Shimmer,{size:"short"}),e.jsx(b.Shimmer,{size:"short"}),e.jsx(b.Shimmer,{size:"short"})]}),children:e.jsxs(b.Root,{open:u,onOpenChange:r=>{g(r),r&&V.logEventWithStatsig("User Context: View Personalities","chatgpt_user_context_view_personalities")},children:[e.jsxs(b.Trigger,{className:"data-[state=open]:bg-token-bg-tertiary flex h-min w-fit items-center justify-between rounded-lg border px-3 py-2 text-start",id:"personality-select-trigger","aria-label":p.formatMessage({id:"user-context-modal.personality.select",defaultMessage:"Select personality"}),disabled:!s,children:[e.jsx("span",{children:d.find(r=>r.key===i)?.label??p.formatMessage({id:"user-context-modal.personality.default",defaultMessage:"Default"})}),e.jsx("svg",{className:"text-muted ms-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx(b.Portal,{children:e.jsx(b.Content,{size:"auto",alignOffset:-7,children:e.jsx(b.RadioGroup,{value:i??"default",onValueChange:r=>{o(r),g(!1)},children:d.map(r=>e.jsx(b.RadioItem,{color:i===r.key||!i&&r.key==="default"?"selected":"default",value:r.key,label:r.label,secondary:r.description},r.key))})})})]})})},we={personalityOverview:{id:"userContextModal.personality.overview",defaultMessage:"Personalities are groups of traits for ChatGPT. <link>Learn more</link>",description:"Tooltip explaining ChatGPT’s customizable behavioral traits under the Personality feature. Shows a link to learn more.",link:"https://help.openai.com/en/articles/11899719"}};function Wt({onSuccess:s,onError:a}){const o=Xe();return Ze({mutationFn:({userContext:i})=>gt(i),onSettled:(i,u)=>{const g=["userContext"];i!==null&&!u?o.setQueryData(g,i):o.invalidateQueries({queryKey:g})},onSuccess:s,onError:a})}const Pe={aboutUserMessage:void 0,aboutModelMessage:void 0,nameUserMessage:void 0,roleUserMessage:void 0,traitsModelMessage:void 0,otherUserMessage:void 0,disabledTools:void 0,enabled:void 0};function os({onClose:s}){const a=ze(),o=F(),i=tt(),u=zt(),g=st(t=>t.autoHighlightNicknameInput),d=je(a,"1922342873").get("can-select-personality",!1),[p,r]=c.useState(!1),[M,j]=c.useState(!0),{isLoading:h,data:y}=at(M),{aboutUserMessage:k="",aboutModelMessage:R="",personalityTypeMessage:v="",nameUserMessage:S="",roleUserMessage:w="",traitsModelMessage:C="",otherUserMessage:P="",disabledTools:E=[],enabled:L,...Y}=y??{},[$,Q]=c.useState({...Pe,...Y}),{aboutUserMessage:_,aboutModelMessage:X,nameUserMessage:N,roleUserMessage:m,traitsModelMessage:B,otherUserMessage:G,disabledTools:Z,enabled:D,personalityTypeMessage:ne}=$,U=D??!!L,[J,de]=c.useState(null),I=t=>{const f=(x,$e,Qe)=>x!==void 0?x:$e??Qe;Q(x=>({...x,...t,aboutUserMessage:f(t.aboutUserMessage,x.aboutUserMessage,k),personalityTypeMessage:f(t.personalityTypeMessage,x.personalityTypeMessage,v),aboutModelMessage:f(t.aboutModelMessage,x.aboutModelMessage,R),nameUserMessage:f(t.nameUserMessage,x.nameUserMessage,S),roleUserMessage:f(t.roleUserMessage,x.roleUserMessage,w),traitsModelMessage:f(t.traitsModelMessage,x.traitsModelMessage,C),otherUserMessage:f(t.otherUserMessage,x.otherUserMessage,P),enabled:f(t.enabled,x.enabled,U),disabledTools:f(t.disabledTools,x.disabledTools,E)}))},[z]=c.useState(()=>ot(!1)),Ge=lt(z),ee=c.useCallback(()=>{Q(Pe),de(null),z.set(!1),j(!1),s?.()},[z,s]),De=je(a,"1704793646").get("full_name_llm",!1),He=rt(),{isPending:ce,mutate:pe}=Wt({onSuccess:t=>{mt.setCookie(xt.GreetingName,ht(t,He,De)),window.dispatchEvent(new Event("refreshGreeting")),ee()},onError:t=>(t.response?.reason==="content_policy"&&t.response?.field?de(t.response?.field):i.danger(o.formatMessage({id:"userContextModal.saveError",defaultMessage:"Failed to update settings"}),{loggingTitle:"Failed to update settings",toastId:"user_context_modal"}),t)}),[Me,ye]=c.useState(!1),[te,We]=c.useState(!1),[se,qe]=c.useState([]),ue=[N,m,B,G].some(t=>Re(t??"")),ge=[{local:N,server:S},{local:m,server:w},{local:B,server:C},{local:G,server:P}].some(({local:t,server:f})=>t!==void 0&&t!==f)||Z!==void 0&&!it(Z,E)||D!==void 0&&D!==L||Ge,Ce=c.useCallback(()=>{me.logEvent("chatgpt_user_context_cancel_clicked"),V.logEvent("User Context Cancel Clicked"),ge?ye(!0):ee()},[ee,ge]),be=c.useCallback(()=>{if(!ce){de(null),z.set(!1);const t={aboutUserMessage:_??"",aboutModelMessage:X??"",nameUserMessage:N??"",roleUserMessage:m??"",traitsModelMessage:B??"",otherUserMessage:G??"",disabledTools:Z??[],enabled:!!D,personalityTypeMessage:ne??""},f={name:S,role:w,traits:C,other:P,traitPillsSelected:se},x={name:t.nameUserMessage,role:t.roleUserMessage,traits:t.traitsModelMessage,other:t.otherUserMessage,personality:t.personalityTypeMessage,traitPillsSelected:se};V.logEvent("User Context Save Customize ChatGPT",{previousState:f,newState:x}),me.logEvent("chatgpt_user_context_save_custom_instructions",void 0,{previousState:JSON.stringify(f),newState:JSON.stringify(x)}),pe({userContext:t})}},[ce,z,_,X,N,m,B,G,Z,D,ne,S,w,C,P,se,pe]),H=c.useCallback(()=>{if(ue){i.danger(o.formatMessage(l.messageLimitError,{limit:fe}),{duration:4,hasCloseButton:!0,loggingTitle:"Message limit error",toastId:"user_context_modal",loggingDescription:l.messageLimitError.defaultMessage});return}be()},[o,ue,be,i]),[Te,Ke]=c.useState(0),[Ve,Ye]=c.useState(!0);if(c.useEffect(()=>{const t=setTimeout(()=>{Ye(!1)},1e3),f=setInterval(()=>{Ke(x=>(x+1)%xe.length)},5500);return()=>{clearInterval(f),clearTimeout(t)}},[]),u&&!p)return e.jsx(At,{onClose:()=>{r(!0)}});if(Me){const t=()=>{ye(!1),j(!0),me.logEvent("chatgpt_user_context_confirm_close_clicked"),V.logEvent("User Context Confirm Close Clicked")};return e.jsx(re,{testId:"modal-user-context-confirm-close",isOpen:Me,onClose:()=>{t(),s?.()},type:"success",title:o.formatMessage(l.confirmCloseTitle),primaryButton:e.jsx(K.Button,{title:o.formatMessage(l.confirmCloseOk),color:"danger",onClick:()=>{ee(),t()}}),secondaryButton:e.jsx(K.Button,{title:o.formatMessage(l.confirmCloseCancel),color:"secondary",onClick:()=>{t()}}),children:e.jsx("div",{className:"text-sm",children:e.jsx(n,{...l.confirmCloseBody})})},"confirm-close")}return e.jsxs(re,{testId:"modal-user-context",isOpen:M,onClose:Ce,contentClassName:"!p-0",type:"success",size:"custom",showCloseButton:!0,className:"max-w-lg",title:e.jsx(n,{...l.profileTitle}),description:e.jsxs("div",{className:"text-token-text-secondary flex flex-row items-center",children:[e.jsx("div",{className:"me-1",children:e.jsx(n,{...l.profileSubtitle})}),e.jsx(le,{primaryLabel:e.jsx("div",{className:"text-muted mx-3 mt-2 mb-2 text-sm font-normal",children:e.jsx(n,{...l.profileSubtitleTooltip,values:{link:t=>e.jsx(Ue,{className:"underline",target:"_blank",rel:"noreferrer",to:l.profileSubtitleTooltip.link??"",children:t},"profile-subtitle-tooltip-link")}})}),icon:e.jsx(Tt,{className:"text-token-text-tertiary h-4 w-4"})})]}),children:[e.jsxs("div",{className:"flex max-h-[60vh] flex-col gap-5 overflow-y-auto px-4 md:max-h-[calc(100vh-300px)]",children:[h&&e.jsx(Ae,{}),e.jsx(A,{title:e.jsx(n,{...l.customizeName}),children:e.jsx(oe,{onSubmit:H,disabled:!U,name:"name_user_message",hasModError:J==="name_user_message",value:N??S,placeholder:o.formatMessage(l.customizeNamePlaceholder),onChange:t=>I({nameUserMessage:t.target.value}),size:"sm",showCharacterCount:!1,autoHighlight:g})}),e.jsx(A,{title:e.jsx(n,{...l.customizeRole}),children:e.jsxs("div",{className:"relative overflow-clip",children:[!(m??w)&&e.jsx(Le,{mode:"wait",children:e.jsx(Ee.span,{variants:Xt,initial:Ve?!1:"initial",animate:"animate",exit:"exit",className:"pointer-events-none absolute start-[0.81rem] top-[0.55rem] text-sm text-gray-400",children:o.formatMessage(Qt[xe[Te]])},xe[Te])}),e.jsx(oe,{onSubmit:H,name:"role_user_message",disabled:!U,hasModError:J==="role_user_message",value:m??w,placeholder:"",onChange:t=>I({roleUserMessage:t.target.value}),size:"sm",showCharacterCount:!1})]})}),d&&e.jsx(Gt,{enabled:U,personalityType:ne??v,updateLocalUserContext:I,hasFieldsChanged$:z}),e.jsxs(A,{className:"pb-2",title:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(n,{...l.customizeTraits}),e.jsx(le,{primaryLabel:e.jsx("div",{className:"text-muted mx-3 mt-3 mb-[6px] text-sm font-medium",children:e.jsx(n,{...l.traitsTooltipTitle})}),side:"bottom",secondaryLabel:e.jsxs("ul",{className:"text-muted text-token-text-primary mx-2 mb-3 list-disc justify-start space-y-[6px] ps-5 text-sm",children:[e.jsx("li",{children:e.jsx(n,{...l.traitsTooltipBodyItem1})}),e.jsx("li",{children:e.jsx(n,{...l.traitsTooltipBodyItem2})}),e.jsx("li",{children:e.jsx(n,{...l.traitsTooltipBodyItem3})})]})})]}),children:[e.jsx(oe,{onSubmit:H,name:"traits_model_message",disabled:!U,hasModError:J==="traits_model_message",value:B??C,placeholder:o.formatMessage(l.customizeTraitsPlaceholder),onChange:t=>I({traitsModelMessage:t.target.value}),size:"md",showCharacterCount:!1,isNewCustomInstructionsUIEnabled:!0}),e.jsx(Kt,{onSelect:t=>{I({traitsModelMessage:`${B??C} ${t}`.trim()})},selectedTraits:se,setSelectedTraits:qe})]}),e.jsx(A,{title:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(n,{...l.customizeOther}),e.jsx(le,{primaryLabel:e.jsx("div",{className:"text-muted mx-3 mt-3 mb-2 text-sm font-medium",children:e.jsx(n,{...l.otherTooltipTitle})}),secondaryLabel:e.jsxs("ul",{className:"text-muted text-token-text-primary mx-2 mb-3 list-disc justify-start space-y-[6px] ps-5 text-sm",children:[e.jsx("li",{children:e.jsx(n,{...l.otherTooltipBodyItem1})}),e.jsx("li",{children:e.jsx(n,{...l.otherTooltipBodyItem2})}),e.jsx("li",{children:e.jsx(n,{...l.otherTooltipBodyItem3})})]})})]}),children:e.jsx(oe,{onSubmit:H,disabled:!U,name:"other_user_message",hasModError:J==="other_user_message",value:G??P,placeholder:o.formatMessage(l.customizeOtherPlaceholder),onChange:t=>I({otherUserMessage:t.target.value}),size:"md",showCharacterCount:!1,isNewCustomInstructionsUIEnabled:!0})}),e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>We(t=>!t),"aria-label":o.formatMessage(te?l.advancedClose:l.advancedOpen),"data-testid":"advanced-toggle","aria-expanded":te,className:"text-body-small-emphasized flex items-center justify-between gap-1 pb-2 [font-weight:500]",children:[e.jsx(n,{...l.advanced}),te?e.jsx(Ct,{className:"icon-sm"}):e.jsx(bt,{className:"icon-sm"})]}),te&&e.jsx("div",{className:"mt-2",children:e.jsx(Vt,{disabledTools:$.disabledTools??E??[],onDisabledToolsChanged:t=>I({disabledTools:t}),isNewCustomInstructionsUIEnabled:!0})})]})]}),e.jsx("div",{className:"border-t",children:e.jsxs("div",{className:"flex min-h-21 items-center justify-between px-4",children:[e.jsxs("label",{className:"flex cursor-pointer flex-row items-center justify-between gap-2 pe-1",children:[e.jsx(nt,{checked:U,onCheckedChange:t=>{I({enabled:t})},"aria-label":U?o.formatMessage(l.disableToggleLabel):o.formatMessage(l.enableToggleLabel)}),e.jsx("div",{className:"text-token-text-primary self-center text-sm",children:e.jsx(n,{...l.chatPreferencesEnable})})]}),e.jsxs("footer",{className:"flex justify-end gap-2",children:[e.jsx(K.Button,{onClick:Ce,children:e.jsx(n,{...l.cancel})}),e.jsx(K.Button,{loading:ce,onClick:H,color:"primary",visuallyDisabled:ue,disabled:!ge,children:e.jsx(n,{...l.save})})]})]})})]},"user-context")}function qt(){return Ie({queryKey:["traitPills"],queryFn:async()=>{try{const s=await Be.safeGet("/user_system_message_trait_pills");return s?Array.isArray(s)?s:[]:[]}catch{return[...Yt.map(a=>({key:a,label:a,description:Ne[a].defaultMessage||""})),...$t.map(a=>({key:a,label:a,description:Ne[a].defaultMessage||""}))]}},select:s=>{const a=Math.ceil(s.length/2-1);return{firstSet:s.slice(0,a),secondSet:s.slice(a)}}})}const Kt=({onSelect:s,selectedTraits:a,setSelectedTraits:o})=>{const i=F(),{data:u,isLoading:g}=qt(),[d,p]=c.useState(!0);if(g)return e.jsx(Ae,{});if(!u)return null;const r=d?u.firstSet:u.secondSet,M=h=>{a.includes(h.key)||(o(y=>[...y,h.key]),s(h.description))},j=()=>{o([]),p(h=>!h)};return e.jsxs("ul",{className:"flex flex-wrap gap-x-1 gap-y-2",children:[r.map(h=>a.includes(h.key)?null:e.jsx("li",{children:e.jsxs(ve,{size:"small",color:"secondary",className:"text-token-text-secondary py-2 ps-2 pe-3 text-xs font-normal",onClick:()=>M(h),children:[e.jsx(Nt,{className:"icon-sm"}),h.label]})},h.label)),r.length>0&&e.jsx("li",{children:e.jsx(ve,{size:"small",color:"secondary","aria-label":i.formatMessage(l.traitsReset),className:"text-token-text-secondary h-8.5 w-8.5 rounded-full",onClick:j,children:e.jsx(Ut,{className:"icon-sm"})})})]})},fe=1500,Re=(s,a=fe)=>s.length>a,oe=({disabled:s,onChange:a,onSubmit:o,placeholder:i,value:u,name:g,tip:d,hasModError:p,className:r,size:M="md",showCharacterCount:j=!0,autoHighlight:h=!1,isNewCustomInstructionsUIEnabled:y=!1,maxLength:k=fe})=>{const R=F(),v=c.useRef(null);c.useEffect(()=>{h&&v.current&&requestAnimationFrame(()=>{v.current?.select(),dt.setAutoHighlightNicknameInput(!1)})},[h]);const S=ct(),w=ut(),C=!S,[P,E]=c.useState(!1),[L,Y]=c.useState(C),$=!C&&P&&!L,Q=C&&!L,_=Re(u,k),X=m=>{m.nativeEvent.isComposing||!s&&m.key==="Enter"&&m.metaKey&&!m.shiftKey&&!m.nativeEvent.isComposing&&(m.preventDefault(),o())},N=c.useRef(null);return e.jsxs(e.Fragment,{children:[d&&e.jsx(re,{testId:"modal-user-context-tip",isOpen:Q,type:"success",size:"custom",className:"max-w-lg",title:R.formatMessage(l.tipsHeader),showCloseButton:!0,onClose:()=>{Y(!0)},children:d}),e.jsxs(jt,{open:$,children:[e.jsxs("div",{className:r,ref:N,children:[e.jsx(vt,{asChild:!0,children:e.jsx("textarea",{ref:v,className:O("bg-token-main-surface-primary w-full resize-none focus:ring-transparent",{"rounded-sm p-4":M!=="sm"&&!y,"rounded-lg border text-sm":M==="sm"||y,"border-orange-400 focus:border-orange-400":p,"border-red-500 focus:border-red-500":_&&!p,"focus-token-border-heavy border-token-border-default":!_&&!p,"opacity-30":s,"placeholder:text-gray-400":M==="sm"||y,"placeholder:text-gray-300":!y}),name:g,disabled:s,placeholder:i,onKeyDown:X,rows:M==="sm"?1:S&&!w?6:5,value:u,onChange:a,onBlur:()=>{E(!1)},onFocus:()=>{E(!0)}})}),e.jsx("div",{className:O("flex items-center justify-between px-1 text-xs tabular-nums",_?"text-red-600":"text-token-text-tertiary"),children:p?e.jsx("div",{className:"visible mt-2 text-start text-xs text-orange-400",children:e.jsx(n,{...l.modApiVoilation,values:{policyLink:m=>e.jsx("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:m}),feedbackLink:m=>e.jsx("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:m})}})}):e.jsxs(e.Fragment,{children:[j&&e.jsx("div",{children:`${u.length}/${k}`}),d&&e.jsx("button",{className:"flex items-center gap-1",onClick:()=>{v.current?.focus(),Y(!L)},tabIndex:-1,children:e.jsx(Le,{initial:!1,children:P&&e.jsx(Ee.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:L?e.jsxs(e.Fragment,{children:[e.jsx(n,{...l.showTips}),e.jsx(kt,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{...l.hideTips}),e.jsx(St,{className:"icon-xs"})]})},"show-hide")})})]})})]}),d&&e.jsx(wt,{container:N.current?.ownerDocument.body,children:e.jsx(Pt,{side:"right",align:"start",sideOffset:12,className:"popover animate-slideLeftAndFade border-token-border-default bg-token-main-surface-primary text-token-text-primary relative z-50 max-w-[220px] rounded-xl border p-4 text-sm shadow-[0px_4px_14px_rgba(0,0,0,0.06)] select-none xl:max-w-xs",onOpenAutoFocus:m=>{m.preventDefault()},onCloseAutoFocus:m=>{m.preventDefault()},children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("strong",{children:e.jsx(n,{...l.tipsHeader})}),d]})})})]})]})};function Vt({disabledTools:s,onDisabledToolsChanged:a,isNewCustomInstructionsUIEnabled:o=!1}){c.useEffect(()=>{V.logEvent("User Context GPT-4 Capabilities Shown")},[]);const i=ze(),g=ft(i)?.isEnterprisey()??!1,d=!ke(ae.BrowsingAvailable)&&g,p=!pt(i,"934056609"),r=F(),M=k=>{const R=s.includes(k)?s.filter(v=>v!==k):[...s,k];a(R)},j=Mt(),h=!ke(ae.Canvas)&&g;var y;return j?.includes(ae.SearchTool)&&!j.includes(ae.SearchToolHoldout)?y=e.jsx(q,{title:r.formatMessage({id:"userContextModal.tools.web",defaultMessage:"Web Search"}),tooltipLabel:d?r.formatMessage({id:"Osf0vy",defaultMessage:"Web Search is disabled by your organization"}):r.formatMessage({id:"userContexModal.tools.webSearchTooltip",defaultMessage:"Automatically search the web to get answers"}),tool:T.BROWSER,onClick:M,Icon:Se,checked:!s.includes(T.BROWSER)&&!d,disabled:d,isNewCustomInstructionsUIEnabled:o}):y=e.jsx(q,{title:r.formatMessage({id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),tooltipLabel:d?r.formatMessage({id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}):r.formatMessage({id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"}),tool:T.BROWSER,onClick:M,Icon:Se,checked:!s.includes(T.BROWSER)&&!d,disabled:d,isNewCustomInstructionsUIEnabled:o}),e.jsx(A,{title:e.jsxs("div",{className:"flex items-center gap-1",children:[r.formatMessage({id:"userContextModal.gpt4CapabilitiesTitle",defaultMessage:"ChatGPT capabilities"}),e.jsx(Ot,{label:r.formatMessage({id:"userContextModal.tools.capabilitiesInfo.1",defaultMessage:"Choose which tools ChatGPT can use"}),side:"top"})]}),children:e.jsxs("ul",{className:"flex flex-wrap gap-3 pb-6","aria-label":r.formatMessage({id:"userContextModal.gpt4CapabilitiesToggle",defaultMessage:"Toggle ChatGPT capabilities"}),children:[y,e.jsx(q,{title:r.formatMessage({id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),tooltipLabel:r.formatMessage({id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}),tool:T.PYTHON,onClick:M,Icon:It,checked:!s.includes(T.PYTHON),isNewCustomInstructionsUIEnabled:o}),!h&&e.jsx(q,{title:r.formatMessage({id:"FW2C7Y",defaultMessage:"Canvas"}),tooltipLabel:r.formatMessage({id:"dP6U4B",defaultMessage:"Collaborate with ChatGPT on text and code"}),tool:T.CANMORE,onClick:M,Icon:Lt,checked:!s.includes(T.CANMORE),isNewCustomInstructionsUIEnabled:o}),p&&e.jsx(q,{title:r.formatMessage({id:"yaclI7",defaultMessage:"Advanced Voice"}),tooltipLabel:r.formatMessage({id:"Pd4tO1",defaultMessage:"More natural conversations in voice mode"}),tool:T.ADVANCED_VOICE,onClick:M,Icon:_t,checked:!s.includes(T.ADVANCED_VOICE),isNewCustomInstructionsUIEnabled:o})]})})}function q({tool:s,title:a,tooltipLabel:o,Icon:i,onClick:u,checked:g,disabled:d,isNewCustomInstructionsUIEnabled:p=!1}){return e.jsx("li",{"aria-label":a,children:e.jsx(he,{className:"block",label:o,side:"top",sideOffset:4,children:e.jsxs("button",{className:O("border-token-border-medium flex w-full items-center justify-between gap-2 rounded-lg border p-2 whitespace-nowrap",{"text-token-text-quaternary cursor-not-allowed":d}),"aria-expanded":g,tabIndex:-1,onClick:()=>u(s),disabled:d,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"text-token-text-tertiary h-4 w-4"}),e.jsx("div",{className:O("text-sm",p?"text-muted font-medium":"font-semibold"),children:a})]}),e.jsx(Et,{id:s,onChange:()=>{},checked:g&&!d,disabled:d})]})})})}const l=ie({traitsReset:{id:"userContextModal.traitsReset",defaultMessage:"Refresh traits"},tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?"},save:{id:"userContextModal.save",defaultMessage:"Save"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?"},profileTitle:{id:"userContextModal.title.1",defaultMessage:"Customize ChatGPT"},profileSubtitle:{id:"userContextModal.profileSubtitle",defaultMessage:"Introduce yourself to get better, more personalized responses"},profileSubtitleTooltip:{id:"userContextModal.profileSubtitleTooltip",defaultMessage:"ChatGPT will use the information you provide to tailor its responses to you. <link>Learn more</link> about how we use your data.",link:"https://help.openai.com/en/articles/8096356-custom-instructions-for-chatgpt"},customizeName:{id:"userContextModal.customizeName",defaultMessage:"What should ChatGPT call you?"},customizeNamePlaceholder:{id:"userContextModal.customizeNamePlaceholder",defaultMessage:"Nickname"},customizeRole:{id:"userContextModal.customizeRole",defaultMessage:"What do you do?"},customizeRolePlaceholder:{id:"userContextModal.customizeRolePlaceholder",defaultMessage:"Engineer, student, etc."},customizePersonality:{id:"userContextModal.customizePersonality",defaultMessage:"What personality should ChatGPT have?"},customizeTraits:{id:"userContextModal.customizeTraits",defaultMessage:"What traits should ChatGPT have?"},customizeTraitsPlaceholder:{id:"userContextModal.customizeTraitsPlaceholder",defaultMessage:"Describe or select traits"},customizeOther:{id:"userContextModal.customizeOther",defaultMessage:"Anything else ChatGPT should know about you?"},customizeOtherPlaceholder:{id:"userContextModal.customizeOtherPlaceholder",defaultMessage:"Interests, values, or preferences to keep in mind"},customInstructionsTitle:{id:"userContextModal.customInstructionsTitle",defaultMessage:"Custom Instructions"},customInstructionsTooltip:{id:"userContextModal.customInstructionsTooltip",defaultMessage:"<article>Learn more</article> about Custom Instructions and how they're used to help ChatGPT provide better responses."},traitsTooltipTitle:{id:"userContextModal.traitsTooltipTitle",defaultMessage:"You can tune ChatGPT's behavior by..."},traitsTooltipBodyItem1:{id:"userContextModal.traitsTooltipBodyItem1",defaultMessage:"Use a formal, professional tone."},traitsTooltipBodyItem2:{id:"userContextModal.traitsTooltipBodyItem2",defaultMessage:"Be casual and chatty."},traitsTooltipBodyItem3:{id:"userContextModal.traitsTooltipBodyItem3",defaultMessage:"Be opinionated. If a question could have multiple answers, try to give only the best one."},otherTooltipTitle:{id:"userContextModal.otherTooltipTitle",defaultMessage:"You can share things like..."},otherTooltipBodyItem1:{id:"userContextModal.otherTooltipBodyItem1",defaultMessage:"I love hiking and jazz."},otherTooltipBodyItem2:{id:"userContextModal.otherTooltipBodyItem2",defaultMessage:"I'm vegetarian."},otherTooltipBodyItem3:{id:"userContextModal.otherTooltipBodyItem3",defaultMessage:"I'm trying to learn French."},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less."},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes."},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost."},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink> — your input will aid our research in this area."},browser:{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"},dalle:{id:"userContexModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL·E"},python:{id:"userContexModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"},advanced:{id:"userContextModal.advanced",defaultMessage:"Advanced"},advancedOpen:{id:"userContextModal.advancedOpen",defaultMessage:"Open advanced settings"},advancedClose:{id:"userContextModal.advancedClose",defaultMessage:"Close advanced settings"}}),Yt=["Chatty","Witty","Opinionated","StraightShooting","GenZ","Encouraging","Skeptical","ForwardThinking"],$t=["Poetic","Respectful","Humble","Professional","Corporate","Direct","Silly","Pragmatic","Chill","OutsideTheBox"],Ne=ie({Chatty:{id:"userContextModal.chattySentence",defaultMessage:"Be talkative and conversational."},Witty:{id:"userContextModal.wittySentence",defaultMessage:"Use quick and clever humor when appropriate."},StraightShooting:{id:"userContextModal.straightShootingSentence",defaultMessage:"Tell it like it is; don't sugar-coat responses."},Encouraging:{id:"userContextModal.encouragingSentence",defaultMessage:"Use an encouraging tone."},GenZ:{id:"userContextModal.genZSentence",defaultMessage:"Talk like a member of Gen Z."},Skeptical:{id:"userContextModal.skepticalSentence",defaultMessage:"Adopt a skeptical, questioning approach."},ForwardThinking:{id:"userContextModal.forwardThinkingSentence",defaultMessage:"Take a forward-thinking view."},Poetic:{id:"userContextModal.poeticSentence",defaultMessage:"Use a poetic, lyrical tone."},Opinionated:{id:"userContextModal.opinionatedSentence",defaultMessage:"Readily share strong opinions."},Respectful:{id:"userContextModal.respectfulSentence",defaultMessage:"Always be respectful."},Humble:{id:"userContextModal.humbleSentence",defaultMessage:"Be humble when appropriate."},Professional:{id:"userContextModal.professionalSentence",defaultMessage:"Use a formal, professional tone."},Silly:{id:"userContextModal.sillySentence",defaultMessage:"Be playful and goofy."},Direct:{id:"userContextModal.directSentence",defaultMessage:"Get right to the point."},Pragmatic:{id:"userContextModal.pragmaticSentence",defaultMessage:"Be practical above all."},Corporate:{id:"userContextModal.corporateSentence",defaultMessage:"Respond with corporate jargon."},Chill:{id:"userContextModal.chillSentence",defaultMessage:"Keep it relaxed and easygoing."},OutsideTheBox:{id:"userContextModal.outsideTheBoxSentence",defaultMessage:"Be innovative and think outside the box."}}),Qt=ie({engineeringStudent:{id:"userContextModal.rolePlaceholder.engineeringStudent",defaultMessage:"Engineering student at University of Waterloo"},gastroenterologist:{id:"userContextModal.rolePlaceholder.gastroenterologist",defaultMessage:"Gastroenterologist"},sourdoughBaker:{id:"userContextModal.rolePlaceholder.sourdoughBaker",defaultMessage:"Small-batch home sourdough baker"},interiorDesigner:{id:"userContextModal.rolePlaceholder.interiorDesigner",defaultMessage:"Interior designer"},daycareManager:{id:"userContextModal.rolePlaceholder.daycareManager",defaultMessage:"Home daycare manager"},familyLawAttorney:{id:"userContextModal.rolePlaceholder.familyLawAttorney",defaultMessage:"Family law attorney"},excelWizard:{id:"userContextModal.rolePlaceholder.excelWizard",defaultMessage:"Excel wizard"},level10Mage:{id:"userContextModal.rolePlaceholder.level10Mage",defaultMessage:"Level 10 mage"},pharmaSales:{id:"userContextModal.rolePlaceholder.pharmaSales",defaultMessage:"Pharma sales"},freelanceCopywriter:{id:"userContextModal.rolePlaceholder.freelanceCopywriter",defaultMessage:"Freelance copywriter"},weddingPhotographer:{id:"userContextModal.rolePlaceholder.weddingPhotographer",defaultMessage:"Wedding photographer"},catHerder:{id:"userContextModal.rolePlaceholder.catHerder",defaultMessage:"Professional cat herder"},cdlDriver:{id:"userContextModal.rolePlaceholder.cdlDriver",defaultMessage:"CDL driver"},thirdGradeTeacher:{id:"userContextModal.rolePlaceholder.thirdGradeTeacher",defaultMessage:"Third-grade teacher"}}),Xt={initial:{opacity:0,y:8},animate:{opacity:1,y:0,transition:{duration:.2}},exit:{opacity:0,y:-8,transition:{duration:.2}}},xe=["engineeringStudent","gastroenterologist","sourdoughBaker","interiorDesigner","daycareManager","familyLawAttorney","excelWizard","level10Mage","pharmaSales","freelanceCopywriter","weddingPhotographer","catHerder","cdlDriver","thirdGradeTeacher"];export{fe as DEFAULT_MAX_CHARACTER_LENGTH,oe as TextAreaWithTip,os as UserContextModal,l as messages};
//# sourceMappingURL=cjmylub8w7fwih4h.js.map
