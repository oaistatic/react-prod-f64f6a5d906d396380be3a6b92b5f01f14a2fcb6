const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bdjhtu6cwvlzp57m.js","assets/gg0tb34p9fzo1omt.js","assets/g670b8vtkhx0yc6d.js","assets/root-ilxovqci.css","assets/bt9yvsktni2sjcsh.js","assets/forbprkns1cohsbl.js","assets/conversation-small-mtta3ozz.css","assets/d3y72ugnrmac5z1v.js","assets/cfdk1y828jwp5ajh.js","assets/caobrhbwp7ytvraj.js","assets/keukcpnbbi0jjwq0.js","assets/o68lxipd1oht2mfn.js"])))=>i.map(i=>d[i]);
import{ch as A,R as b,bU as L,cD as J,oR as ce,bf as fe,c6 as K,cy as ie,dW as je,cH as C,n as ve,cG as Me,pd as be,be as Ne,cY as le,c5 as p,dX as de,dm as q,bg as W,nm as Y,bV as ye,bW as Re,d as Ce,S as Ue,cl as ke,dU as Pe,dj as _e,kw as we}from"./g670b8vtkhx0yc6d.js";import{f as G,b as f,u as O,a as E,e as N,j as e,h as me,r as h,M as x,o as Ie}from"./gg0tb34p9fzo1omt.js";import{ay as ue,an as Se,cm as De,oW as $,mS as qe,lp as X,oX as Z,cn as Te,ht as oe,hs as ee,N as Ae,d as se,q as Ee,bQ as Ve,oY as Be,Q as Fe,fR as We}from"./forbprkns1cohsbl.js";import{T as i}from"./cfdk1y828jwp5ajh.js";import{m as ge}from"./eehax2vszpub1pi3.js";import{G as He}from"./c3br35oylhnmidew.js";import{n as V}from"./ilcqvb7mttbdvtmn.js";import{T as Ge,a as Oe}from"./zdrpfqse75m9nnkf.js";import{a as $e,c as Qe,u as ze}from"./c2kjct7accafncjs.js";import"./dkpt9rl3nmxrd3k2.js";import"./fz8lyjvdpywhlf94.js";import"./cs320738df36xnc1.js";import"./f51c6zie1stj9anw.js";import"./jpdmr6hprcjyd5ie.js";import"./me58wahxzwibdrxp.js";import"./pnx8yl9r7yj5moem.js";import"./felxwdrg3fgsr1mu.js";import"./b45t2szdibt7lu65.js";import"./o02mhmgcyrsuseq4.js";import"./bznan1jknv1y4qru.js";const _=25;function Ke(s,a,t){return G({queryKey:["workspace",s,"invites",a,t],queryFn:async()=>await b.safeGet("/accounts/{account_id}/invites",{parameters:{path:{account_id:s},query:{offset:a,limit:_,query:t}}})})}function Le(s,a,t){return G({queryKey:["workspace",s,"invites","requests",a,t],queryFn:()=>b.safeGet("/accounts/{account_id}/invites",{parameters:{path:{account_id:s},query:{include_pending:!1,include_requests:!0,offset:a,limit:_,query:t}}})})}function xe(s){const a=f(),t=A(),n=O();return E({mutationFn:({inviteId:r,role:c,acceptRequest:l})=>b.safePatch("/accounts/{account_id}/invites/{invite_id}",{parameters:{path:{account_id:s,invite_id:r}},requestBody:{role:c,accept_request:l}}).catch(o=>{t.danger(a.formatMessage(R.updateInviteError,{error:o.message}),{loggingTitle:R.updateInviteError.defaultMessage,toastId:"invite",loggingDescription:"Unable to update invite from workspace"})}),onSuccess:()=>{n.invalidateQueries({queryKey:["workspace",s,"invites"]}),n.invalidateQueries({queryKey:["workspace",s,"invites","requests"]}),n.invalidateQueries({queryKey:["workspace",s]})}})}function he(s){const a=f(),t=A(),n=O();return E({mutationFn:({email:r})=>b.safeDelete("/accounts/{account_id}/invites",{parameters:{path:{account_id:s}},requestBody:{email_address:r}}).catch(c=>{t.danger(a.formatMessage(R.deleteInviteError,{email:r,error:c.message}),{loggingTitle:R.deleteInviteError.defaultMessage,toastId:"invite",loggingDescription:"Unable to remove user from workspace"})}),onSuccess:()=>{n.invalidateQueries({queryKey:["workspace",s,"invites"]}),n.invalidateQueries({queryKey:["workspace",s,"invites","requests"]})}})}function Je(s){const a=f(),t=A(),n=O();return E({mutationFn:({role:r,email:c})=>b.safePost("/accounts/{account_id}/invites",{parameters:{path:{account_id:s}},requestBody:{email_addresses:[c],role:r,resend_emails:!0}}).then(({account_invites:l,errored_emails:o})=>{if(o.length>0)throw new Error(o[0].error);l.length>0&&t.success(a.formatMessage(R.resendInviteSuccess,{email:c}))}).catch(l=>{t.danger(a.formatMessage(R.resendInviteError,{email:c,error:l.message}),{loggingTitle:R.resendInviteError.defaultMessage,toastId:"invite",loggingDescription:"Unable to resend invite to user"})}),onSuccess:()=>{n.invalidateQueries({queryKey:["workspace",s,"invites"]}),n.invalidateQueries({queryKey:["workspace",s,"invites","requests"]})}})}const R=N({updateInviteError:{id:"WorkspaceInvites.updateInviteError",defaultMessage:"Unable to update invite from workspace: {error}"},deleteInviteError:{id:"WorkspaceInvites.deleteInviteError",defaultMessage:"Unable to remove user ({email}) from workspace: {error}"},resendInviteSuccess:{id:"WorkspaceInvites.resendInviteSuccess",defaultMessage:"Sent a new invite to {email}"},resendInviteError:{id:"WorkspaceInvites.resendInviteError",defaultMessage:"Unable to resend invite to ({email}) from workspace: {error}"}}),ae=({userName:s,isScimManaged:a,dotted:t=!1})=>e.jsxs("div",{className:"relative me-3",children:[e.jsx(ue,{user:{name:s,picture:null},size:"default",dotted:t}),a&&e.jsx("div",{className:"bg-token-bg-tertiary absolute -end-1 -bottom-1 rounded-full border-2 border-white p-0.25",children:e.jsx(Se,{width:10,height:10})})]}),Ye=({children:s,ref:a,...t})=>e.jsx(V.Root,{license:"commercial",sheetRole:"dialog",...t,ref:a,children:s}),Xe=({children:s,ref:a,className:t,contentPlacement:n="left",...r})=>e.jsx(V.View,{className:L("z-1",t),contentPlacement:n,swipeOvershoot:!1,nativeEdgeSwipePrevention:!0,...r,ref:a,children:s}),Ze=({className:s,ref:a,...t})=>e.jsx(V.Backdrop,{className:s,...t,ref:a}),es=({children:s,ref:a,className:t,...n})=>e.jsx(V.Content,{className:L("bg-token-bg-primary box-border shadow-lg",t),...n,ref:a,children:s}),ss=V.Portal,D={Root:Ye,Portal:ss,View:Xe,Backdrop:Ze,Content:es},as=({workspaceId:s,userId:a})=>G({queryKey:[s,a,"user-roles"],queryFn:async()=>(await b.safeGet("/rbac/workspace/{workspace_id}/principals/{principal_id}/roles",{parameters:{query:{account_id:s},path:{workspace_id:s,principal_id:a}}})).roles}),ts=({workspaceId:s,userId:a,enabled:t})=>G({enabled:t,queryKey:[s,a,"user-groups"],queryFn:async()=>(await b.safeGet("/accounts/{account_id}/users/{account_user_id}/groups",{parameters:{path:{account_id:s,account_user_id:a}}})).items}),ns=({workspaceId:s,user:a,onClose:t})=>{const n=f(),r=J(),c=me(),l=ce(),o=r?.isEnterprisey(),{data:u}=as({workspaceId:s,userId:a.id}),d=h.useMemo(()=>u?.filter(m=>!m.predefined_role),[u]),{data:g}=ts({workspaceId:s,userId:a.account_user_id,enabled:o});return e.jsx(D.Root,{presented:!0,defaultPresented:!0,onPresentedChange:t,children:e.jsx(D.Portal,{children:e.jsxs(D.View,{contentPlacement:"right",children:[e.jsx(D.Backdrop,{}),e.jsxs(D.Content,{style:{maxWidth:500},children:[e.jsxs("h1",{className:"flex items-center justify-between p-4",children:[e.jsx("div",{}),e.jsx(fe,{onClick:t,iconSize:"lg",autoFocus:!0})]}),e.jsxs("div",{className:"flex flex-col gap-3 px-10 pt-4",children:[e.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[e.jsx(ue,{user:{name:a.name??"",picture:null},size:"large"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-heading-3",children:a.name}),e.jsx("div",{children:a.email})]})]}),e.jsx("hr",{className:"my-2.5"}),o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-caption-regular",children:n.formatMessage(B.groups)}),g==null&&e.jsx(K,{}),g?.length===0&&e.jsx("div",{className:"text-token-text-tertiary text-sm italic",children:n.formatMessage(B.noGroups)}),g?.map(m=>e.jsx(ie,{className:"mx-0",as:"button",onClick:()=>c(`/admin/groups/${m.id}`),children:e.jsx("div",{className:"flex items-center justify-between gap-2 text-start",children:e.jsxs("div",{className:"flex flex-row items-center gap-3",children:[e.jsx("div",{children:e.jsx(He,{group:m})}),e.jsx("div",{children:m.name})]})})},m.id))]}),e.jsx("hr",{className:"my-2.5"})]}),l&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"text-caption-regular",children:n.formatMessage(B.customRoles)}),d==null&&e.jsx(K,{}),d?.length===0&&e.jsx("div",{className:"text-token-text-tertiary text-sm italic",children:n.formatMessage(B.noCustomRoles)}),d?.map(m=>e.jsx(ie,{className:"mx-0",as:"button",onClick:()=>c(`/admin/permissions/roles/${m.id}`),children:e.jsx("div",{className:"flex items-center justify-between gap-2 text-start",children:e.jsxs("div",{className:"flex flex-row items-center gap-3",children:[e.jsx("div",{children:m.predefined_role?e.jsx(De,{className:"icon"}):e.jsx(je,{className:"icon"})}),e.jsxs("div",{children:[e.jsx("div",{children:m.name}),e.jsx("div",{className:"text-token-text-tertiary text-sm",children:m.description})]})]})})},m.id))]})]})]})]})})})},B=N({removeUser:{id:"M6UqGh",defaultMessage:"Remove user"},customRoles:{id:"tt2Vcr",defaultMessage:"Custom roles"},noCustomRoles:{id:"esz0bm",defaultMessage:"No custom roles assigned"},groups:{id:"zWtMsq",defaultMessage:"Groups"},noGroups:{id:"VRtXNY",defaultMessage:"No groups assigned"}});function te({currentRole:s,onUpdateUserRole:a,disabled:t=!1}){const n=$();return e.jsx(qe,{disabled:t,defaultValue:s,onValueChange:r=>{a(r)},triggerClassName:"text-base",options:[{label:n[C.STANDARD],value:C.STANDARD},{label:n[C.ADMIN],value:C.ADMIN},{label:n[C.OWNER],value:C.OWNER}]})}const T=ve(()=>({confirmModalUserData:null})),H={openModalForUser:s=>{T.setState({confirmModalUserData:s})},closeModal:()=>{T.setState({confirmModalUserData:null})}};function rs({workspaceId:s,filterInputValue:a}){const[t,n]=h.useState(0),r=Me(),[c,l]=h.useState(),o=ce(),u=r?.id,d=X(s),g=Z(s),m=d||g,v=cs(),w=ds(s),{data:I}=Te(s,t*oe,a),Q=h.useCallback(j=>{H.openModalForUser(j)},[]),y=h.useCallback(()=>{const j=T.getState().confirmModalUserData?.id;j!==void 0&&w.mutate({userId:j}),H.closeModal(),l(void 0)},[w]),pe=h.useCallback((j,z)=>{v.mutate({userId:j,value:z,workspaceId:s})},[v,s]);if(I===void 0)return e.jsx(ne,{});const re=I.items,S=Math.ceil((I.total??0)/oe);return t>=S&&S!==0&&n(Math.max(S-1,0)),e.jsxs(e.Fragment,{children:[e.jsxs(i.Root,{fixed:!0,size:"normal",children:[e.jsxs("colgroup",{children:[e.jsx("col",{className:"w-[60%]"}),e.jsx("col",{className:"w-[20%]"}),e.jsx("col",{className:"w-[20%]"}),m&&e.jsx("col",{className:"w-16"})]}),e.jsxs(i.Header,{children:[e.jsx(i.HeaderCell,{children:e.jsx(x,{...M.name})}),e.jsx(i.HeaderCell,{children:e.jsx("span",{className:d?"ps-3":"",children:e.jsx(x,{...M.accountType})})}),e.jsx(i.HeaderCell,{children:e.jsx(x,{...M.dateAdded})}),m&&e.jsx(i.HeaderCell,{className:"w-16"})]}),e.jsxs(i.Body,{children:[re.map(j=>e.jsx(ls,{isCurrentUser:u!==void 0&&j.id===u,user:j,currentUserHasAdminRights:m,isCurrentUserOwner:d,onRemoveUserClick:()=>Q({id:j.id,name:j.name??"",email:j.email??"",created_time:j.created_time}),onUpdateUserRole:pe,onClick:o?z=>l(z):void 0},j.id)),re.length===0&&e.jsx(i.Row,{className:"[&>td]:py-2",children:e.jsx(i.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(x,{...M.noResults})})})})]})]}),e.jsx("div",{className:"relative mt-4 mb-8 min-h-[20px]",children:S>1&&e.jsx("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 justify-center",children:e.jsx(ee,{currentPage:t,onChangeIndex:n,length:S})})}),c&&e.jsx(ns,{workspaceId:s,user:c,onClose:()=>l(void 0)}),e.jsx(is,{onDeleteConfirm:y})]})}function is({onDeleteConfirm:s}){const a=f(),t=T(r=>r.confirmModalUserData!==null),n=T(r=>r.confirmModalUserData===null?{}:{userId:r.confirmModalUserData.id,email:r.confirmModalUserData.email,name:r.confirmModalUserData.name,dateAdded:be(r.confirmModalUserData.created_time)});return e.jsx(Ne,{testId:"modal-remove-member",isOpen:t,title:a.formatMessage(M.removeMemberModalTitle),onClose:()=>H.closeModal(),type:"success",primaryButton:e.jsx(le.Button,{title:a.formatMessage(M.removeMemberModalConfirm),color:"danger",onClick:s}),secondaryButton:e.jsx(le.Button,{title:a.formatMessage(M.removeMemberModalCancel),color:"secondary",onClick:()=>H.closeModal()}),children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.name??n.email,e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(x,{...M.dateJoined,values:{dateAdded:a.formatDate(n.dateAdded,{year:"numeric",month:"long",day:"numeric"})}})})]})})}function ls({user:s,currentUserHasAdminRights:a,isCurrentUserOwner:t,isCurrentUser:n,onRemoveUserClick:r,onUpdateUserRole:c,onClick:l}){const u=$()[s.role],d=f(),g=s.name??d.formatMessage(M.missingName);return e.jsxs(i.Row,{className:L("[&>td]:py-2"),onClick:l?()=>l?.(s):void 0,children:[e.jsxs(i.Cell,{children:[e.jsx("div",{className:"relative pe-3",children:e.jsx(ae,{userName:g,isScimManaged:s.is_scim_managed})}),e.jsxs("div",{children:[e.jsxs("div",{children:[g,n&&e.jsx("span",{className:"ms-1",children:e.jsx(x,{...M.youSpecifier})})]}),e.jsx("div",{className:"text-body-small-regular text-token-text-secondary",children:s.email})]})]}),e.jsx(i.Cell,{children:t?e.jsx(te,{currentRole:s.role,onUpdateUserRole:m=>{c(s.id,m)},disabled:n}):u}),e.jsx(i.Cell,{children:d.formatDate(s.created_time,{month:"short",day:"numeric",year:"numeric"})}),a&&e.jsx(i.Cell,{children:e.jsx(os,{userId:s.id,onRemoveUserClick:r,disabled:n,isScimManaged:s.is_scim_managed})})]})}function os({disabled:s,onRemoveUserClick:a,userId:t,isScimManaged:n}){const r=f();return s?null:n?e.jsx(p.Root,{children:e.jsx(p.Trigger,{disabled:!0,children:e.jsx(de,{label:r.formatMessage(ge.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(q,{className:"icon-sm"})})})}):e.jsxs(p.Root,{children:[e.jsx(p.Trigger,{className:"-my-2",children:e.jsx(q,{className:"icon-sm"})}),e.jsx(p.Portal,{children:e.jsx(p.Content,{size:"small",children:e.jsx(p.Item,{onClick:()=>{a(t)},icon:e.jsx(Ae,{className:"text-token-text-status-error"}),className:"text-token-text-status-error",children:e.jsx(x,{...M.removeMemberModalTitle})})})})]})}function cs(){const s=A();return E({mutationFn:({userId:a,workspaceId:t,value:n})=>b.safePatch("/accounts/{account_id}/users/{user_id}",{parameters:{path:{account_id:t,user_id:a}},requestBody:{role:n}}).catch(r=>{s.danger(`Unable to update user (${a}) role: ${r.message}`,{toastId:"user_manager_table"})})})}function ds(s){const a=O(),t=A();return E({mutationFn:({userId:n})=>b.safeDelete("/accounts/{account_id}/users/{user_id}",{parameters:{path:{account_id:s,user_id:n}}}).catch(r=>{t.danger(`Unable to remove user (${n}) from workspace: ${r.message}`,{toastId:"user_manager_table"})}),onSuccess:()=>{a.invalidateQueries({queryKey:["workspace",s]})}})}function ne(){return e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsx(K,{})})}const M=N({name:{id:"UserManager.name",defaultMessage:"Name"},email:{id:"UserManager.email",defaultMessage:"Email"},accountType:{id:"UserManager.accountType",defaultMessage:"Account type"},dateAdded:{id:"UserManager.dateAdded",defaultMessage:"Date added"},role:{id:"UserManager.role",defaultMessage:"Role"},missingName:{id:"UserManager.missingName",defaultMessage:"No name provided"},youSpecifier:{id:"UserManager.youSpecifier",defaultMessage:"(You)"},removeUser:{id:"UserManager.removeUser",defaultMessage:"Remove user from workspace"},removeMemberModalTitle:{id:"UserManager.removeMemberModalTitle",defaultMessage:"Remove member"},removeMemberModalConfirm:{id:"UserManager.removeMemberModalConfirm",defaultMessage:"Delete"},removeMemberModalCancel:{id:"UserManager.removeMemberModalCancel",defaultMessage:"Cancel"},dateJoined:{id:"UserManager.dateJoined",defaultMessage:"Joined workspace on {dateAdded}"},inviteMemberButton:{id:"UserManager.inviteMemberButton",defaultMessage:"Invite member"},noResults:{id:"UserManager.noResults",defaultMessage:"No results"},leaveWorkspace:{id:"adminPage.leaveWorkspace",defaultMessage:"Leave workspace"}});function ms({workspaceId:s,filterInputValue:a}){const[t,n]=h.useState(0),{data:r}=Le(s,t*_,a),c=X(s),l=Z(s),o=f(),u=c||l;if(r===void 0)return e.jsx(ne,{});const d=r.items,g=Math.ceil((r.total??0)/_);return t>=g&&g!==0&&n(Math.max(g-1,0)),e.jsxs("div",{children:[e.jsxs(i.Root,{fixed:!0,size:"normal",children:[e.jsxs(i.Header,{children:[e.jsx(i.HeaderCell,{className:"bg-token-main-surface-primary",children:e.jsx(x,{...k.email})}),e.jsx(i.HeaderCell,{className:"bg-token-main-surface-primary w-28",children:e.jsx("span",{className:u?"ps-3":"",children:e.jsx(x,{...k.role})})}),u&&e.jsx(i.HeaderCell,{className:"bg-token-main-surface-primary w-40",children:o.formatMessage(k.actions)})]}),e.jsxs(i.Body,{children:[d.map(m=>e.jsx(us,{workspaceId:s,invite:m,isCurrentUserOwner:c,currentUserHasAdminRights:u},m.id)),d.length===0&&e.jsx(i.Row,{children:e.jsx(i.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(x,{...k.noResults})})})})]})]}),g>1&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(ee,{currentPage:t,onChangeIndex:n,length:g})})]})}function us({workspaceId:s,invite:a,isCurrentUserOwner:t,currentUserHasAdminRights:n}){const r=$(),c=xe(s),l=he(s),o=f();return e.jsxs(i.Row,{className:"[&>td]:py-2",disabled:c.isPending||l.isPending||l.isPending,children:[e.jsx(i.Cell,{children:e.jsxs("span",{className:"flex grow",children:[e.jsx(ae,{userName:a.email_address??"",isScimManaged:a.is_scim_managed,dotted:!0}),e.jsx("span",{children:a.email_address})]})}),e.jsx(i.Cell,{children:t?e.jsx(te,{currentRole:a.role,onUpdateUserRole:u=>{c.mutate({inviteId:a.id,role:u})}}):r[a.role]}),n&&e.jsx(e.Fragment,{children:e.jsx(i.Cell,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(W,{onClick:()=>c.mutate({inviteId:a.id,acceptRequest:!0}),children:o.formatMessage(k.accept)}),e.jsx(W,{color:"secondary",onClick:()=>l.mutate({email:a.email_address??""}),children:o.formatMessage(k.reject)})]})})})]})}const k=N({email:{id:"RequestInviteManager.email",defaultMessage:"Email"},role:{id:"RequestInviteManager.role",defaultMessage:"Role"},actions:{id:"RequestInviteManager.actions",defaultMessage:"Actions"},accept:{id:"RequestInviteManager.accept",defaultMessage:"Accept"},reject:{id:"RequestInviteManager.reject",defaultMessage:"Reject"},noResults:{id:"RequestInviteManager.noResults",defaultMessage:"No results"}}),gs=({workspaceId:s})=>{const a=f(),[t,n]=h.useState(""),[r,c]=h.useState(""),l=h.useMemo(()=>se(o=>c(o),300,{leading:!1,trailing:!0}),[]);return e.jsxs("div",{className:"mt-6",children:[e.jsx(Y,{value:t,onChange:o=>{n(o.target.value),l(o.target.value)},placeholder:a.formatMessage(xs.searchRequestPlaceholder),className:"mb-4.5",inputClassName:"rounded-full! text-sm"}),e.jsx(ms,{workspaceId:s,filterInputValue:r})]})},xs=N({pendingRequests:{id:"admin.workspace.members.pendingRequests",defaultMessage:"Pending Requests"},searchRequestPlaceholder:{id:"admin.workspace.members.searchRequestPlaceholder",defaultMessage:"Search for requests"}});function hs({workspaceId:s,filterInputValue:a}){const[t,n]=h.useState(0),r=X(s),c=Z(s),l=r||c,{data:o}=Ke(s,t*_,a);if(o===void 0)return e.jsx(ne,{});const u=o.items,d=Math.ceil((o.total??0)/_);return t>=d&&d!==0&&n(Math.max(d-1,0)),e.jsxs("div",{children:[e.jsxs(i.Root,{fixed:!0,size:"normal",children:[e.jsxs("colgroup",{children:[e.jsx("col",{className:"w-[60%]"}),e.jsx("col",{className:"w-[20%]"}),e.jsx("col",{className:"w-[20%]"}),l&&e.jsx("col",{className:"w-16"})]}),e.jsxs(i.Header,{children:[e.jsx(i.HeaderCell,{className:"bg-token-bg-primary",children:e.jsx(x,{...P.email})}),e.jsx(i.HeaderCell,{className:"bg-token-bg-primary",children:e.jsx(x,{...P.invitedDate})}),e.jsx(i.HeaderCell,{className:"bg-token-bg-primary w-28",children:e.jsx("span",{className:l?"ps-3":"",children:e.jsx(x,{...P.role})})}),l&&e.jsx(i.HeaderCell,{className:"bg-token-bg-primary w-16"})]}),e.jsxs(i.Body,{children:[u.map(g=>e.jsx(ps,{workspaceId:s,invite:g,isCurrentUserOwner:r,currentUserHasAdminRights:l},g.id)),u.length===0&&e.jsx(i.Row,{children:e.jsx(i.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(x,{...P.noResults})})})})]})]}),d>1&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(ee,{currentPage:t,onChangeIndex:n,length:d})})]})}function ps({workspaceId:s,invite:a,isCurrentUserOwner:t,currentUserHasAdminRights:n}){const r=f(),c=$(),l=xe(s),o=he(s),u=Je(s);return e.jsxs(i.Row,{className:"[&>td]:py-2",disabled:l.isPending||o.isPending||o.isSuccess||u.isPending,children:[e.jsx(i.Cell,{children:e.jsxs("span",{className:"flex grow",children:[e.jsx(ae,{userName:a.email_address??"",isScimManaged:a.is_scim_managed,dotted:!0}),e.jsx("span",{children:a.email_address})]})}),e.jsx(i.Cell,{children:r.formatDate(a.created_time,{month:"short",day:"numeric",year:"numeric"})}),e.jsx(i.Cell,{children:t?e.jsx(te,{currentRole:a.role,onUpdateUserRole:d=>{l.mutate({inviteId:a.id,role:d})}}):c[a.role]}),n&&e.jsx(e.Fragment,{children:e.jsx(i.Cell,{children:e.jsx(fs,{onDeleteUser:()=>{o.mutate({email:a.email_address??""})},onResendInvite:()=>{u.mutate({email:a.email_address??"",role:a.role??""})},disabled:a.is_scim_managed})})})]})}function fs({onDeleteUser:s,onResendInvite:a,disabled:t}){const n=f();return e.jsx(e.Fragment,{children:t?e.jsx(p.Root,{children:e.jsx(p.Trigger,{disabled:!0,children:e.jsx(de,{label:n.formatMessage(ge.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(q,{className:"icon-sm"})})})}):e.jsxs(p.Root,{children:[e.jsx(p.Trigger,{children:e.jsx(q,{className:"icon-sm"})}),e.jsx(p.Portal,{children:e.jsxs(p.Content,{children:[e.jsx(p.Item,{onClick:a,children:e.jsx(x,{...P.resendInvite})}),e.jsx(p.Item,{onClick:s,children:e.jsx(x,{...P.revokeInvite})})]})})]})})}const P=N({email:{id:"InviteManager.email",defaultMessage:"Email"},role:{id:"InviteManager.role",defaultMessage:"Role"},invitedDate:{id:"InviteManager.invitedDate",defaultMessage:"Date invited"},resendInvite:{id:"InviteManager.resendInvite",defaultMessage:"Resend invite"},revokeInvite:{id:"InviteManager.revokeInvite",defaultMessage:"Revoke invite"},noResults:{id:"InviteManager.noResults",defaultMessage:"No results"}}),js=({workspaceId:s})=>{const a=f(),[t,n]=h.useState(""),[r,c]=h.useState(""),l=h.useMemo(()=>se(o=>c(o),300,{leading:!1,trailing:!0}),[]);return e.jsxs("div",{className:"mt-6",children:[e.jsx(Y,{value:t,onChange:o=>{n(o.target.value),l(o.target.value)},placeholder:a.formatMessage(vs.searchInvitesPlaceholder),className:"mb-4.5",inputClassName:"rounded-full! text-sm"}),e.jsx(hs,{workspaceId:s,filterInputValue:r})]})},vs=N({searchInvitesPlaceholder:{id:"admin.workspace.members.searchInvitesPlaceholder",defaultMessage:"Search for invites"}}),Ms=ye(()=>Re(()=>import("./bdjhtu6cwvlzp57m.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])));function bs({workspaceId:s}){const a=f(),t=J(),[n,r]=h.useState(""),[c,l]=h.useState(""),o=h.useMemo(()=>se(v=>l(v),300,{leading:!1,trailing:!0}),[]),u=Ce();if(!t)return null;const d=t?.isTeam(),g=t.isAdminOfAccount(),m=t.isOwnerOfAccount();return e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"mb-4.5 flex items-center justify-between",children:[e.jsx(Y,{value:n,onChange:v=>{r(v.target.value),o(v.target.value)},placeholder:a.formatMessage(F.searchMembersPlaceholder),inputClassName:"rounded-full! text-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[(g||m||d)&&e.jsx(W,{onClick:()=>{Ue.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"workspace-admin-click",text:"InviteMember",step:"OpenModal"}),ke(u,({onClose:v})=>e.jsx(Ms,{workspace:t,onClose:v}))},icon:Ee,children:e.jsx(x,{...F.inviteMemberButton})}),d?e.jsx(Pe,{triggerButton:e.jsx(W,{color:"secondary",icon:q}),children:e.jsx(p.Item,{onClick:()=>{t&&_e.setLeaveWorkspaceData(t)},children:e.jsx(x,{...F.leaveWorkspace})})}):null]})]}),e.jsx(rs,{workspaceId:s,filterInputValue:c}),e.jsx("p",{className:"text-token-text-secondary mt-4 text-sm",children:e.jsx(x,{...F.memberListUpdateDelayNote})})]})}const F=N({inviteMemberButton:{id:"InviteManager.inviteMemberButton",defaultMessage:"Invite member"},leaveWorkspace:{id:"WorkspaceMembers.leaveWorkspace",defaultMessage:"Leave workspace"},searchMembersPlaceholder:{id:"WorkspaceMembers.searchMembersPlaceholder",defaultMessage:"Filter by name"},memberListUpdateDelayNote:{id:"adminPage.memberListUpdateDelayNote",defaultMessage:"Note: Although new workspace members can access ChatGPT immediately, it may take up to 24 hours to show them in this list."}}),Ns=s=>s==="members"||s==="invites"||s==="requests";function ys({currentWorkspaceId:s}){const a=f(),t=J(),n=Ve(s)??"?",r=Be(t),l=(Fe()?.length??0)>0,u=!t?.isTeam()&&l,d=h.useMemo(()=>{const y=[{key:"members",label:a.formatMessage(U.allMembers),children:e.jsx(bs,{workspaceId:s})},{key:"invites",label:a.formatMessage(U.pendingInvites),children:e.jsx(js,{workspaceId:s})}];return u?[...y,{key:"requests",label:a.formatMessage(U.pendingRequests),children:e.jsx(gs,{workspaceId:s})}]:y},[s,a,u]),g=me(),[m]=Ie(),v=m.get("tab"),[w,I]=h.useState(v&&Ns(v)?v:d[0].key),Q=y=>{I(y),g({pathname:window.location.pathname,search:new URLSearchParams({tab:y}).toString()})};return t?e.jsxs(e.Fragment,{children:[e.jsx(We,{children:e.jsx("title",{children:a.formatMessage(U.adminBrowserPageTitle)})}),e.jsx($e,{title:a.formatMessage(U.adminPageTitle),subtitle:e.jsx(x,{values:{totalMembers:n,planName:r},...U.totalMembers}),tabsHeader:e.jsx(Ge,{items:d,activeTab:w,onTabChange:Q})}),e.jsx(Qe,{children:e.jsx(Oe,{items:d,activeTab:w})})]}):null}const U=N({adminBrowserPageTitle:{id:"adminPage.adminBrowserPageTitle",defaultMessage:"ChatGPT - Admin | Members"},adminPageTitle:{id:"adminPage.adminPageTitle.0",defaultMessage:"Members"},workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},totalMembers:{id:"adminPage.totalMembers",defaultMessage:"{planName} · {totalMembers} {totalMembers, plural, one {member} other {members}}"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},allMembers:{id:"adminPage.allMembers",defaultMessage:"Users"},pendingInvites:{id:"adminPage.pendingInvites",defaultMessage:"Pending invites"},pendingRequests:{id:"adminPage.pendingRequests",defaultMessage:"Pending requests"}}),Os=we(function(){const a=ze();return e.jsx(ys,{...a})});export{Os as default};
//# sourceMappingURL=lbwc1ukp7pdxyrwm.js.map
