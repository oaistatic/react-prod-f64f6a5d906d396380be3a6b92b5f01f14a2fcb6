const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ghvycjr636onytec.js","assets/gg0tb34p9fzo1omt.js"])))=>i.map(i=>d[i]);
import{a7 as u,lY as f,co as U,h as c,j as _,bW as b,aZ as l,R as h}from"./g670b8vtkhx0yc6d.js";import{r as i,f as y}from"./gg0tb34p9fzo1omt.js";import{d as w}from"./forbprkns1cohsbl.js";async function S(e){const t=await b(()=>import("./ghvycjr636onytec.js").then(n=>n.i),__vite__mapDeps([0,1]));if(l!=null&&e?.startsWith(l))return!0;try{return t.get(new URL(e??"").hostname)==="openai.com"}catch{return!1}}function d(e,t,n){return h.safeGet("/conversation/{conversation_id}/url_safe",{parameters:{path:{conversation_id:e},query:{url:t,history_and_training_disabled:n}}})}function D(e,t){const n=f(),{isUnauthenticated:s}=U();return y({queryKey:["safe-url",{serverThreadId:e,url:t,isHistoryAndTrainingDisabled:n}],queryFn:async()=>{if(e==null||t==null)throw new Error("Unexpected falsey useSafeUrlQuery");return await S(t)||c.isThreadUrlSafe(_(e),t)?{safe:!0}:s?{safe:!1}:d(e,t,n)},enabled:e!=null&&t!=null})}function g(e,t,n=!0){const s=u(e,o=>t!=null&&c.isThreadUrlSafe(o,t)),{data:{safe:r}={}}=D(e,s?void 0:t);return s||r||!n?t:void 0}function C(e,t,n=!0){const s=k(t,500);return g(e,s,n)}function k(e,t){const[n,s]=i.useState(void 0),[r]=i.useState(()=>w(o=>{s(o)},t));return i.useEffect(()=>{r(e)},[r,e]),n===e?e:void 0}function H(e,t){const n=f(),s=u(e,o=>o?.safeUrls??[]),{data:r=[]}=y({queryKey:["safe-urls",e,t,n,s],queryFn:async()=>{const o=s.filter(a=>t.includes(a)),m=t.filter(a=>!o.includes(a)),p=(await Promise.allSettled(m.map(async a=>{if(await S(a))return a;if(e==null)return null;try{return(await d(e,a,n)).safe?a:null}catch{return null}}))).map(a=>a.status==="fulfilled"?a.value:null).filter(a=>a!=null);return o.concat(p)},enabled:e!=null&&t.length>0});return r}export{C as a,H as u};
//# sourceMappingURL=kr5jdtt5uczx95b1.js.map
