import{bU as q,n8 as h,fj as $e,d as He,jQ as Ke,ch as Ge,D as J,ct as Je,c6 as ze,F as Xe,R as Ze,kC as Qe,kw as et}from"./g670b8vtkhx0yc6d.js";import{R as d,j as s,M as D,b as W,r as y,e as Oe,n as ge,h as tt,N as rt}from"./gg0tb34p9fzo1omt.js";import{d as nt,O as Me,o2 as xe,o3 as ve,mD as st}from"./forbprkns1cohsbl.js";import{S as ot}from"./keukcpnbbi0jjwq0.js";import{u as at}from"./btvken3m81tjj676.js";import{i as ye}from"./ovfgk5oky70gv1q0.js";import"./o68lxipd1oht2mfn.js";const B=d.forwardRef(({children:t},e)=>s.jsx("div",{ref:e,className:"flex flex-col gap-4",children:t}));B.displayName="CheckoutFormSection";function z({className:t,title:e}){return s.jsx("div",{className:q("font-medium",t),children:s.jsx(D,{...e})})}function be({errors:t,shouldShowErrors:e}){return s.jsx("div",{className:"mt-1 text-[0.93rem] text-[#df1b41]",style:{transition:"height 0.35s ease 0s"},children:e&&t.map(r=>s.jsx("p",{children:r},r))})}function Se(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Ce(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Se(Object(r),!0).forEach(function(n){Pe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function X(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?X=function(e){return typeof e}:X=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},X(t)}function Pe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function it(t,e){if(t==null)return{};var r={},n=Object.keys(t),o,a;for(a=0;a<n.length;a++)o=n[a],!(e.indexOf(o)>=0)&&(r[o]=t[o]);return r}function Te(t,e){if(t==null)return{};var r=it(t,e),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ce(t,e){return ct(t)||lt(t,e)||ut(t,e)||dt()}function ct(t){if(Array.isArray(t))return t}function lt(t,e){var r=t&&(typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"]);if(r!=null){var n=[],o=!0,a=!1,i,u;try{for(r=r.call(t);!(o=(i=r.next()).done)&&(n.push(i.value),!(e&&n.length===e));o=!0);}catch(l){a=!0,u=l}finally{try{!o&&r.return!=null&&r.return()}finally{if(a)throw u}}return n}}function ut(t,e){if(t){if(typeof t=="string")return ke(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(t,e)}}function ke(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var P=function(e,r,n){var o=!!n,a=d.useRef(n);d.useEffect(function(){a.current=n},[n]),d.useEffect(function(){if(!o||!e)return function(){};var i=function(){a.current&&a.current.apply(a,arguments)};return e.on(r,i),function(){e.off(r,i)}},[o,r,e,a])},Z=function(e){var r=d.useRef(e);return d.useEffect(function(){r.current=e},[e]),r.current},Y=function(e){return e!==null&&X(e)==="object"},ft=function(e){return Y(e)&&typeof e.then=="function"},mt=function(e){return Y(e)&&typeof e.elements=="function"&&typeof e.createToken=="function"&&typeof e.createPaymentMethod=="function"&&typeof e.confirmCardPayment=="function"},Ee="[object Object]",Ne=function t(e,r){if(!Y(e)||!Y(r))return e===r;var n=Array.isArray(e),o=Array.isArray(r);if(n!==o)return!1;var a=Object.prototype.toString.call(e)===Ee,i=Object.prototype.toString.call(r)===Ee;if(a!==i)return!1;if(!a&&!n)return e===r;var u=Object.keys(e),l=Object.keys(r);if(u.length!==l.length)return!1;for(var C={},E=0;E<u.length;E+=1)C[u[E]]=!0;for(var g=0;g<l.length;g+=1)C[l[g]]=!0;var f=Object.keys(C);if(f.length!==u.length)return!1;var T=e,w=r,A=function(b){return t(T[b],w[b])};return f.every(A)},pt=function(e,r,n){return Y(e)?Object.keys(e).reduce(function(o,a){var i=!Y(r)||!Ne(e[a],r[a]);return n.includes(a)?(i&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),o):i?Ce(Ce({},o||{}),{},Pe({},a,e[a])):o},null):null},Re="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",je=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Re;if(e===null||mt(e))return e;throw new Error(r)},ht=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Re;if(ft(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(o){return je(o,r)})};var n=je(e,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},gt=function(e){!e||!e._registerWrapper||!e.registerAppInfo||(e._registerWrapper({name:"react-stripe-js",version:"3.7.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.7.0",url:"https://stripe.com/docs/stripe-js/react"}))},Le=d.createContext(null);Le.displayName="ElementsContext";var xt=function(e,r){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return e};h.any,h.object;h.func.isRequired;var vt=["on","session"],te=d.createContext(null);te.displayName="CheckoutSdkContext";var Fe=function(e,r){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(r," in an <CheckoutProvider> provider."));return e},de=d.createContext(null);de.displayName="CheckoutContext";var yt=function(e,r){if(!e)return null;e.on,e.session;var n=Te(e,vt);return Object.assign(r||e.session(),n)},bt="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Ue=function(e){var r=e.stripe,n=e.options,o=e.children,a=d.useMemo(function(){return ht(r,bt)},[r]),i=d.useState(null),u=ce(i,2),l=u[0],C=u[1],E=d.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,checkoutSdk:null}}),g=ce(E,2),f=g[0],T=g[1],w=function(S,j){T(function(c){return c.stripe&&c.checkoutSdk?c:{stripe:S,checkoutSdk:j}})},A=d.useRef(!1);d.useEffect(function(){var N=!0;return a.tag==="async"&&!f.stripe?a.stripePromise.then(function(S){S&&N&&!A.current&&(A.current=!0,S.initCheckout(n).then(function(j){j&&(w(S,j),j.on("change",C))}))}):a.tag==="sync"&&a.stripe&&!A.current&&(A.current=!0,a.stripe.initCheckout(n).then(function(S){S&&(w(a.stripe,S),S.on("change",C))})),function(){N=!1}},[a,f,n,C]);var k=Z(r);d.useEffect(function(){k!==null&&k!==r&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[k,r]);var b=Z(n),U=Z(f.checkoutSdk);d.useEffect(function(){var N,S;if(f.checkoutSdk){var j=b==null||(N=b.elementsOptions)===null||N===void 0?void 0:N.appearance,c=n==null||(S=n.elementsOptions)===null||S===void 0?void 0:S.appearance,m=!Ne(c,j),p=!U&&f.checkoutSdk;c&&(m||p)&&f.checkoutSdk.changeAppearance(c)}},[n,b,f.checkoutSdk,U]),d.useEffect(function(){gt(f.stripe)},[f.stripe]);var V=d.useMemo(function(){return yt(f.checkoutSdk,l)},[f.checkoutSdk,l]);return f.checkoutSdk?d.createElement(te.Provider,{value:f},d.createElement(de.Provider,{value:V},o)):null};Ue.propTypes={stripe:h.any,options:h.shape({fetchClientSecret:h.func.isRequired,elementsOptions:h.object}).isRequired};var St=function(e){var r=d.useContext(te);return Fe(r,e)},le=function(e){var r=d.useContext(te),n=d.useContext(Le);if(r&&n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return r?Fe(r,e):xt(n,e)},re=function(){St("calls useCheckout()");var e=d.useContext(de);if(!e)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return e},Ct=["mode"],kt=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},x=function(e,r){var n="".concat(kt(e),"Element"),o=function(l){var C=l.id,E=l.className,g=l.options,f=g===void 0?{}:g,T=l.onBlur,w=l.onFocus,A=l.onReady,k=l.onChange,b=l.onEscape,U=l.onClick,V=l.onLoadError,N=l.onLoaderStart,S=l.onNetworksChange,j=l.onConfirm,c=l.onCancel,m=l.onShippingAddressChange,p=l.onShippingRateChange,O=le("mounts <".concat(n,">")),R="elements"in O?O.elements:null,L="checkoutSdk"in O?O.checkoutSdk:null,ne=d.useState(null),se=ce(ne,2),_=se[0],We=se[1],F=d.useRef(null),oe=d.useRef(null);P(_,"blur",T),P(_,"focus",w),P(_,"escape",b),P(_,"click",U),P(_,"loaderror",V),P(_,"loaderstart",N),P(_,"networkschange",S),P(_,"confirm",j),P(_,"cancel",c),P(_,"shippingaddresschange",m),P(_,"shippingratechange",p),P(_,"change",k);var ae;A&&(e==="expressCheckout"?ae=A:ae=function(){A(_)}),P(_,"ready",ae),d.useLayoutEffect(function(){if(F.current===null&&oe.current!==null&&(R||L)){var I=null;if(L)switch(e){case"payment":I=L.createPaymentElement(f);break;case"address":if("mode"in f){var pe=f.mode,he=Te(f,Ct);if(pe==="shipping")I=L.createShippingAddressElement(he);else if(pe==="billing")I=L.createBillingAddressElement(he);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":I=L.createExpressCheckoutElement(f);break;case"currencySelector":I=L.createCurrencySelectorElement();break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else R&&(I=R.create(e,f));F.current=I,We(I),I&&I.mount(oe.current)}},[R,L,f]);var me=Z(f);return d.useEffect(function(){if(F.current){var I=pt(f,me,["paymentRequest"]);I&&"update"in F.current&&F.current.update(I)}},[f,me]),d.useLayoutEffect(function(){return function(){if(F.current&&typeof F.current.destroy=="function")try{F.current.destroy(),F.current=null}catch{}}},[]),d.createElement("div",{id:C,className:E,ref:oe})},a=function(l){le("mounts <".concat(n,">"));var C=l.id,E=l.className;return d.createElement("div",{id:C,className:E})},i=r?a:o;return i.propTypes={id:h.string,className:h.string,onChange:h.func,onBlur:h.func,onFocus:h.func,onReady:h.func,onEscape:h.func,onClick:h.func,onLoadError:h.func,onLoaderStart:h.func,onNetworksChange:h.func,onConfirm:h.func,onCancel:h.func,onShippingAddressChange:h.func,onShippingRateChange:h.func,options:h.object},i.displayName=n,i.__elementType=e,i},v=typeof window>"u",Et=d.createContext(null);Et.displayName="EmbeddedCheckoutProviderContext";var jt=function(){var e=le("calls useStripe()"),r=e.stripe;return r};x("auBankAccount",v);x("card",v);x("cardNumber",v);x("cardExpiry",v);x("cardCvc",v);x("fpxBank",v);x("iban",v);x("idealBank",v);x("p24Bank",v);x("epsBank",v);var _t=x("payment",v);x("expressCheckout",v);x("currencySelector",v);x("paymentRequestButton",v);x("linkAuthentication",v);var It=x("address",v);x("shippingAddress",v);x("paymentMethodMessaging",v);x("affirmMessage",v);x("afterpayClearpayMessage",v);const wt=["AM","AT","AU","BE","BG","CA","CH","CL","CY","CZ","DE","DK","EE","EG","ES","FI","FR","GB","GE","GR","HR","HU","IE","IN","IS","IT","KE","KR","LI","LT","LU","LV","MD","MT","NL","NO","NZ","PL","PT","RO","SA","SE","SG","SI","SK","TH","TR","TW","TZ","UA","ZA"];function At(t){return wt.includes(t)}function Ot(t){const e=Object.values(xe).filter(n=>n.country===t),r=new Set(e.map(n=>n.region));return Object.values(xe).filter(n=>r.has(n.region))}const Be=t=>{switch(t){case"ca_gst_hst":return"CA GST/HST";case"ca_pst_bc":return"CA PST-BC";case"ca_pst_mb":return"CA PST-MB";case"ca_pst_sk":return"CA PST-SK";default:return t.replace("_"," ").toUpperCase()}},Mt=({country:t,type:e,description:r})=>s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-1.5 pe-1 font-medium",children:[s.jsx("img",{src:`https://cdn.openai.com/API/images/flags/png/${t}@2x.png`,alt:e,className:"h-4 w-4"}),Be(e)]}),s.jsx("span",{className:"block text-sm text-gray-500",children:r})]}),De=d.forwardRef(({billingCountry:t},e)=>{const r=re(),n=W(),[o,a]=d.useState(!0),[i,u]=d.useState(!1),[l,C]=d.useState({businessName:"",taxIdType:null,taxIdValue:""}),[E,g]=d.useState(null),f=y.useMemo(()=>nt(k=>{k()},500),[]),T=y.useCallback(()=>i?l.businessName.trim()?l.taxIdType?l.taxIdValue.trim()?(g(null),!0):(g(n.formatMessage({id:"CheckoutForm.errorMessageTaxIdValueRequired",defaultMessage:"Tax ID is required"})),!1):(g(n.formatMessage({id:"CheckoutForm.errorMessageTaxIdTypeRequired",defaultMessage:"Please select a tax ID type"})),!1):(g(n.formatMessage({id:"CheckoutForm.errorMessageBusinessNameRequired",defaultMessage:"Business name is required"})),!1):(g(null),!0),[l,n,i]),w=y.useCallback(async()=>{let k=null;if(i){const b=l.taxIdType?.stripe_type;if(!b)return!1;k={taxId:{type:b,value:l.taxIdValue},businessName:l.businessName}}if($e(r.taxIdInfo,k))return!0;{const b=await r.updateTaxIdInfo(k);return b.type==="error"?(g(b.error.message),!1):!0}},[i,l,r]);return d.useImperativeHandle(e,()=>({validate:T,update:async()=>(f.cancel(),await w())}),[w,T,f]),y.useEffect(()=>{o&&l.taxIdValue.trim()?a(!1):o||f(async()=>{T()&&await w()})},[o,l,i,T,w,f]),y.useMemo(()=>At(t??""),[t])?s.jsxs(d.Fragment,{children:[s.jsx(B,{children:s.jsx(Me,{id:"subscription-tax-id",label:s.jsx("div",{className:"Text-color--gray600 text-[13px]",children:s.jsx(D,{id:"CheckoutForm.purchaseAsBusinessLabel",defaultMessage:"I'm purchasing as business"})}),checked:i,onChange:k=>{u(k.target.checked)}})}),i&&s.jsxs(B,{children:[s.jsx(z,{title:{id:"CheckoutForm.headingVATInformation",description:"Heading for the section of the checkout where we collect VAT information",defaultMessage:"VAT information"}}),s.jsx(Pt,{billingCountry:t,taxInfoFields:l,setTaxInfoFields:C}),E&&s.jsx("div",{className:"mt-1 text-[0.93rem] text-[#df1b41]",style:{transition:"height 0.35s ease 0s"},children:E})]})]}):null});De.displayName="CheckoutTaxIdCollectionFormFull";const Pt=({billingCountry:t,taxInfoFields:e,setTaxInfoFields:r})=>{const n=W(),o=y.useMemo(()=>Ot(t??"").map(u=>({label:Mt(u),value:u,sortKey:Be(u.type),placeholder:u.placeholder})).toSorted((u,l)=>u.sortKey<l.sortKey?-1:1),[t]),a=y.useMemo(()=>{const i=o.find(u=>u.value===e.taxIdType);return i===void 0?null:i},[o,e]);return y.useEffect(()=>{if(a==null&&o.length>0){const i=o.find(u=>u.value.country===t)??o[0];r(u=>({...u,taxIdType:i.value}))}},[t,a,r,o]),s.jsxs("div",{className:"tax-id-form flex flex-col gap-2",children:[s.jsx("div",{className:"form-row",children:s.jsx("input",{type:"text",id:"businessName",style:{width:"100%",borderRadius:"0.5rem",border:"1px solid #e0e0e0",padding:"0.5rem"},value:e.businessName,onChange:i=>r(u=>({...u,businessName:i.target.value})),placeholder:n.formatMessage(ie.businessNamePlaceholder)})}),s.jsx("div",{className:"form-row",children:s.jsx(ot,{placeholder:n.formatMessage(ie.taxIdTypePlaceholder),options:o,value:a,onChange:i=>{r(u=>({...u,taxIdType:i?.value??null}))},isSearchable:!1})}),s.jsx("div",{className:"form-row",children:s.jsx("input",{type:"text",id:"taxId",style:{width:"100%",borderRadius:"0.5rem",border:"1px solid #e0e0e0",padding:"0.5rem"},value:e.taxIdValue,onChange:i=>r(u=>({...u,taxIdValue:i.target.value})),placeholder:a?.placeholder??n.formatMessage(ie.taxIdPlaceholder)})})]})},ie=Oe({taxIdPlaceholder:{id:"CheckoutTaxIdCollectionForm.taxIdPlaceholder",defaultMessage:"Tax ID"},taxIdTypePlaceholder:{id:"CheckoutTaxIdCollectionForm.taxIdTypePlaceholder",defaultMessage:"Tax type"},businessNamePlaceholder:{id:"CheckoutTaxIdCollectionForm.businessNamePlaceholder",defaultMessage:"Business name"}}),Tt="3950229590",Nt="is_layout_accordion_enabled",Rt="is_layout_accordion_expanded",Lt="is_layout_show_card_terms";function Ft({className:t,processorEntity:e,automaticTaxEnabled:r}){const n=re(),o=He(),a=W(),i=Ke(),u=Ge(),[l,C]=y.useState(n?.billingAddress?.address.country??null);async function E(c){try{if(!n||r)return;const m=c??l;if(m==null)return;const p={checkout_session_id:n.id,checkout_email:n.email,billing_country:m,currency:n.currency,tax_id:n.taxIdInfo?.taxId?.value,processor_entity:e,billing_address:n.billingAddress?.address??{}};await n.runServerUpdate(async()=>{await Ze.safePost("/payments/checkout/taxes",{requestBody:p})})}catch(m){J.addError("Failed to fetch taxes",{error:m})}}const[g]=y.useState(!!n?.email),[f,T]=y.useState(null),w=y.useRef(null),A=y.useRef(null),k=y.useRef(null),b=y.useRef(null),U=y.useRef(null),V=y.useRef(null),N=y.useMemo(()=>Ut(o),[o]);async function S(){const c=V.current;return!c||!c.validate()?!1:await c.update()}const j=at({defaultValues:{email:n?.email??"",hasAcceptedTermsOfService:!1,hasCompletePaymentElement:!1,hasCompleteBillingAddress:!1},validators:{onChange:({value:c})=>{const m={},{hasAcceptedTermsOfService:p,hasCompleteBillingAddress:O,hasCompletePaymentElement:R}=c;return p||(m.hasAcceptedTermsOfService=a.formatMessage({id:"CheckoutForm.inputLabelTermsOfServiceRequired",defaultMessage:"Agree to OpenAI, LLC's terms to complete your transaction."})),O||(m.hasCompleteBillingAddress=a.formatMessage({id:"CheckoutForm.inputLabelBillingAddressRequired",defaultMessage:"Your billing address is required."})),R||(m.hasCompletePaymentElement=a.formatMessage({id:"UBzTsj",defaultMessage:"Your payment method is required."})),{fields:m}},onBlur:({value:c})=>{const m={},{email:p}=c;return p||(m.email=a.formatMessage({id:"CheckoutForm.inputLabelEmailRequired",defaultMessage:"Your email is required."})),{fields:m}},onBlurAsync:async({value:c})=>{const m={},{email:p}=c;if(n.email!==p){const O=await n.updateEmail(p);if(O.type==="error")switch(O.error.code){case"incompleteEmail":m.email=a.formatMessage({id:"CheckoutForm.inputLabelEmailIncomplete",defaultMessage:"Your email is incomplete."});break;case"invalidEmail":m.email=a.formatMessage({id:"CheckoutForm.inputLabelEmailInvalid",defaultMessage:"Your email is invalid."});break}}return{fields:m}}},canSubmitWhenInvalid:!0,onSubmitInvalid:async({formApi:c})=>{n?.canConfirm||await n.confirm(),await S();const p=(c.getFieldMeta("email")?.errors??[]).length>0,R=(c.getFieldMeta("hasAcceptedTermsOfService")?.errors??[]).length>0,ne=(c.getFieldMeta("hasCompletePaymentElement")?.errors??[]).length>0,_=(c.getFieldMeta("hasCompleteBillingAddress")?.errors??[]).length>0;p?(w.current?.scrollIntoView({behavior:"smooth",block:"center"}),A.current?.focus({preventScroll:!0})):ne?b.current?.scrollIntoView({behavior:"smooth",block:"center"}):_?U.current?.scrollIntoView({behavior:"smooth",block:"center"}):R&&k.current?.scrollIntoView({behavior:"smooth",block:"center"})},onSubmit:async()=>{try{if(!await S())return;const m=await n.confirm({redirect:"always"});switch(m.type){case"success":u.success(a.formatMessage({id:"CheckoutForm.bannerMessagePaymentSuccess",defaultMessage:"Payment successfully processed"}));break;case"error":J.addError("Failed to process Stripe checkout",{error:m.error}),T(m.error.message??a.formatMessage({id:"CheckoutForm.bannerMessagePaymentFailure",defaultMessage:"Failed to process payment"}));break}}catch(c){u.danger(Je.somethingWentWrong,{toastId:"checkout_form"}),J.addError(c)}}});return s.jsx("form",{className:q(t),onSubmit:c=>{c.preventDefault(),j.handleSubmit()},children:s.jsxs("div",{className:"flex flex-col gap-6",children:[s.jsxs(B,{ref:w,children:[i?s.jsx(z,{title:ge({id:"CheckoutForm.headingContactInformation",defaultMessage:"Contact information"})}):null,s.jsx(j.Field,{name:"email",children:c=>{const p=c.getMeta().errors.length>0&&(c.getMeta().isBlurred||c.getMeta().isPristine);return s.jsxs("div",{children:[s.jsxs("label",{htmlFor:c.name,className:"flex flex-col",children:[s.jsx("span",{className:"color-[rgb(48, 49, 61)] mb-[0.25rem] text-[0.93rem]",children:s.jsx(D,{id:"CheckoutForm.inputLabelEmail",defaultMessage:"Email"})}),s.jsx("input",{ref:A,id:c.name,disabled:g,name:c.name,onBlur:c.handleBlur,onChange:O=>{c.setMeta(R=>({...R,isBlurred:!1})),c.handleChange(O.target.value)},type:"email",value:c.state.value,className:q("color-[rgb(48, 49, 61)] animate-stripeInputShow rounded-[5px] p-3 outline-none focus:border-white",{"bg-[rgb(247,247,247)]":g,"border-[#df1b41] shadow-none focus:border-[#0570de] focus:shadow-[0px_1px_1px_rgba(0,0,0,0.03),0px_3px_6px_rgba(0,0,0,0.02),0_0_0_3px_hsla(210,96%,45%,0.25),0_1px_1px_0_rgba(0,0,0,0.08)]":p,"border-[#e6e6e6] shadow-[0px_1px_1px_rgba(0,0,0,0.03),_0px_3px_6px_rgba(0,0,0,0.02)] focus:border-[#0570de] focus:shadow-[0px_1px_1px_rgba(0,0,0,0.03),0px_3px_6px_rgba(0,0,0,0.02),0_0_0_3px_hsla(210,96%,45%,0.25),0_1px_1px_0_rgba(0,0,0,0.08)]":!p}),style:{transition:"background 0.15s ease, border 0.15s ease, box-shadow 0.15s ease, color 0.15s ease",backgroundColor:g?"rgb(247,247,247)":""}})]}),s.jsx(be,{errors:c.state.meta.errors.filter(O=>!ve(O)),shouldShowErrors:p})]})}})]}),s.jsxs(B,{ref:b,children:[s.jsx(z,{title:ge({id:"CheckoutForm.headingPaymentMethod",defaultMessage:"Payment method"})}),s.jsx(j.Field,{name:"hasCompletePaymentElement",children:c=>s.jsx(_t,{options:N,onChange:({complete:m})=>c.handleChange(m)})})]}),s.jsxs(B,{ref:U,children:[s.jsx(z,{title:{id:"CheckoutForm.headingBillingAddress",defaultMessage:"Billing address",description:"Heading for the section of the checkout where we collect contact information"}}),s.jsx(j.Field,{name:"hasCompleteBillingAddress",children:c=>s.jsx(It,{options:{mode:"billing"},onChange:async({complete:m,value:p})=>{c.handleChange(m),C(p.address.country),await E(p.address.country)}})})]}),s.jsx(De,{billingCountry:l,ref:V}),s.jsx(B,{ref:k,children:s.jsx(j.Field,{name:"hasAcceptedTermsOfService",children:c=>{const m=c.state.meta.isTouched&&c.state.meta.errors.length>0;return s.jsxs("div",{children:[s.jsx(Me,{id:"subscription-tos",className:"self-start",style:{borderColor:m?"#df1b41":void 0},checked:c.state.value,onChange:p=>c.handleChange(p.currentTarget.checked),label:s.jsx(Bt,{})}),s.jsx(be,{errors:c.state.meta.errors.filter(p=>!ve(p)),shouldShowErrors:m})]})}})}),f&&s.jsx("div",{className:"rounded border border-red-200 bg-red-50 px-3 py-2 text-[13px] text-red-700",children:f}),s.jsx(j.Subscribe,{children:c=>s.jsx("button",{disabled:c.isSubmitting,type:"submit",className:q("flex h-[44px] items-center justify-center rounded-md border-none bg-[rgb(16,163,117)] p-0 font-medium shadow-[inset_0_0_0_1px_rgba(50,50,93,0.1),0_2px_5px_0_rgba(50,50,93,0.1),0_1px_1px_0_rgba(0,0,0,0.07)] outline-none",{"text-[rgba(255,255,255,1)]":c.isValid,"text-[rgba(255,255,255,0.6)]":!c.isValid}),children:c.isSubmitting?s.jsx(ze,{}):s.jsx(D,{id:"CheckoutForm.buttonSubscribe",defaultMessage:"Subscribe"})})})]})})}function Ut(t){const e=Xe(t,Tt),r=e.get(Nt,!1),n=e.get(Rt,!1),o=e.get(Lt,!0);let a={};return o||(a={card:"never"}),r?{layout:{type:"accordion",defaultCollapsed:!n,radios:!0,spacedAccordionItems:!1},terms:a}:{layout:{type:"tabs"},terms:a}}function Bt(){return s.jsx("div",{className:"Text-color--gray600 text-[13px]",children:s.jsx(D,{id:"CheckoutForm.termsLabel",defaultMessage:"You'll be charged the amount and at the frequency listed above until you cancel. We may change our prices as described in our <termsOfUseLink>Terms of Use</termsOfUseLink>. You can <cancelAnytimeLink>cancel any time</cancelAnytimeLink>. By subscribing, you agree to OpenAI's <termsOfUseLink>Terms of Use</termsOfUseLink> and <privacyPolicyLink>Privacy Policy</privacyPolicyLink>, and you authorize us to store your payment method for renewals and other purchases.",values:{termsOfUseLink:t=>s.jsx("a",{className:"Terms-link",href:"https://openai.com/terms/",rel:"noopener noreferrer",target:"_blank",children:t}),cancelAnytimeLink:t=>s.jsx("a",{className:"Terms-link",href:"https://help.openai.com/en/articles/7232927-how-do-i-cancel-my-chatgpt-plus-subscription",rel:"noopener noreferrer",target:"_blank",children:t}),privacyPolicyLink:t=>s.jsx("a",{className:"Terms-link",href:"https://openai.com/privacy/",rel:"noopener noreferrer",target:"_blank",children:t})}})})}const Dt="/assets/logo-c8firrye.webp",Vt={src:Dt};function qt({className:t}){const e=tt();return s.jsxs("button",{type:"button",onClick:()=>e("/"),className:q("group relative flex w-[100px] items-center focus:outline-none",t),children:[s.jsx("div",{className:"flex items-center text-[hsla(0,0%,10%,0.4)] group-hover:text-[hsla(0,0%,10%,0.8)] lg:absolute lg:-start-5 lg:top-1",children:s.jsx(Qe,{className:"icon-sm me-1.5 transition-colors duration-100 ease-in-out"})}),s.jsx("img",{src:Vt.src,alt:"",className:"w-full"})]})}function fe({amountMinorUnits:t,currency:e}){const r=t/100;return new Intl.NumberFormat(void 0,{style:"currency",currency:e}).format(r)}function Yt({className:t}){return s.jsxs("div",{className:t,children:[s.jsx(qt,{className:"mb-5 lg:mb-8"}),s.jsx(Wt,{className:"mb-7"}),s.jsx($t,{})]})}function Wt({className:t}){const e=re(),r=e.lineItems[0].name,n=fe({amountMinorUnits:e.total.total.minorUnitsAmount,currency:e.currency}),o=(e.discountAmounts||[]).filter(i=>i.recurring?.type!=="forever").length>0,a=e.recurring?.interval??"not_recurring";return s.jsxs("div",{className:q("text-center lg:text-start",t),children:[s.jsx("div",{className:"Text-color--gray500 font-medium",children:s.jsx(D,{...M.checkoutHeadingForSubscription,values:{lineItem:r}})}),s.jsxs("div",{className:"font-semibold",children:[s.jsx("span",{className:"me-2 text-[28px] lg:text-[36px]",children:n}),s.jsx("span",{className:"Text-color--gray500 text-[14px]",children:s.jsx(D,{...M.periodPrice,values:{interval:a,hasExpiringDiscounts:o?"discounted":"none"}})})]})]})}function $t(){const t=re(),e=W(),r=t.currency,n=t.total.subtotal.minorUnitsAmount-t.total.discount.minorUnitsAmount-t.total.taxInclusive.minorUnitsAmount,o=t.lineItems.map(i=>{const u=Jt(i);return s.jsx(H,{amountMinorUnits:i.subtotal.minorUnitsAmount,currency:r,subtitle:u?e.formatMessage(u):"",title:i.name},i.id)}),a=(t.discountAmounts??[]).map((i,u)=>s.jsx(Gt,{discount:i,currency:r},u));return s.jsxs("div",{className:"flex flex-col gap-[16px]",children:[o,s.jsx(_e,{}),s.jsx(H,{amountClassName:"font-semibold",amountMinorUnits:t.total.subtotal.minorUnitsAmount,currency:r,title:e.formatMessage(M.subtotal)}),a,s.jsx(Ht,{currency:r,taxAmounts:t.taxAmounts??[],taxExclusiveAmount:n}),s.jsx(_e,{}),s.jsx(H,{amountClassName:"text-base font-semibold",amountMinorUnits:t.total.total.minorUnitsAmount,currency:r,title:e.formatMessage(M.totalDueToday)})]})}function Ht({taxAmounts:t,currency:e,taxExclusiveAmount:r}){const n=W();return ye(t)?s.jsx(H,{amountMinorUnits:0,currency:e,title:n.formatMessage(M.tax)}):t.map((o,a)=>{const i=ye(o.displayName)?n.formatMessage(M.tax):o.displayName,C=(o.minorUnitsAmount/r*100).toFixed(1).replace(/\.?0+$/,""),E=`${i} (${C}%)`;return s.jsx(H,{amountMinorUnits:o.minorUnitsAmount,currency:e,title:E},a)})}function H({amountClassName:t,amountMinorUnits:e,currency:r,subtitle:n,title:o}){return s.jsxs("div",{className:"flex justify-between text-[14px]",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:o}),n?s.jsx("span",{className:"Text-color--gray400 text-[12px]",children:n}):null]}),s.jsx("span",{className:t,children:fe({amountMinorUnits:e,currency:r})})]})}function Kt(t,e){let r;const n=(e.percentOff??0)/100,o=e.amount,a=e.recurring,i=a?.type==="repeating"?a.durationInMonths:null;return e.recurring&&e.recurring.type==="repeating"?r=n?M.discountPercentOffRecurring:M.fixedAmountOffRecurring:e.recurring?r=n?M.discountPercentOffIndefinite:M.fixedAmountOffIndefinite:r=n?M.discountPercentOffOnce:M.fixedAmountOffOnce,t.formatMessage(r,{formattedAmount:o,percentOff:n,durationInMonths:i})}function Gt({discount:t,currency:e}){const r=W(),n=t.displayName,o=-1*t.minorUnitsAmount,a=Kt(r,t);return s.jsxs("div",{className:"flex justify-between text-[14px]",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("span",{className:"rounded-md bg-gray-100 px-2 py-2 font-medium",children:[s.jsx(st,{className:"icon-sm relative top-0.5 float-start me-1"}),n]}),a?s.jsx("span",{className:"Text-color--gray400 text-[12px]",children:a}):null]}),s.jsx("span",{children:fe({amountMinorUnits:o,currency:e})})]})}function _e(){return s.jsx("div",{className:"Border-top-gray50"})}function Jt(t){if(t.recurring)switch(t.recurring.interval){case"month":return M.billingPeriodMonthly;case"year":return M.billingPeriodYearly;default:return J.addError("unexpected_interval_for_line_item",{interval:t.recurring.interval}),null}return null}const M=Oe({checkoutHeadingForSubscription:{id:"InvoiceSummary.checkoutHeadingForSubscription",defaultMessage:"Subscribe to {lineItem}"},periodPrice:{id:"InvoiceSummary.periodPrice",defaultMessage:"{interval, select, month {per month} year {per year} other {}}{hasExpiringDiscounts, select, discounted { until coupon expires} other {}}"},billingPeriodMonthly:{id:"InvoiceSummary.billingPeriodMonthly",defaultMessage:"Billed monthly"},billingPeriodYearly:{id:"InvoiceSummary.billingPeriodYearly",defaultMessage:"Billed yearly"},subtotal:{id:"InvoiceSummary.subtotal",defaultMessage:"Subtotal"},totalDueToday:{id:"InvoiceSummary.totalDueToday",defaultMessage:"Total due today"},tax:{id:"InvoiceSummary.tax",defaultMessage:"Tax"},discountPercentOffIndefinite:{id:"InvoiceSummary.discountPercentOffIndefinite",defaultMessage:"{percentOff, number, ::percent} off"},discountPercentOffOnce:{id:"InvoiceSummary.discountPercentOffOnce",defaultMessage:"{percentOff, number, ::percent} off for a month"},discountPercentOffRecurring:{id:"InvoiceSummary.discountPercentOffRecurring",defaultMessage:"{percentOff, number, ::percent} off for {durationInMonths, plural, one {a month} other {{durationInMonths, number} months}}"},fixedAmountOffIndefinite:{id:"InvoiceSummary.fixedAmountOffIndefinite",defaultMessage:"{formattedAmount} off"},fixedAmountOffOnce:{id:"InvoiceSummary.fixedAmountOffOnce",defaultMessage:"{formattedAmount} off for a month"},fixedAmountOffRecurring:{id:"InvoiceSummary.fixedAmountOffRecurring",defaultMessage:"{formattedAmount} off for {durationInMonths, plural, one {a month} other {{durationInMonths, number} months}}"}}),zt=({processorEntity:t,automaticTaxEnabled:e})=>jt()?s.jsxs("div",{className:"checkout-page flex h-full flex-col items-center gap-12 overflow-y-auto bg-white px-4 lg:flex-row lg:items-start lg:justify-center lg:gap-0 lg:px-0",children:[s.jsx("div",{className:"flex w-full justify-center pt-4 lg:min-h-full lg:flex-1 lg:justify-end lg:pe-20 lg:pt-12 lg:pb-12",children:s.jsx(Yt,{className:"w-full max-w-[380px]"})}),s.jsx("div",{className:"pb-12 lg:min-h-full lg:flex-1 lg:ps-20 lg:pt-12 lg:shadow-[15px_0_30px_0_rgba(0,0,0,0.18)]",children:s.jsx(Ft,{className:"w-full max-w-[380px]",processorEntity:t,automaticTaxEnabled:e})})]}):null;function Q(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Q=function(e){return typeof e}:Q=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q(t)}var Ve="basil",Xt=function(e){return e===3?"v3":e},qe="https://js.stripe.com",Zt="".concat(qe,"/").concat(Ve,"/stripe.js"),Qt=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,er=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Ie="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",tr=function(e){return Qt.test(e)||er.test(e)},rr=function(){for(var e=document.querySelectorAll('script[src^="'.concat(qe,'"]')),r=0;r<e.length;r++){var n=e[r];if(tr(n.src))return n}return null},we=function(e){var r=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(Zt).concat(r);var o=document.head||document.body;if(!o)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return o.appendChild(n),n},nr=function(e,r){!e||!e._registerWrapper||e._registerWrapper({name:"stripe-js",version:"7.3.0",startTime:r})},$=null,K=null,G=null,sr=function(e){return function(r){e(new Error("Failed to load Stripe.js",{cause:r}))}},or=function(e,r){return function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))}},ar=function(e){return $!==null?$:($=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&e&&console.warn(Ie),window.Stripe){r(window.Stripe);return}try{var o=rr();if(o&&e)console.warn(Ie);else if(!o)o=we(e);else if(o&&G!==null&&K!==null){var a;o.removeEventListener("load",G),o.removeEventListener("error",K),(a=o.parentNode)===null||a===void 0||a.removeChild(o),o=we(e)}G=or(r,n),K=sr(n),o.addEventListener("load",G),o.addEventListener("error",K)}catch(i){n(i);return}}),$.catch(function(r){return $=null,Promise.reject(r)}))},ir=function(e,r,n){if(e===null)return null;var o=r[0],a=o.match(/^pk_test/),i=Xt(e.version),u=Ve;a&&i!==u&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("7.3.0"," expected Stripe.js@").concat(u,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var l=e.apply(void 0,r);return nr(l,n),l},Ae=function(e){var r=`invalid load parameters; expected object of shape

    {advancedFraudSignals: boolean}

but received

    `.concat(JSON.stringify(e),`
`);if(e===null||Q(e)!=="object")throw new Error(r);if(Object.keys(e).length===1&&typeof e.advancedFraudSignals=="boolean")return e;throw new Error(r)},ee,ue=!1,Ye=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];ue=!0;var o=Date.now();return ar(ee).then(function(a){return ir(a,r,o)})};Ye.setLoadParameters=function(t){if(ue&&ee){var e=Ae(t),r=Object.keys(e),n=r.reduce(function(o,a){var i;return o&&t[a]===((i=ee)===null||i===void 0?void 0:i[a])},!0);if(n)return}if(ue)throw new Error("You cannot change load parameters after calling loadStripe");ee=Ae(t)};const hr=et(function(){const e=rt(),r=e.publishable_key,n=y.useMemo(()=>Ye(r,{betas:["custom_checkout_beta_6","custom_checkout_server_updates_1"],locale:"auto"}),[r]);switch(e.tag){case"hosted_checkout_session":return window.location.href=e.url,null;case"custom_checkout_session":{const o=e.client_secret;return s.jsx(Ue,{stripe:n,options:{fetchClientSecret:()=>Promise.resolve(o),elementsOptions:{appearance:{rules:{".Input--invalid":{boxShadow:"none"}}}}},children:s.jsx(zt,{processorEntity:e.processor_entity,automaticTaxEnabled:e.automatic_tax_enabled})})}}});export{hr as default};
//# sourceMappingURL=lny3qwy11xtjdbiz.js.map
