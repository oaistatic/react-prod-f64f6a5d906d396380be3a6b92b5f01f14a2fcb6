import{c2 as C,bg as U,f6 as V,cD as A,P as R,ch as Q,H as G,D as T,kw as $}from"./g670b8vtkhx0yc6d.js";import{e as J,r as d,j as r,b,l as N,aq as H,h as I}from"./gg0tb34p9fzo1omt.js";import{u as X}from"./bckf7qgfy3ojc3v4.js";import{mS as Y,mT as K,mU as Z,bR as ee,cI as ae,cD as k,mV as te,cO as se}from"./forbprkns1cohsbl.js";import{a as re,b as oe}from"./pnx8yl9r7yj5moem.js";import{C as _,s as v}from"./kixrx07i59clw88k.js";import{u as ne,B as le}from"./cxredmx55a5m8qjp.js";import{S as ce}from"./eyn5f5xfm2iythcf.js";import{u as ie}from"./gfuvaxw6r0src7j4.js";import"./iej0cupg2dqkmejt.js";import"./j8pmm8m4sd7eamqj.js";const u=J({teamSignUpPageTitle:{id:"K298ru",defaultMessage:"Sign up for a team plan"},tellUsAboutWorkStepTitle:{id:"+lyykJ",defaultMessage:"Tell us about your work"},tellUsAboutWorkStepSubtitle:{id:"nJKe8n",defaultMessage:"We'll use these details to suggest ideas that might be useful in your role."},workspaceNameStepTitle:{id:"Q5n2G9",defaultMessage:"Set up your workspace"},workspaceNameStepSubtitle:{id:"1d+NmM",defaultMessage:"You'll use this secure space to manage and collaborate with your team."},workspaceNameLabel:{id:"J+JnvS",defaultMessage:"Workspace name"},workspaceNamePlaceholder:{id:"k8/Vt/",defaultMessage:"Enter your workspace name"},roleLabel:{id:"Hv0Hlm",defaultMessage:"Role"},rolePlaceholder:{id:"QG2HaS",defaultMessage:"Select your role"},workspaceDepartmentLabel:{id:"I0SBO1",defaultMessage:"Area of work"},workspaceDepartmentPlaceholder:{id:"bewF7V",defaultMessage:"Select your area of work"},workspaceCompanySizeLabel:{id:"GaC0Ny",defaultMessage:"Company size"},workspaceCompanySizePlaceholder:{id:"XogWLG",defaultMessage:"Select your company size"},seatsCountLabel:{id:"sNSlDl",defaultMessage:"Seats"},purchaseStepTitle:{id:"ie58/4",defaultMessage:"Set up your Team plan"},oneDollarPromoTitle:{id:"8QMwdw",defaultMessage:"Start your trial"},oneDollarPromoSubtitle:{id:"9R8YzM",defaultMessage:"Try ChatGPT Team for $1 for up to 5 seats. After the first month, itâ€™s $30 per seat."},planTypeLabel:{id:"/+0+uT",defaultMessage:"Plan type"},annualPlanLabel:{id:"UVZBAq",defaultMessage:"Annually ({percent}% off)"},monthlyPlanLabel:{id:"1zZUTb",defaultMessage:"Monthly"},planSummaryTitle:{id:"GUbMAI",defaultMessage:"Plan Summary"},allPlansTodayTotal:{id:"CNJp97",defaultMessage:"Today's total"},today:{id:"QM0nNf",defaultMessage:"Today"},fieldRequired:{id:"IHKkpE",defaultMessage:"{fieldName} is required"},continueButton:{id:"Jehtpt",defaultMessage:"Continue"}}),me=s=>d.createElement("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg","data-rtl-flip":"",...s},d.createElement("path",{d:"M6.88374 1.94433C7.14187 1.77382 7.49338 1.80202 7.72065 2.02929C7.94792 2.25656 7.97612 2.60807 7.80561 2.8662L7.72065 2.9707L4.69136 5.99999L7.72065 9.02929L7.80561 9.13378C7.97612 9.39191 7.94792 9.74343 7.72065 9.9707C7.49338 10.198 7.14187 10.2262 6.88374 10.0557L6.77925 9.9707L3.27925 6.4707C3.01955 6.211 3.01955 5.78899 3.27925 5.52929L6.77925 2.02929L6.88374 1.94433Z"})),P=({content:s,onPrevious:l})=>r.jsxs("div",{className:"relative flex h-screen w-screen items-start justify-center pt-24 [@media(min-width:450px)]:pt-[15vh]",children:[l&&r.jsx("div",{className:"absolute start-4 top-4",children:r.jsx(U,{onClick:l,icon:me,color:"secondary"})}),r.jsx("div",{className:"flex max-w-4xl gap-6",children:r.jsx("div",{className:"flex max-w-full flex-none items-center justify-center [@media(min-width:450px)]:max-w-[450px]",children:s})})]}),j=({title:s,subTitle:l,children:e})=>r.jsxs("div",{className:"box-content flex w-full flex-col gap-6 px-6",children:[r.jsxs("div",{className:"flex flex-col gap-4 text-center",children:[r.jsx("div",{className:"text-3xl font-normal",children:s}),l&&r.jsx("div",{className:"text-token-text-secondary",children:l})]}),e]}),E=({onClick:s})=>{const[l,e]=d.useState(!1),a=b();return r.jsx(U,{size:"large",loading:l,onClick:async()=>{e(!0),await s(),e(!1)},children:a.formatMessage(u.continueButton)})},L=C.label`font-medium`,q=C.div`text-red-500 text-sm mb-2`,ue=C.input`rounded-full border border-token-border-default bg-token-bg-primary placeholder:text-token-text-tertiary px-5 py-3`,z=s=>{switch(s.formType){case"input":return r.jsx(O,{...s});case"select":return r.jsx(pe,{...s})}return null},O=({label:s,name:l,placeholder:e,value:a,onChange:m,required:c,error:p,...f})=>r.jsxs("div",{className:"flex flex-col gap-1.5",children:[r.jsx(L,{children:s}),r.jsx(ue,{name:l,placeholder:e,value:a,onChange:y=>m(y.target.value),required:c,...f}),p&&r.jsx(q,{children:p})]}),pe=({label:s,value:l,onChange:e,placeholder:a,error:m,options:c})=>r.jsxs("div",{className:"flex flex-col gap-1.5",children:[r.jsx(L,{children:s}),r.jsx(Y,{triggerClassName:"w-full flex justify-between rounded-full border border-token-border-default bg-token-bg-primary data-placeholder:text-token-text-tertiary px-5 py-3 text-md h-12",contentClassName:"max-h-80",options:c,value:l,onValueChange:e,placeholder:a}),m&&r.jsx(q,{children:m})]}),de=({formData:s,onNext:l})=>{const e=b(),[a,m]=d.useState({role:s.role??"",department:s.department??""}),[c,p]=d.useState({}),f=(t,n)=>{m(h=>({...h,[t]:n})),p(h=>({...h,[t]:""}))},y=d.useMemo(()=>{const t=K.map(n=>({label:e.formatMessage(n.displayValue),value:n.id}));return t.sort((n,h)=>n.label.localeCompare(h.label)),t},[e]),o=d.useMemo(()=>{const t=Z.map(n=>({label:e.formatMessage(n.displayValue),value:n.id}));return t.sort((n,h)=>n.label.localeCompare(h.label)),t},[e]),i=d.useMemo(()=>[{formType:"select",label:e.formatMessage(u.roleLabel),name:"role",placeholder:e.formatMessage(u.rolePlaceholder),value:a.role,onChange:t=>f("role",t),error:c.role,required:!0,options:o},{formType:"select",label:e.formatMessage(u.workspaceDepartmentLabel),name:"department",placeholder:e.formatMessage(u.workspaceDepartmentPlaceholder),value:a.department,onChange:t=>f("department",t),error:c.department,required:!0,options:y}],[y,c.department,c.role,a.department,a.role,e,o]),g=()=>{const t={};return i.forEach(n=>{n.required&&!a[n.name]&&(t[n.name]=e.formatMessage(u.fieldRequired,{fieldName:n.label}))}),p(t),Object.values(t).every(n=>!n)};return r.jsx(P,{content:r.jsxs(j,{title:e.formatMessage(u.tellUsAboutWorkStepTitle),subTitle:e.formatMessage(u.tellUsAboutWorkStepSubtitle),children:[r.jsx("div",{className:"flex flex-col gap-6",children:i.map(t=>d.createElement(z,{...t,key:t.name}))}),r.jsx(E,{onClick:async()=>{g()&&await l(a)}})]})})},fe=({onNext:s,onPrevious:l,initialBillingDetails:e})=>{const a=b(),m=ee(),{annualBillingPlan:c}=ae(e.currency),p=Math.floor(100-c.discountedMonthlyCost/c.monthlyCost*100),{selectedPlan:f,setSelectedPlan:y,numSeats:o,setNumSeats:i,promoData:g,TEAM1DOLLAR_COUPON_IsEligible:t}=ne(),n={priceInterval:f,billingDetails:e,numSeats:o,promoData:g};return r.jsx(P,{onPrevious:()=>l({...n}),content:r.jsxs(j,{title:t?a.formatMessage(u.oneDollarPromoTitle):a.formatMessage(u.purchaseStepTitle),subTitle:t?a.formatMessage(u.oneDollarPromoSubtitle):void 0,children:[r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsx(O,{formType:"input",value:o,onChange:h=>i(Math.max(m,Number(h))),className:"with-spinner",label:a.formatMessage(u.seatsCountLabel),name:"numSeats",type:"number",min:m,step:1}),r.jsxs("div",{className:"flex flex-col gap-1.5",children:[r.jsx(L,{children:a.formatMessage(u.planSummaryTitle)}),r.jsxs("div",{className:"border-token-border-default flex flex-col gap-6 rounded-3xl border p-5",children:[!(t&&f===k.FLEXIBLE)&&r.jsx(ce,{ariaLabel:u.planTypeLabel,leftItem:{label:a.formatMessage(u.annualPlanLabel,{percent:p}),value:k.ANNUAL},rightItem:{label:a.formatMessage(u.monthlyPlanLabel),value:k.FLEXIBLE},value:f,onChange:y}),r.jsx(le,{numSeats:o,selectedPlan:f,billingDetails:e,totalLabel:u.allPlansTodayTotal,billDate:a.formatMessage(u.today),promoData:g})]})]})]}),r.jsx(E,{onClick:()=>s({...n})})]})})},ge=({formData:s,onNext:l,onPrevious:e})=>{const a=b(),[m,c]=d.useState({workspaceName:s.workspaceName??"",companySize:s.companySize??""}),[p,f]=d.useState({}),y=(t,n)=>{c(h=>({...h,[t]:n})),f(h=>({...h,[t]:""}))},o=te.map(t=>({label:typeof t.displayValue=="string"?t.displayValue:a.formatMessage(t.displayValue),value:t.id})),i=d.useMemo(()=>[{formType:"input",label:a.formatMessage(u.workspaceNameLabel),name:"workspaceName",placeholder:a.formatMessage(u.workspaceNamePlaceholder),value:m.workspaceName,onChange:t=>y("workspaceName",t),error:p.workspaceName,required:!0},{formType:"select",label:a.formatMessage(u.workspaceCompanySizeLabel),name:"companySize",placeholder:a.formatMessage(u.workspaceCompanySizePlaceholder),value:m.companySize,onChange:t=>y("companySize",t),error:p.companySize,required:!1,options:o}],[p.companySize,p.workspaceName,m.companySize,m.workspaceName,a,o]),g=()=>{const t={};return i.forEach(n=>{n.required&&!m[n.name]&&(t[n.name]=a.formatMessage(u.fieldRequired,{fieldName:n.label}))}),f(t),Object.values(t).every(n=>!n)};return r.jsx(P,{onPrevious:e?()=>e({...m}):void 0,content:r.jsxs(j,{title:a.formatMessage(u.workspaceNameStepTitle),subTitle:a.formatMessage(u.workspaceNameStepSubtitle),children:[r.jsx("div",{className:"flex flex-col gap-6",children:i.map(t=>d.createElement(z,{...t,key:t.name}))}),r.jsx(E,{onClick:async()=>{g()&&await l({...m})}})]})})};var F=(s=>(s.AboutWork="about-work",s.WorkspaceInfo="workspace-info",s.ConfigurePlan="configure-plan",s))(F||{});const ye=V(Object.values(F),void 0),he=({pendingWorkspace:s})=>{const l=b(),[e,a]=d.useState({workspaceName:s?.workspace_name??void 0,role:s?.role??void 0,department:s?.department??void 0,companySize:s?.company_size??void 0,numSeats:s?.seat_quantity??void 0}),m=Se({data:e}),c=A(),p=N(),f=new URLSearchParams(p.search).get(_)??new URLSearchParams(s?.query_params??"").get(_)??void 0,y=H(),{country:o,userCountry:i}=re({initialCountryCode:f}),g=oe({country:o,currentAccount:c,location:"TeamDirectSignUpFlow"}),t=ye(s?.step_name),{step:n,nextStep:h,previousStep:B}=xe({initialStep:t&&x.includes(t)?t:void 0});d.useEffect(()=>{(()=>{v({step_name:s?.step_name??x[0],query_params:p.search,user_segment:"v1"})})()},[]),d.useEffect(()=>{const S=p.key;R.logEventWithStatsig("Account Pay: Team Direct Sign Up Flow","chatgpt_account_payment_team_direct_sign_up_flow",{...c?.subscriptionAnalyticsParams,referrer:document.referrer,initialTab:s?.step_name,currentTab:n,locationKey:S,navigationType:y,initialCountrySelectorCountry:f??o,selectedCountry:g.country??"",selectedCurrency:g.currency??"",userCountry:i??""})},[n]);const W=()=>{switch(n){case"about-work":return r.jsx(de,{formData:e,onNext:async S=>{const w={...e,...S};a(w),await h(w)}});case"workspace-info":return r.jsx(ge,{formData:e,onNext:async S=>{const w={...e,...S};a(w),await h(w)}});case"configure-plan":return r.jsx(fe,{initialBillingDetails:g,onNext:async S=>{await m({...e,...S})},onPrevious:S=>{const w={...e,...S};a(w),B(w)}});default:return null}};return r.jsxs(r.Fragment,{children:[r.jsx("title",{children:l.formatMessage(u.teamSignUpPageTitle)}),W()]})},Se=({data:s})=>{const{prepareCheckoutSession:l,navigateToCheckout:e}=X(),a=Q(),m=b(),c=A();return d.useCallback(async({priceInterval:f,billingDetails:y,numSeats:o,promoData:i})=>{try{R.logEvent("Account Pay: Payment Checkout Clicked",{planType:G.TEAM,...c?.subscriptionAnalyticsParams,referrer:document.referrer});const g=await l({plan_name:"chatgptteamplan",team_plan_data:{workspace_name:s.workspaceName??"",price_interval:f,seat_quantity:o},billing_details:y,promo_campaign:f===k.FLEXIBLE?i?.coupon:null,cancel_url:window.location.href});await e(g)}catch(g){T.addError(g),a.warning(m.formatMessage(se.paymentErrorWarning),{hasCloseButton:!0})}},[c?.subscriptionAnalyticsParams,s.workspaceName,m,e,l,a])},D=(s,l)=>{const e=new URLSearchParams(window.location.search);Object.entries(s).forEach(([m,c])=>{e.set(m,c)});const a=`${window.location.pathname}?${e.toString()}`;l?l(a,{replace:!1}):window.history.replaceState(null,"",a)},M="step",x=["workspace-info","configure-plan"],xe=({initialStep:s})=>{const l=I(),e=N(),[a,m]=d.useState(()=>{const o=s??x[0];return D({[M]:o}),o}),c=d.useCallback(o=>{m(o),D({[M]:o},l)},[l]),p=d.useRef(null);d.useEffect(()=>{const i=new URLSearchParams(e.search).get(M);i!==p.current&&i&&x.includes(i)&&i!==a&&c(i),p.current=i},[e.search,c,a]);const f=async o=>{let i=a;const g=x.indexOf(a);g>=0&&g<x.length-1&&(i=x[g+1],c(i));try{await v({workspace_name:o.workspaceName,company_size:o.companySize,department:o.department,role:o.role,step_name:i,query_params:e.search,user_segment:"v1"})}catch(t){T.addError(t)}},y=d.useCallback(async o=>{let i=a;const g=x.indexOf(a);g>0&&(i=x[g-1],c(i));try{await v({workspace_name:o.workspaceName,company_size:o.companySize,department:o.department,role:o.role,step_name:i,query_params:e.search,user_segment:"v1"})}catch(t){T.addError(t)}},[e.search,c,a]);return{step:a,nextStep:f,previousStep:y}},Le=$(function({loaderData:l}){const e=N(),a=I();return d.useEffect(()=>{const c=l.pendingWorkspace?.query_params;if(!c)return;const p=new URLSearchParams(e.search),f=new URLSearchParams(c);let y=!1;for(const[o,i]of f)p.get(o)||(p.set(o,i),y=!0);y&&a(`${e.pathname}?${p.toString()}`,{replace:!0})},[l.pendingWorkspace?.query_params,e.pathname,e.search,a]),ie()?r.jsx(he,{pendingWorkspace:l.pendingWorkspace}):(a(`/?${new URLSearchParams(e.search).toString()}#team-pricing`),null)});export{Le as default};
//# sourceMappingURL=cof8u4fk266hrejp.js.map
