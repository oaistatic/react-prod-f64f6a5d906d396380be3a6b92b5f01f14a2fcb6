import{R as i,D as h,d as C,b1 as c,F as d,mT as n}from"./g670b8vtkhx0yc6d.js";import{cx as l,cy as E}from"./forbprkns1cohsbl.js";import{h as k}from"./gg0tb34p9fzo1omt.js";class m{static async getCheckoutLink(t,o){return i.safePost("/payments/checkout",{requestBody:t,additionalHeaders:l(null,null,null,o?.skipSentinelCheckout?void 0:await E("chatgpt_checkout").catch(s=>{h.addError(s)}))})}static async fetchExistingCheckoutSession(t,o){return await i.safeGet("/payments/checkout/{processor_entity}/{checkout_session_id}",{parameters:{path:{processor_entity:t,checkout_session_id:o}}})}}const g="3950229590",S="enabled_custom_checkout_for_plus",T="enabled_custom_checkout_for_pro",f="enabled_custom_checkout_for_team",r="chatgpt_web_checkout_navigate_to_checkout",p="chatgpt_web_checkout_prepare_checkout_session";function O(a){switch(a){case n.PLUS:return S;case n.PRO:return T;case n.TEAM:return f;default:return null}}function A(a,t){const o=O(t);return o==null?"redirect":d(a,g).get(o,!1)?"custom":"redirect"}function y(){const a=k(),t=C();async function o(e){return e.checkout_ui_mode=A(t,e.plan_name),c(t,{eventName:p,metadata:{ui_mode:e.checkout_ui_mode}}),await m.getCheckoutLink(e)}async function s(e){if("tag"in e)switch(c(t,{eventName:r,metadata:{tag:e.tag}}),e.tag){case"hosted_checkout_session":case"redirect_to_portal":{window.location.href=e.url;break}case"custom_checkout_session":{const u=e.processor_entity,_=e.checkout_session_id;await a({pathname:`/checkout/${u}/${_}`,search:"",hash:""});break}}else if(e.url)c(t,{eventName:r,metadata:{tag:"missing_tag"}}),window.location.href=e.url;else throw new Error("Received invalid response from /checkout")}return{prepareCheckoutSession:o,navigateToCheckout:s}}export{m as C,y as u};
//# sourceMappingURL=bckf7qgfy3ojc3v4.js.map
