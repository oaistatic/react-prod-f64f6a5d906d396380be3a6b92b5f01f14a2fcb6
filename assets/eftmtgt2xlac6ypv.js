import{c as F,b as P,f as R,r as D,e as W,j as t,M as C}from"./gg0tb34p9fzo1omt.js";import{bq as z,w as Q}from"./forbprkns1cohsbl.js";import{mr as Y,cD as H,d as K,eZ as $,ms as Z,mt as y,D as G,b0 as J,cY as v,be as X,bT as V,P as ee,ei as te}from"./g670b8vtkhx0yc6d.js";function se(e){switch(e){case y.SSOMismatch:return{title:a.cannotAccessWorkspace,description:a.ssoMismatchDescription};case y.RequireSSOLogin:return{title:a.cannotAccessWorkspace,description:a.requireSSODescription};case y.UnexpectedSSOLogin:return{title:a.cannotAccessWorkspace,description:a.unexpectedSSODescription}}}const oe=2e3;function le(){"use forget";const e=F.c(32),s=Y(),o=H(),A=P(),N=K(),L=$();let h;e[0]===Symbol.for("react.memo_cache_sentinel")?(h={...Z(),select:ne},e[0]=h):h=e[0];const I=R(h),n=s?.errorCode,d=s!=null&&I.isFetched&&L==null&&!!o,[U,q]=D.useState(!1);let p,f;e[1]!==d?(p=()=>{d&&setTimeout(()=>{q(!0)},oe)},f=[d],e[1]=d,e[2]=p,e[3]=f):(p=e[2],f=e[3]),D.useEffect(p,f);const B=n===y.UnexpectedSSOLogin,m=d&&(B?U:!0),c=z();let g,S;if(e[4]!==c||e[5]!==n||e[6]!==m?(g=()=>{if(!n||!m)return;const b=c?.split("@")?.[1];G.addError(`SSO Catch All Modal: ${n} for ${c??"unknown user"}`,{sso_error:n,email:c,email_hostname:b})},S=[n,m,c],e[4]=c,e[5]=n,e[6]=m,e[7]=g,e[8]=S):(g=e[7],S=e[8]),D.useEffect(g,S),!m)return null;let x;e[9]!==A||e[10]!==s.accountName||e[11]!==o?.name?(x=s?.accountName??o?.name??A.formatMessage(a.workspacePlaceholder),e[9]=A,e[10]=s.accountName,e[11]=o?.name,e[12]=x):x=e[12];const E=x;let M;e[13]!==N||e[14]!==o?(M=()=>{const b=o?.ssoConnectionName?{connection:o.ssoConnectionName}:void 0;J(N,{authType:"login",additionalAuthParams:b})},e[13]=N,e[14]=o,e[15]=M):M=e[15];const T=M;let O;e[16]!==s.errorCode?(O=se(s.errorCode),e[16]=s.errorCode,e[17]=O):O=e[17];const{title:j,description:_}=O;let i;e[18]!==j?(i=t.jsx("div",{className:"flex flex-col",children:t.jsx("div",{className:"text-lg",children:t.jsx(C,{...j})})}),e[18]=j,e[19]=i):i=e[19];let r;e[20]!==E?(r=t.jsx(C,{...a.authenticateNotice,values:{workspaceName:E}}),e[20]=E,e[21]=r):r=e[21];let l;e[22]!==T||e[23]!==r?(l=t.jsx(v.Button,{onClick:T,color:"primary",children:r}),e[22]=T,e[23]=r,e[24]=l):l=e[24];let w;e[25]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx(v.Button,{onClick:ae,children:t.jsx(C,{id:"KlMYRb",defaultMessage:"Log out"})}),e[25]=w):w=e[25];let u;e[26]!==_?(u=t.jsx("div",{className:"flex flex-col space-y-4",children:t.jsx("div",{children:t.jsx(C,{..._})})}),e[26]=_,e[27]=u):u=e[27];let k;return e[28]!==l||e[29]!==u||e[30]!==i?(k=t.jsx(X,{testId:"modal-sso-catch-all",isOpen:!0,onClose:V,type:"warning",size:"custom",className:"max-w-3xl",title:i,icon:Q,primaryButton:l,secondaryButton:w,children:u}),e[28]=l,e[29]=u,e[30]=i,e[31]=k):k=e[31],k}function ae(){ee.logLogOutButtonClicked({location:"sso_catch_all_modal"}),te()}function ne(){return null}const a=W({authenticateNotice:{id:"zF1QJE",defaultMessage:"Authenticate to {workspaceName}"},workspacePlaceholder:{id:"IIY4N4",defaultMessage:"this workspace"},cannotAccessWorkspace:{id:"IlXHdd",defaultMessage:"Cannot Access This Workspace"},ssoMismatchDescription:{id:"xSuU9q",defaultMessage:"The SSO you logged in with does not match the SSO registered for this workspace. Try re-authenticating with that SSO."},unexpectedSSODescription:{id:"uSkRZx",defaultMessage:"This workspace doesn't have an SSO associated with it, but you're trying to log in with SSO. Try logging in with social authentication (i.e. Google) or with your password."},requireSSODescription:{id:"akKMy1",defaultMessage:"Your organization requires that you log in with SSO to access this workspace"}});export{le as default};
//# sourceMappingURL=eftmtgt2xlac6ypv.js.map
