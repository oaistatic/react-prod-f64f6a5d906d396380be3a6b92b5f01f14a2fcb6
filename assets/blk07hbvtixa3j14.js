import{kw as I,f4 as g,jz as l,fv as R,g4 as E,a6 as M,T,bX as F,dQ as B,dZ as O,f9 as k}from"./g670b8vtkhx0yc6d.js";import{O as A,o as D,h as H,r as o,u as N,j as e}from"./gg0tb34p9fzo1omt.js";import{C as Q}from"./mgu35bfjmjtg3slf.js";import{r as _,u as L,s as $,C as y,a as q,g as j,T as K,b as z,d as G}from"./forbprkns1cohsbl.js";import{T as V,C as W}from"./di9mvml43ysl6waf.js";import{g as X}from"./gffsn29yylc5pncm.js";import{C as b,T as Z}from"./c8ep7627nr5x9804.js";import"./go2lz3yja1ixfdzl.js";import"./ihgbljwwpo1mzi43.js";import"./e0kfywq1jfn60tks.js";import"./jh4r0k3f3n3zptua.js";import"./jy1u8exw8iz2slve.js";import"./f76gy0b8ieo4s693.js";import"./gy64pge8qevmvg7e.js";import"./h431y4zi2z7ivdmh.js";import"./jec2dxephizdapuu.js";import"./ejkv34dzwipa230i.js";import"./k5ngqk6bkqja3f09.js";import"./gomrh6779xe4lvq3.js";import"./dku20bpa2hgnbl5b.js";import"./be6sa05e05n18ich.js";import"./j8f1yha947to1zwq.js";import"./l8bgi7e4c78ddktv.js";import"./dl1zw2u5dp7czf6c.js";import"./e6r7gqenbe47ga9h.js";import"./eiffxi5640gvsu4t.js";import"./o68lxipd1oht2mfn.js";import"./kxn66emqpeqvk1h7.js";import"./isn1igquqvc1qe44.js";import"./bk8slwxjkdlmxjxm.js";import"./ob8dna56sqm37byd.js";import"./bznan1jknv1y4qru.js";import"./fz8lyjvdpywhlf94.js";import"./cs320738df36xnc1.js";import"./f51c6zie1stj9anw.js";import"./jpdmr6hprcjyd5ie.js";import"./me58wahxzwibdrxp.js";import"./pnx8yl9r7yj5moem.js";import"./felxwdrg3fgsr1mu.js";import"./kr5jdtt5uczx95b1.js";import"./cx1v46pslsfvescw.js";import"./e83gfa4m2yetz3zf.js";const _e=()=>(_(),null),Le=I(function(){const r=A(),[s]=D(),p=H(),u=g(r.conversationId),i=l(s.get("readonly"),!1),c=l(s.get("isFullScreen"),!1),d=l(s.get("header"),!0),m=l(s.get("appPreview"),!1),a=R(),x=E(),w=l(s.get("hideBottomComposer"),!!i),n=g(r.canmoreId),t=u,f=L();o.useEffect(()=>{$({type:y.Textdoc,textdocId:n})},[n]),q(t,{kind:M.PrimaryAssistant});const h=N();if(o.useEffect(()=>(T.retainThread(t),()=>{setTimeout(()=>{h.invalidateQueries({queryKey:["conversation",t]})},0),T.releaseThread(t)}),[t,h]),o.useEffect(()=>{n||p("/")},[n,p]),o.useEffect(()=>{j().sendMessage({type:b.Loaded})},[n]),!n||f?.type!==y.Textdoc)return null;const P=()=>{j().sendMessage({type:b.Close})},S=i&&!d;return e.jsxs("div",{className:"h-full w-full overflow-hidden contain-content",children:[e.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1, maximum-scale=1"}),e.jsx(F,{clientThreadId:t,children:e.jsx(B,{clientThreadId:t,children:e.jsx(K,{clientThreadId:t,children:m?e.jsx(O,{children:e.jsx(J,{textdocId:f.textdocId})}):S?e.jsxs(e.Fragment,{children:[e.jsx(V,{clientThreadId:t,disableScroll:!a,textdocId:f.textdocId}),e.jsx(W,{})]}):e.jsx(Z,{isEmbedded:!0,hideRunCode:!a,isFullScreen:c,hideHeader:!d,hideBottomComposer:w,isReadonlyFromQueryParam:i,hideRenameButton:x,clientThreadId:t,focusedTextdoc:f,onClose:P},"textdocContent")})})})]})}),J=({textdocId:C})=>{const r=o.useRef(null),s=z(C),[p,u]=o.useState(!1),i=s?.versions??[],c=k(i),d=o.useCallback(G(async m=>{const a=X(m.type,m.content);if(r.current&&(a==="react"||a==="html")){u(!0);const v=r.current.evalAsync({language:a,code:m.content});for await(const x of v)console.debug(x)}u(!1)},100),[]);return o.useEffect(()=>{c&&d(c)},[c,d]),e.jsx(Q,{visuallyHidden:!p,ref:r,enableTransition:!0,title:""})};export{_e as clientLoader,Le as default};
//# sourceMappingURL=blk07hbvtixa3j14.js.map
