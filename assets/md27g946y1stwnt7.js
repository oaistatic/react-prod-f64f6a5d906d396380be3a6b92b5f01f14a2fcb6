import{R as j,b as v,f as I,r as a,e as P,j as e,M as p,m as w}from"./gg0tb34p9fzo1omt.js";import{cD as A,ch as B,D as L,be as U,cY as T,eC as F,bg as k,bU as O,R as q}from"./g670b8vtkhx0yc6d.js";import{u as G}from"./bckf7qgfy3ojc3v4.js";import{at as H,X,au as S,Y as K,q as W}from"./forbprkns1cohsbl.js";import{S as z}from"./m5rguaaez2aj83hj.js";import{u as Y}from"./pnx8yl9r7yj5moem.js";const Q="https://help.openai.com/en/articles/11481834",V={USD:4,EUR:4,GBP:4,INR:340},ne=({onClose:n})=>{const[h,b]=j.useState(2500),[o,r]=j.useState(!1),{prepareCheckoutSession:d,navigateToCheckout:x}=G(),c=A(),{initialBillingDetails:f}=Y(c,!0),m=c?.mustGetSubscriptionBillingCurrency("CreditPurchaseModal")??"USD",M=V[m],t=B(),i=v(),{data:l}=I({queryKey:["creditPurchaseRateCard"],queryFn:()=>q.safeGet("/subscriptions/credit-purchase-rate-card"),refetchOnWindowFocus:!1,refetchOnReconnect:!1,refetchOnMount:!1}),E=a.useCallback(async()=>{if(!o){r(!0);try{const s=c?.id;if(!s)throw new Error("No account_id found");const N=await d({credit_purchase_data:{quantity:h,unit:"credit",account_id:s},billing_details:f});await x(N)}catch(s){L.addError(s),t.warning(i.formatMessage(u.paymentErrorWarning),{hasCloseButton:!0})}finally{r(!1)}}},[f,i,o,x,h,d,t,c]),y=H(h,300),R=s=>!l||!l[s].price?"N/A":Math.round(y/parseFloat(l[s].price)).toLocaleString();return e.jsxs(U,{isOpen:!0,onClose:n,type:"success",size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,testId:"modal-credit-purchase-modal",children:[e.jsx(T.Header,{title:e.jsx(p,{...u.title})}),e.jsxs("div",{className:"flex flex-col px-6",children:[e.jsx("div",{className:"text-token-text-secondary text-sm",children:e.jsx(p,{...u.description,values:{link:s=>e.jsx(F,{href:Q,target:"_blank",children:s})}})}),e.jsx("div",{className:"mt-6",children:e.jsx(J,{minCredits:500,maxCredits:1e5,increment:250,centsPerCredit:M,currency:m,numCredits:h,setNumCredits:b})}),l&&e.jsxs(w.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-token-bg-tertiary text-token-text-secondary mt-4 flex w-full gap-2 rounded-lg p-3 text-sm",children:[e.jsx(z,{}),e.jsx(p,{...u.amountToAddDescription,values:{deepResearchCount:R("deep_research_completion"),gpto3ChatCount:R("chat_completion_o3"),gpt45ChatCount:R("chat_completion_4_5")}})]})]}),e.jsx(T.Actions,{className:"sm:p-2 md:p-6",secondaryButton:e.jsx(k,{disabled:o,onClick:n,color:"secondary",children:e.jsx(p,{...u.cancel})}),primaryButton:e.jsx(k,{loading:o,onClick:()=>E(),color:"primary",children:e.jsx(p,{...u.next})})})]})};function J({numCredits:n,minCredits:C,maxCredits:g,increment:D,centsPerCredit:_,currency:h,setNumCredits:b}){const o=a.useRef(null);a.useEffect(()=>{o.current?.focus()},[o]);const r=a.useRef(null),d=a.useRef(0),x=a.useCallback(t=>{b(i=>X(i+t,C,g))},[g,C,b]),c=a.useCallback(t=>{const y=300-t*50;return y>25?y:25},[]),f=a.useCallback(t=>{x(t),d.current=0;const i=()=>{d.current+=1,x(t);const l=c(d.current);r.current=setTimeout(i,l)};r.current=setTimeout(i,c(d.current))},[x,c]),m=a.useCallback(()=>{r.current&&(clearTimeout(r.current),r.current=null)},[]),M=n*_/100;return e.jsxs("div",{className:"mb-3 flex w-full flex-col",children:[e.jsx("label",{className:"mb-1 flex text-base font-medium",htmlFor:"Credits",children:e.jsx(p,{...u.amountToAdd})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("span",{className:"text-token-text-secondary pointer-events-none absolute end-3 top-1/2 -translate-y-1/2 text-sm",children:e.jsx(p,{...u.numCredits,values:{numCredits:n}})}),e.jsx("input",{ref:o,name:"Credits",value:M.toLocaleString("en-US",{style:"currency",currency:h,maximumFractionDigits:2}),disabled:!0,autoFocus:!0,tabIndex:0,className:"bg-token-bg-primary text-token-text-primary m-0 h-12 w-full appearance-none rounded-lg border border-gray-200 px-2 py-0 ps-5 text-start text-sm shadow-none ring-transparent outline-hidden focus:border-black focus:ring-black dark:border-gray-700 dark:focus:border-white dark:focus:ring-white"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{disabled:n<=C,onMouseDown:()=>f(-D),onMouseUp:m,onMouseLeave:m,children:e.jsx(K,{className:O("icon",n<=C&&"text-token-text-tertiary")})}),e.jsx(S,{disabled:n>=g,onMouseDown:()=>f(D),onMouseUp:m,onMouseLeave:m,children:e.jsx(W,{className:"icon"})})]})]})]})}const u=P({title:{id:"components.business.CreditPurchaseModal.title",defaultMessage:"Buy more credits for your team"},description:{id:"components.business.CreditPurchaseModal.description",defaultMessage:"Give your team continued access to advanced features after hitting plan limits. Credits valid for 12 months. Advanced voice mode excluded. <link>View rate card</link>."},amountToAdd:{id:"components.business.CreditPurchaseModal.amountToAdd",defaultMessage:"Amount to add"},amountToAddDescription:{id:"components.business.CreditPurchaseModal.amountToAddDescription",defaultMessage:"Equal to {deepResearchCount} deep research tasks, {gpto3ChatCount} o3 messages, or {gpt45ChatCount} GPT-4.5 messages."},numCredits:{id:"components.business.CreditPurchaseModal.numCredits",defaultMessage:"{numCredits, plural, one {# credit} other {# credits}}"},paymentErrorWarning:{id:"components.business.CreditPurchaseModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},cancel:{id:"components.business.CreditPurchaseModal.cancel",defaultMessage:"Cancel"},next:{id:"components.business.CreditPurchaseModal.next",defaultMessage:"Next"}});export{ne as CreditPurchaseModal,J as CreditSelectorButtons};
//# sourceMappingURL=md27g946y1stwnt7.js.map
