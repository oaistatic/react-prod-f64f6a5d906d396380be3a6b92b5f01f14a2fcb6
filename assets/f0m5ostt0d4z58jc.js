import{r as l,j as t}from"./gg0tb34p9fzo1omt.js";import{a4 as p,h as f,j as S,ay as _,az as j,C as A}from"./g670b8vtkhx0yc6d.js";import{S as M}from"./cg8klfuw4d9cqove.js";import{dE as g,dF as v,dG as w,dn as E,dH as O,dI as C,dJ as N,dK as R,dL as T}from"./forbprkns1cohsbl.js";import{u as b}from"./cwmvdlkyfimhesln.js";function J(o,s){const{automationId:n,automationTitle:e,automationMessage:c}=l.useMemo(()=>{const u=s.find(m=>m.author.role===p.Assistant),r=u?f.getParentPromptNode(S(o),u.id):null;let a=r?.message.metadata;a?.real_author_type||(a=s.find(x=>x.metadata?.real_author_type==="automation")?.metadata);const d=a?.real_author_type==="automation"?a?.real_author_id:null,i=a?.real_author_title;return{automationId:d,automationTitle:i,automationMessage:r?.message}},[o,s]),{automation:y}=b(n??"");return{automationId:n,automation:y,automationTitle:e,automationMessage:c}}function W({clientThreadId:o,messages:s}){const{automationId:n,automation:e,automationTitle:c}=J(o,s),u=g(o).isOdysseyMode||s.some(i=>i.metadata?.n7jupd_message),r=v(o)?.value,{isScheduledRun:a}=l.useContext(w),[h,d]=l.useState(!1);return l.useEffect(()=>{n&&_.count(j.JAWBONE,"jawbone_automation_source_header.open")},[n]),n?a?t.jsx("div",{className:"relative my-2 w-full",children:t.jsx(E,{automation:e,fullWidth:!0})}):u?r===A.REALTIME?null:t.jsx(O,{clientThreadId:o,children:t.jsx(C,{children:({isScheduled:i,isScheduledRun:m})=>i&&m&&t.jsx(N,{})})}):t.jsxs("div",{className:"text-token-text-secondary hover:text-token-text-primary mb-1 flex items-center gap-1.5 text-sm",children:[t.jsx(M,{className:"icon-sm"}),t.jsx("button",{onClick:()=>{d(!0)},children:e?.title??c}),h&&e&&t.jsx(R,{initialScheduleComponents:e.schedule_components,nextRunTimes:e.next_run_times,children:t.jsx(T,{item:e,source:"chat",onClose:()=>{d(!1)}})})]}):null}export{W as AutomationSourceHeader};
//# sourceMappingURL=f0m5ostt0d4z58jc.js.map
