import{dP as a,aT as pe}from"./g670b8vtkhx0yc6d.js";import{gL as I,gM as p,gN as T,gO as y,gP as F,gQ as w,gR as q,gS as D,gT as M,gU as be,gb as Fe,gV as we,gW as ye,gX as _e,gY as fe}from"./forbprkns1cohsbl.js";import"./gg0tb34p9fzo1omt.js";class Re{static interfaceName="web.bridge.AgentHandler";static interfaceVersion=0}(e=>{let d;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function u(s){return I.bytes(c.CURRENT_VERSION.size).add(I.forString(s.agentid))}c.measure=u;function i(s,f){s.setString(0,f.agentid)}c.encode=i;function t(s,f){return{agentid:p(s.getString(0))}}c.decode=t})(d=e.AgentHandler_TryOpenAgentViewer_Params||(e.AgentHandler_TryOpenAgentViewer_Params={}));let N;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function u(s){return I.bytes(c.CURRENT_VERSION.size)}c.measure=u;function i(s,f){let O=0;f.response&&(O|=1),s.setU8(0,O)}c.encode=i;function t(s,f){return{response:(s.getU8(0)&1)!=0}}c.decode=t})(N=e.AgentHandler_TryOpenAgentViewer_ResponseParams||(e.AgentHandler_TryOpenAgentViewer_ResponseParams={}));class o{constructor(u){this._endpoint=new T(u.endpointState,!0),this._version=0}static create(){const[u,i]=y.createChannel(e);return[new o(u),i]}static createToBrowser(){const[u,i]=this.create();return Mojo.bindInterface(e.interfaceName,i.pipe.rawHandle),u}async tryOpenAgentViewer(u){const i={agentid:u};return(await this._endpoint.sendAndAwaitResponse(F.encode(0,w.None,d,i))).decode(N).response}_endpoint;_version}e.Proxy=o;class n extends q{constructor(){super(e)}onDisconnect;bind(u,i){this.addReceiver(i,async(t,s)=>{switch(t.header.ordinal){case 0:{const f=t.decode(d),O=u.tryOpenAgentViewer(f.agentid),S=s.createResponder(N,0,t.header.requestID),b=await O;S({response:b});break}default:t.header.expectsResponse&&s.sendUnimplementedResponse(t.header.requestID,t.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(u)})}createRemote(u){const[i,t]=y.createChannel(e);return this.bind(u,t),i}}e.Dispatcher=n})(Re||(Re={}));var J;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size).add(I.forString(n.accessToken)).add(I.forString(n.idToken))}e.measure=d;function N(n,c){n.setString(0,c.accessToken),n.setString(8,c.idToken),n.setF64(16,c.expiresTimestampMsSince1970)}e.encode=N;function o(n,c){return{accessToken:p(n.getString(0)),idToken:p(n.getString(8)),expiresTimestampMsSince1970:p(n.getF64(16))}}e.decode=o})(J||(J={}));var H;(e=>{function d(o){if(o==="justLoggedInAccessToken")return 0;if(o==="reloadPageIfLoggedOut")return 1;if(o==="fullTokenToSessionConversion")return 2;throw new D}e.encode=d;function N(o){switch(o){case 0:return"justLoggedInAccessToken";case 1:return"reloadPageIfLoggedOut";case 2:return"fullTokenToSessionConversion";default:return"justLoggedInAccessToken"}}e.decode=N})(H||(H={}));class P{static interfaceName="web.bridge.AuthHandler";static interfaceVersion=0}(e=>{let d;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function u(s){return I.bytes(c.CURRENT_VERSION.size)}c.measure=u;function i(s,f){}c.encode=i;function t(s,f){return{}}c.decode=t})(d=e.AuthHandler_HandleMissingSessionAuth_Params||(e.AuthHandler_HandleMissingSessionAuth_Params={}));let N;(c=>{c.VERSION_INFO=[{version:0,size:8}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function u(s){return I.bytes(c.CURRENT_VERSION.size)}c.measure=u;function i(s,f){}c.encode=i;function t(s,f){return{}}c.decode=t})(N=e.AuthHandler_RecordAvailableSessionAuth_Params||(e.AuthHandler_RecordAvailableSessionAuth_Params={}));class o{constructor(u){this._endpoint=new T(u.endpointState,!0),this._version=0}static create(){const[u,i]=y.createChannel(e);return[new o(u),i]}static createToBrowser(){const[u,i]=this.create();return Mojo.bindInterface(e.interfaceName,i.pipe.rawHandle),u}handleMissingSessionAuth(){const u={};this._endpoint.send(F.encode(0,w.None,d,u))}recordAvailableSessionAuth(){const u={};this._endpoint.send(F.encode(1,w.None,N,u))}_endpoint;_version}e.Proxy=o;class n extends q{constructor(){super(e)}onDisconnect;bind(u,i){this.addReceiver(i,async(t,s)=>{switch(t.header.ordinal){case 0:{t.decode(d),u.handleMissingSessionAuth();break}case 1:{t.decode(N),u.recordAvailableSessionAuth();break}default:t.header.expectsResponse&&s.sendUnimplementedResponse(t.header.requestID,t.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(u)})}createRemote(u){const[i,t]=y.createChannel(e);return this.bind(u,t),i}}e.Dispatcher=n})(P||(P={}));class L{static interfaceName="web.bridge.AuthStateController";static interfaceVersion=0}(e=>{let d;(n=>{n.VERSION_INFO=[{version:0,size:24}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function c(t){return I.bytes(n.CURRENT_VERSION.size).add(I.forObject(J,t.authToken))}n.measure=c;function u(t,s){t.setObjectIndirect(J,0,s.authToken),t.setEnumValue(H,8,s.behavior)}n.encode=u;function i(t,s){return{authToken:p(t.getObjectIndirect(J,0)),behavior:p(t.getEnumValue(H,8))}}n.decode=i})(d=e.AuthStateController_RefreshSessionContext_Params||(e.AuthStateController_RefreshSessionContext_Params={}));class N{constructor(c){this._endpoint=new T(c.endpointState,!0),this._version=0}static create(){const[c,u]=y.createChannel(e);return[new N(c),u]}static createToBrowser(){const[c,u]=this.create();return Mojo.bindInterface(e.interfaceName,u.pipe.rawHandle),c}refreshSessionContext(c,u){const i={authToken:c,behavior:u};this._endpoint.send(F.encode(0,w.None,d,i))}_endpoint;_version}e.Proxy=N;class o extends q{constructor(){super(e)}onDisconnect;bind(c,u){this.addReceiver(u,async(i,t)=>{switch(i.header.ordinal){case 0:{const s=i.decode(d);c.refreshSessionContext(s.authToken,s.behavior);break}default:i.header.expectsResponse&&t.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[u,i]=y.createChannel(e);return this.bind(c,i),u}}e.Dispatcher=o})(L||(L={}));var Q;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size).add(I.forString(n.conduitToken))}e.measure=d;function N(n,c){n.setEnumValue(ee,0,c.prepareState),n.setF64(8,c.lastPrepareTimestampMsSince1970),n.setString(16,c.conduitToken)}e.encode=N;function o(n,c){return{prepareState:p(n.getEnumValue(ee,0)),lastPrepareTimestampMsSince1970:p(n.getF64(8)),conduitToken:p(n.getString(16))}}e.decode=o})(Q||(Q={}));var X;(e=>{e.VERSION_INFO=[{version:0,size:16}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size)}e.measure=d;function N(n,c){n.setEnumValue(te,0,c.selectedTab)}e.encode=N;function o(n,c){return{selectedTab:p(n.getEnumValue(te,0))}}e.decode=o})(X||(X={}));var Y;(e=>{e.VERSION_INFO=[{version:0,size:56}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size).add(I.forString(n.id)).add(I.forString(n.name)).add(I.forString(n.mimeType))}e.measure=d;function N(n,c){let u=0;n.setString(0,c.id),n.setI64(8,c.size),n.setString(16,c.name),n.setString(24,c.mimeType),c.width!==null&&c.width!==void 0&&(u|=1,n.setI32(36,c.width)),c.height!==null&&c.height!==void 0&&(u|=2,n.setI32(40,c.height)),c.fileTokenSize!==null&&c.fileTokenSize!==void 0&&(u|=4,n.setI32(44,c.fileTokenSize)),n.setU8(32,u)}e.encode=N;function o(n,c){const u=n.getU8(32),i=(u&1)!=0,t=(u&2)!=0,s=(u&4)!=0;return{id:p(n.getString(0)),size:p(n.getI64(8)),name:p(n.getString(16)),mimeType:p(n.getString(24)),...i?{width:p(n.getI32(36))}:{},...t?{height:p(n.getI32(40))}:{},...s?{fileTokenSize:p(n.getI32(44))}:{}}}e.decode=o})(Y||(Y={}));var K;(e=>{e.VERSION_INFO=[{version:0,size:40},{version:1,size:48},{version:2,size:56}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size).add(I.forString(n.id)).add(I.forString(n.url)).add(I.forString(n.title)).add(I.forString(n.base64favicon??null)).add(I.forString(n.selection??null))}e.measure=d;function N(n,c){let u=0;n.setString(0,c.id),n.setString(8,c.url),n.setString(16,c.title),n.setString(24,c.base64favicon??null),n.setString(32,c.selection??null),c.blocked!==null&&c.blocked!==void 0&&(u|=1,c.blocked&&(u|=2)),n.setU8(40,u)}e.encode=N;function o(n,c){const u=n.getString(24),i=c>=1?n.getString(32):null,t=c>=2?n.getU8(40):0,s=(t&1)!=0;return{id:p(n.getString(0)),url:p(n.getString(8)),title:p(n.getString(16)),...u!==null?{base64favicon:u}:{},...i!==null?{selection:i}:{},...s?{blocked:(t&2)!=0}:{}}}e.decode=o})(K||(K={}));var C;(e=>{function d(o){if(o==="mainPage")return 0;if(o==="sidebar")return 1;throw new D}e.encode=d;function N(o){switch(o){case 0:return"mainPage";case 1:return"sidebar";default:throw new D}}e.decode=N})(C||(C={}));var ee;(e=>{function d(o){if(o==="none")return 0;if(o==="sent")return 1;if(o==="success")return 2;if(o==="failure")return 3;throw new D}e.encode=d;function N(o){switch(o){case 0:return"none";case 1:return"sent";case 2:return"success";case 3:return"failure";default:return"none"}}e.decode=N})(ee||(ee={}));var te;(e=>{function d(o){if(o==="answer")return 0;if(o==="web")return 1;if(o==="images")return 2;if(o==="videos")return 3;throw new D}e.encode=d;function N(o){switch(o){case 0:return"answer";case 1:return"web";case 2:return"images";case 3:return"videos";default:return"answer"}}e.decode=N})(te||(te={}));var ne;(e=>{function d(o){if(o==="default_")return 0;if(o==="blue")return 1;if(o==="green")return 2;if(o==="yellow")return 3;if(o==="purple")return 4;if(o==="pink")return 5;if(o==="orange")return 6;if(o==="black")return 7;throw new D}e.encode=d;function N(o){switch(o){case 0:return"default_";case 1:return"blue";case 2:return"green";case 3:return"yellow";case 4:return"purple";case 5:return"pink";case 6:return"orange";case 7:return"black";default:return"default_"}}e.decode=N})(ne||(ne={}));class W{static interfaceName="web.bridge.ConversationController";static interfaceVersion=2}(e=>{let d;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size)}r.measure=h;function V(R,E){R.setEnumValue(C,0,E.windowStyle)}r.encode=V;function g(R,E){return{windowStyle:p(R.getEnumValue(C,0))}}r.decode=g})(d=e.ConversationController_SetWindowStyle_Params||(e.ConversationController_SetWindowStyle_Params={}));let N;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forString(R.modelSlug))}r.measure=h;function V(R,E){R.setString(0,E.modelSlug)}r.encode=V;function g(R,E){return{modelSlug:p(R.getString(0))}}r.decode=g})(N=e.ConversationController_SetModel_Params||(e.ConversationController_SetModel_Params={}));let o;(r=>{r.VERSION_INFO=[{version:0,size:8}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size)}r.measure=h;function V(R,E){}r.encode=V;function g(R,E){return{}}r.decode=g})(o=e.ConversationController_NewConversation_Params||(e.ConversationController_NewConversation_Params={}));let n;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forString(R.remoteConversationId))}r.measure=h;function V(R,E){R.setString(0,E.remoteConversationId)}r.encode=V;function g(R,E){return{remoteConversationId:p(R.getString(0))}}r.decode=g})(n=e.ConversationController_LoadConversation_Params||(e.ConversationController_LoadConversation_Params={}));let c;(r=>{r.VERSION_INFO=[{version:0,size:32}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forString(R.prompt)).add(I.forStringArray(R.systemHints)).add(I.forString(R.modelSlug))}r.measure=h;function V(R,E){R.setString(0,E.prompt),R.setStringArray(8,E.systemHints),R.setString(16,E.modelSlug)}r.encode=V;function g(R,E){return{prompt:p(R.getString(0)),systemHints:p(M(R.getStringArray(8))),modelSlug:p(R.getString(16))}}r.decode=g})(c=e.ConversationController_RequestCompletion_Params||(e.ConversationController_RequestCompletion_Params={}));let u;(r=>{r.VERSION_INFO=[{version:0,size:24}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forString(R.userMessage??null)).add(I.forString(R.targetedReply??null))}r.measure=h;function V(R,E){R.setString(0,E.userMessage??null),R.setString(8,E.targetedReply??null)}r.encode=V;function g(R,E){const z=R.getString(0),B=R.getString(8);return{...z!==null?{userMessage:z}:{},...B!==null?{targetedReply:B}:{}}}r.decode=g})(u=e.ConversationController_PopulatePrompt_Params||(e.ConversationController_PopulatePrompt_Params={}));let i;(r=>{r.VERSION_INFO=[{version:0,size:32},{version:1,size:40},{version:2,size:48}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forString(R.url)).add(I.forString(R.title)).add(I.forString(R.base64favicon??null)).add(I.forString(R.selection??null))}r.measure=h;function V(R,E){let z=0;R.setString(0,E.url),R.setString(8,E.title),R.setString(16,E.base64favicon??null),R.setString(24,E.selection??null),E.blocked!==null&&E.blocked!==void 0&&(z|=1,E.blocked&&(z|=2)),R.setU8(32,z)}r.encode=V;function g(R,E){const z=R.getString(16),B=E>=1?R.getString(24):null,Oe=E>=2?R.getU8(32):0,ge=(Oe&1)!=0;return{url:p(R.getString(0)),title:p(R.getString(8)),...z!==null?{base64favicon:z}:{},...B!==null?{selection:B}:{},...ge?{blocked:(Oe&2)!=0}:{}}}r.decode=g})(i=e.ConversationController_UpdateContext_Params||(e.ConversationController_UpdateContext_Params={}));let t;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forObject(Q,R.details))}r.measure=h;function V(R,E){R.setObjectIndirect(Q,0,E.details)}r.encode=V;function g(R,E){return{details:p(R.getObjectIndirect(Q,0))}}r.decode=g})(t=e.ConversationController_PrepareConversation_Params||(e.ConversationController_PrepareConversation_Params={}));let s;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forObject(X,R.options))}r.measure=h;function V(R,E){R.setObjectIndirect(X,0,E.options)}r.encode=V;function g(R,E){return{options:p(R.getObjectIndirect(X,0))}}r.decode=g})(s=e.ConversationController_SetSuperWidgetOptions_Params||(e.ConversationController_SetSuperWidgetOptions_Params={}));let f;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forObjectArray(Y,R.attachments))}r.measure=h;function V(R,E){R.setObjectArray(Y,0,E.attachments)}r.encode=V;function g(R,E){return{attachments:p(M(R.getObjectArray(Y,0)))}}r.decode=g})(f=e.ConversationController_SetAttachments_Params||(e.ConversationController_SetAttachments_Params={}));let O;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forString(R.to))}r.measure=h;function V(R,E){R.setString(0,E.to)}r.encode=V;function g(R,E){return{to:p(R.getString(0))}}r.decode=g})(O=e.ConversationController_Navigate_Params||(e.ConversationController_Navigate_Params={}));let S;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forObject(k,R.whisperContent))}r.measure=h;function V(R,E){R.setObjectIndirect(k,0,E.whisperContent)}r.encode=V;function g(R,E){return{whisperContent:p(R.getObjectIndirect(k,0))}}r.decode=g})(S=e.ConversationController_SetWhisperContent_Params||(e.ConversationController_SetWhisperContent_Params={}));let b;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forObjectArray(K,R.tabs))}r.measure=h;function V(R,E){R.setObjectArray(K,0,E.tabs)}r.encode=V;function g(R,E){return{tabs:p(M(R.getObjectArray(K,0)))}}r.decode=g})(b=e.ConversationController_SetTabContext_Params||(e.ConversationController_SetTabContext_Params={}));let _;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forString(R.origin))}r.measure=h;function V(R,E){R.setString(0,E.origin)}r.encode=V;function g(R,E){return{origin:p(R.getString(0))}}r.decode=g})(_=e.ConversationController_SetPromptOrigin_Params||(e.ConversationController_SetPromptOrigin_Params={}));let x;(r=>{r.VERSION_INFO=[{version:0,size:8}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size)}r.measure=h;function V(R,E){}r.encode=V;function g(R,E){return{}}r.decode=g})(x=e.ConversationController_CloseNavigationSidebar_Params||(e.ConversationController_CloseNavigationSidebar_Params={}));let re;(r=>{r.VERSION_INFO=[{version:0,size:16}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size)}r.measure=h;function V(R,E){R.setEnumValue(ne,0,E.theme)}r.encode=V;function g(R,E){return{theme:p(R.getEnumValue(ne,0))}}r.decode=g})(re=e.ConversationController_SetChatTheme_Params||(e.ConversationController_SetChatTheme_Params={}));let ue;(r=>{r.VERSION_INFO=[{version:0,size:8}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size)}r.measure=h;function V(R,E){}r.encode=V;function g(R,E){return{}}r.decode=g})(ue=e.ConversationController_ShowSearch_Params||(e.ConversationController_ShowSearch_Params={}));let oe;(r=>{r.VERSION_INFO=[{version:0,size:24}],r.CURRENT_VERSION=r.VERSION_INFO[r.VERSION_INFO.length-1];function h(R){return I.bytes(r.CURRENT_VERSION.size).add(I.forString(R.query)).add(I.forString(R.navlinksEvent))}r.measure=h;function V(R,E){R.setString(0,E.query),R.setString(8,E.navlinksEvent)}r.encode=V;function g(R,E){return{query:p(R.getString(0)),navlinksEvent:p(R.getString(8))}}r.decode=g})(oe=e.ConversationController_PopulateNavlinks_Params||(e.ConversationController_PopulateNavlinks_Params={}));class Ne{constructor(h){this._endpoint=new T(h.endpointState,!0),this._version=2}static create(){const[h,V]=y.createChannel(e);return[new Ne(h),V]}static createToBrowser(){const[h,V]=this.create();return Mojo.bindInterface(e.interfaceName,V.pipe.rawHandle),h}setWindowStyle(h){const V={windowStyle:h};this._endpoint.send(F.encode(0,w.None,d,V))}setModel(h){const V={modelSlug:h};this._endpoint.send(F.encode(1,w.None,N,V))}newConversation(){const h={};this._endpoint.send(F.encode(2,w.None,o,h))}loadConversation(h){const V={remoteConversationId:h};this._endpoint.send(F.encode(3,w.None,n,V))}requestCompletion(h,V,g){const R={prompt:h,systemHints:V,modelSlug:g};this._endpoint.send(F.encode(4,w.None,c,R))}populatePrompt(h,V){const g={userMessage:h,targetedReply:V};this._endpoint.send(F.encode(5,w.None,u,g))}updateContext(h,V,g,R,E){const z={url:h,title:V,base64favicon:g,selection:R,blocked:E};this._endpoint.send(F.encode(6,w.None,i,z))}prepareConversation(h){const V={details:h};this._endpoint.send(F.encode(7,w.None,t,V))}setSuperWidgetOptions(h){const V={options:h};this._endpoint.send(F.encode(8,w.None,s,V))}setAttachments(h){const V={attachments:h};this._endpoint.send(F.encode(9,w.None,f,V))}navigate(h){const V={to:h};this._endpoint.send(F.encode(10,w.None,O,V))}setWhisperContent(h){const V={whisperContent:h};this._endpoint.send(F.encode(11,w.None,S,V))}setTabContext(h){const V={tabs:h};this._endpoint.send(F.encode(12,w.None,b,V))}setPromptOrigin(h){const V={origin:h};this._endpoint.send(F.encode(13,w.None,_,V))}closeNavigationSidebar(){const h={};this._endpoint.send(F.encode(14,w.None,x,h))}setChatTheme(h){const V={theme:h};this._endpoint.send(F.encode(15,w.None,re,V))}showSearch(){const h={};this._endpoint.send(F.encode(16,w.None,ue,h))}populateNavlinks(h,V){const g={query:h,navlinksEvent:V};this._endpoint.send(F.encode(17,w.None,oe,g))}_endpoint;_version}e.Proxy=Ne;class Ve extends q{constructor(){super(e)}onDisconnect;bind(h,V){this.addReceiver(V,async(g,R)=>{switch(g.header.ordinal){case 0:{const E=g.decode(d);h.setWindowStyle(E.windowStyle);break}case 1:{const E=g.decode(N);h.setModel(E.modelSlug);break}case 2:{g.decode(o),h.newConversation();break}case 3:{const E=g.decode(n);h.loadConversation(E.remoteConversationId);break}case 4:{const E=g.decode(c);h.requestCompletion(E.prompt,E.systemHints,E.modelSlug);break}case 5:{const E=g.decode(u);h.populatePrompt(E.userMessage,E.targetedReply);break}case 6:{const E=g.decode(i);h.updateContext(E.url,E.title,E.base64favicon,E.selection,E.blocked);break}case 7:{const E=g.decode(t);h.prepareConversation(E.details);break}case 8:{const E=g.decode(s);h.setSuperWidgetOptions(E.options);break}case 9:{const E=g.decode(f);h.setAttachments(E.attachments);break}case 10:{const E=g.decode(O);h.navigate(E.to);break}case 11:{const E=g.decode(S);h.setWhisperContent(E.whisperContent);break}case 12:{const E=g.decode(b);h.setTabContext(E.tabs);break}case 13:{const E=g.decode(_);h.setPromptOrigin(E.origin);break}case 14:{g.decode(x),h.closeNavigationSidebar();break}case 15:{const E=g.decode(re);h.setChatTheme(E.theme);break}case 16:{g.decode(ue),h.showSearch();break}case 17:{const E=g.decode(oe);h.populateNavlinks(E.query,E.navlinksEvent);break}default:g.header.expectsResponse&&R.sendUnimplementedResponse(g.header.requestID,g.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(h)})}createRemote(h){const[V,g]=y.createChannel(e);return this.bind(h,g),V}}e.Dispatcher=Ve})(W||(W={}));class Ee{static interfaceName="web.bridge.GenericInterface";static interfaceVersion=0}(e=>{let d;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function u(s){return I.bytes(c.CURRENT_VERSION.size).add(I.forString(s.request))}c.measure=u;function i(s,f){s.setString(0,f.request)}c.encode=i;function t(s,f){return{request:p(s.getString(0))}}c.decode=t})(d=e.GenericInterface_AcceptMessage_Params||(e.GenericInterface_AcceptMessage_Params={}));let N;(c=>{c.VERSION_INFO=[{version:0,size:16}],c.CURRENT_VERSION=c.VERSION_INFO[c.VERSION_INFO.length-1];function u(s){return I.bytes(c.CURRENT_VERSION.size).add(I.forString(s.response??null))}c.measure=u;function i(s,f){s.setString(0,f.response??null)}c.encode=i;function t(s,f){const O=s.getString(0);return{...O!==null?{response:O}:{}}}c.decode=t})(N=e.GenericInterface_AcceptMessage_ResponseParams||(e.GenericInterface_AcceptMessage_ResponseParams={}));class o{constructor(u){this._endpoint=new T(u.endpointState,!0),this._version=0}static create(){const[u,i]=y.createChannel(e);return[new o(u),i]}static createToBrowser(){const[u,i]=this.create();return Mojo.bindInterface(e.interfaceName,i.pipe.rawHandle),u}async acceptMessage(u){const i={request:u};return(await this._endpoint.sendAndAwaitResponse(F.encode(0,w.None,d,i))).decode(N).response}_endpoint;_version}e.Proxy=o;class n extends q{constructor(){super(e)}onDisconnect;bind(u,i){this.addReceiver(i,async(t,s)=>{switch(t.header.ordinal){case 0:{const f=t.decode(d),O=u.acceptMessage(f.request),S=s.createResponder(N,0,t.header.requestID),b=await O;S({response:b});break}default:t.header.expectsResponse&&s.sendUnimplementedResponse(t.header.requestID,t.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(u)})}createRemote(u){const[i,t]=y.createChannel(e);return this.bind(u,t),i}}e.Dispatcher=n})(Ee||(Ee={}));class Ie{static interfaceName="web.bridge.LinkHandler";static interfaceVersion=0}(e=>{let d;(n=>{n.VERSION_INFO=[{version:0,size:24}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function c(t){return I.bytes(n.CURRENT_VERSION.size).add(I.forString(t.url)).add(I.forString(t.target))}n.measure=c;function u(t,s){t.setString(0,s.url),t.setString(8,s.target)}n.encode=u;function i(t,s){return{url:p(t.getString(0)),target:p(t.getString(8))}}n.decode=i})(d=e.LinkHandler_HandleLink_Params||(e.LinkHandler_HandleLink_Params={}));class N{constructor(c){this._endpoint=new T(c.endpointState,!0),this._version=0}static create(){const[c,u]=y.createChannel(e);return[new N(c),u]}static createToBrowser(){const[c,u]=this.create();return Mojo.bindInterface(e.interfaceName,u.pipe.rawHandle),c}handleLink(c,u){const i={url:c,target:u};this._endpoint.send(F.encode(0,w.None,d,i))}_endpoint;_version}e.Proxy=N;class o extends q{constructor(){super(e)}onDisconnect;bind(c,u){this.addReceiver(u,async(i,t)=>{switch(i.header.ordinal){case 0:{const s=i.decode(d);c.handleLink(s.url,s.target);break}default:i.header.expectsResponse&&t.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[u,i]=y.createChannel(e);return this.bind(c,i),u}}e.Dispatcher=o})(Ie||(Ie={}));var Z;(e=>{e.VERSION_INFO=[{version:0,size:24}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size).add(I.forString(n.author)).add(I.forString(n.message))}e.measure=d;function N(n,c){n.setString(0,c.author),n.setString(8,c.message)}e.encode=N;function o(n,c){return{author:p(n.getString(0)),message:p(n.getString(8))}}e.decode=o})(Z||(Z={}));class ce{static interfaceName="web.bridge.LocalToolHandler";static interfaceVersion=0}(e=>{let d;(i=>{i.VERSION_INFO=[{version:0,size:24}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function t(O){return I.bytes(i.CURRENT_VERSION.size).add(I.forString(O.toolname)).add(I.forString(O.args))}i.measure=t;function s(O,S){O.setString(0,S.toolname),O.setString(8,S.args)}i.encode=s;function f(O,S){return{toolname:p(O.getString(0)),args:p(O.getString(8))}}i.decode=f})(d=e.LocalToolHandler_CallLocalTool_Params||(e.LocalToolHandler_CallLocalTool_Params={}));let N;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function t(O){return I.bytes(i.CURRENT_VERSION.size).add(I.forObjectArray(Z,O.response))}i.measure=t;function s(O,S){O.setObjectArray(Z,0,S.response)}i.encode=s;function f(O,S){return{response:p(M(O.getObjectArray(Z,0)))}}i.decode=f})(N=e.LocalToolHandler_CallLocalTool_ResponseParams||(e.LocalToolHandler_CallLocalTool_ResponseParams={}));let o;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function t(O){return I.bytes(i.CURRENT_VERSION.size)}i.measure=t;function s(O,S){}i.encode=s;function f(O,S){return{}}i.decode=f})(o=e.LocalToolHandler_GetToolNames_Params||(e.LocalToolHandler_GetToolNames_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function t(O){return I.bytes(i.CURRENT_VERSION.size).add(I.forStringArray(O.toolnames))}i.measure=t;function s(O,S){O.setStringArray(0,S.toolnames)}i.encode=s;function f(O,S){return{toolnames:p(M(O.getStringArray(0)))}}i.decode=f})(n=e.LocalToolHandler_GetToolNames_ResponseParams||(e.LocalToolHandler_GetToolNames_ResponseParams={}));class c{constructor(t){this._endpoint=new T(t.endpointState,!0),this._version=0}static create(){const[t,s]=y.createChannel(e);return[new c(t),s]}static createToBrowser(){const[t,s]=this.create();return Mojo.bindInterface(e.interfaceName,s.pipe.rawHandle),t}async callLocalTool(t,s){const f={toolname:t,args:s};return(await this._endpoint.sendAndAwaitResponse(F.encode(0,w.None,d,f))).decode(N).response}async getToolNames(){const t={};return(await this._endpoint.sendAndAwaitResponse(F.encode(1,w.None,o,t))).decode(n).toolnames}_endpoint;_version}e.Proxy=c;class u extends q{constructor(){super(e)}onDisconnect;bind(t,s){this.addReceiver(s,async(f,O)=>{switch(f.header.ordinal){case 0:{const S=f.decode(d),b=t.callLocalTool(S.toolname,S.args),_=O.createResponder(N,0,f.header.requestID),x=await b;_({response:x});break}case 1:{f.decode(o);const S=t.getToolNames(),b=O.createResponder(n,1,f.header.requestID),_=await S;b({toolnames:_});break}default:f.header.expectsResponse&&O.sendUnimplementedResponse(f.header.requestID,f.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(t)})}createRemote(t){const[s,f]=y.createChannel(e);return this.bind(t,f),s}}e.Dispatcher=u})(ce||(ce={}));var j;(e=>{e.VERSION_INFO=[{version:0,size:24}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size).add(I.forString(n.clientId)).add(I.forString(n.serverId??null))}e.measure=d;function N(n,c){n.setString(0,c.clientId),n.setString(8,c.serverId??null)}e.encode=N;function o(n,c){const u=n.getString(8);return{clientId:p(n.getString(0)),...u!==null?{serverId:u}:{}}}e.decode=o})(j||(j={}));var m;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size).add(I.forString(n.title??null))}e.measure=d;function N(n,c){let u=0;n.setString(0,c.title??null),c.updateTimestampMsSince1970!==null&&c.updateTimestampMsSince1970!==void 0&&(u|=1,n.setF64(16,c.updateTimestampMsSince1970)),c.status!==null&&c.status!==void 0&&(u|=2,n.setEnumValue(se,12,c.status)),n.setU8(8,u)}e.encode=N;function o(n,c){const u=n.getString(0),i=n.getU8(8),t=(i&1)!=0,s=(i&2)!=0;return{...u!==null?{title:u}:{},...t?{updateTimestampMsSince1970:p(n.getF64(16))}:{},...s?{status:p(n.getEnumValue(se,12))}:{}}}e.decode=o})(m||(m={}));var se;(e=>{function d(o){if(o==="none")return 0;if(o==="inProgress")return 1;if(o==="done")return 2;throw new D}e.encode=d;function N(o){switch(o){case 0:return"none";case 1:return"inProgress";case 2:return"done";default:return"none"}}e.decode=N})(se||(se={}));class he{static interfaceName="web.bridge.NavigationSidebarController";static interfaceVersion=0}(e=>{let d;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(S){return I.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(S,b){let _=0;b.visible&&(_|=1),S.setU8(0,_)}t.encode=f;function O(S,b){return{visible:(S.getU8(0)&1)!=0}}t.decode=O})(d=e.NavigationSidebarController_SetSidebarVisibility_Params||(e.NavigationSidebarController_SetSidebarVisibility_Params={}));let N;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(S){return I.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(S,b){}t.encode=f;function O(S,b){return{}}t.decode=O})(N=e.NavigationSidebarController_ToggleSidebarVisibility_Params||(e.NavigationSidebarController_ToggleSidebarVisibility_Params={}));let o;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(S){return I.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(S,b){}t.encode=f;function O(S,b){return{}}t.decode=O})(o=e.NavigationSidebarController_NewConversation_Params||(e.NavigationSidebarController_NewConversation_Params={}));let n;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(S){return I.bytes(t.CURRENT_VERSION.size).add(I.forObject(j,S.id)).add(I.forObject(m,S.data))}t.measure=s;function f(S,b){S.setObjectIndirect(j,0,b.id),S.setObjectIndirect(m,8,b.data)}t.encode=f;function O(S,b){return{id:p(S.getObjectIndirect(j,0)),data:p(S.getObjectIndirect(m,8))}}t.decode=O})(n=e.NavigationSidebarController_AddConversationHistoryItem_Params||(e.NavigationSidebarController_AddConversationHistoryItem_Params={}));let c;(t=>{t.VERSION_INFO=[{version:0,size:24}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(S){return I.bytes(t.CURRENT_VERSION.size).add(I.forObject(j,S.id)).add(I.forObject(m,S.data))}t.measure=s;function f(S,b){S.setObjectIndirect(j,0,b.id),S.setObjectIndirect(m,8,b.data)}t.encode=f;function O(S,b){return{id:p(S.getObjectIndirect(j,0)),data:p(S.getObjectIndirect(m,8))}}t.decode=O})(c=e.NavigationSidebarController_UpdateConversationHistoryItem_Params||(e.NavigationSidebarController_UpdateConversationHistoryItem_Params={}));class u{constructor(s){this._endpoint=new T(s.endpointState,!0),this._version=0}static create(){const[s,f]=y.createChannel(e);return[new u(s),f]}static createToBrowser(){const[s,f]=this.create();return Mojo.bindInterface(e.interfaceName,f.pipe.rawHandle),s}setSidebarVisibility(s){const f={visible:s};this._endpoint.send(F.encode(0,w.None,d,f))}toggleSidebarVisibility(){const s={};this._endpoint.send(F.encode(1,w.None,N,s))}newConversation(){const s={};this._endpoint.send(F.encode(2,w.None,o,s))}addConversationHistoryItem(s,f){const O={id:s,data:f};this._endpoint.send(F.encode(3,w.None,n,O))}updateConversationHistoryItem(s,f){const O={id:s,data:f};this._endpoint.send(F.encode(4,w.None,c,O))}_endpoint;_version}e.Proxy=u;class i extends q{constructor(){super(e)}onDisconnect;bind(s,f){this.addReceiver(f,async(O,S)=>{switch(O.header.ordinal){case 0:{const b=O.decode(d);s.setSidebarVisibility(b.visible);break}case 1:{O.decode(N),s.toggleSidebarVisibility();break}case 2:{O.decode(o),s.newConversation();break}case 3:{const b=O.decode(n);s.addConversationHistoryItem(b.id,b.data);break}case 4:{const b=O.decode(c);s.updateConversationHistoryItem(b.id,b.data);break}default:O.header.expectsResponse&&S.sendUnimplementedResponse(O.header.requestID,O.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(s)})}createRemote(s){const[f,O]=y.createChannel(e);return this.bind(s,O),f}}e.Dispatcher=i})(he||(he={}));var ie;(e=>{function d(o){if(o==="general")return 0;if(o==="personalization")return 1;if(o==="searchEngines")return 2;if(o==="dataControls")return 3;if(o==="modelTraining")return 4;throw new D}e.encode=d;function N(o){switch(o){case 0:return"general";case 1:return"personalization";case 2:return"searchEngines";case 3:return"dataControls";case 4:return"modelTraining";default:return"general"}}e.decode=N})(ie||(ie={}));class Se{static interfaceName="web.bridge.OpenSettingsController";static interfaceVersion=0}(e=>{let d;(n=>{n.VERSION_INFO=[{version:0,size:16}],n.CURRENT_VERSION=n.VERSION_INFO[n.VERSION_INFO.length-1];function c(t){return I.bytes(n.CURRENT_VERSION.size)}n.measure=c;function u(t,s){let f=0;s.tab!==null&&s.tab!==void 0&&(f|=1,t.setEnumValue(ie,4,s.tab)),t.setU8(0,f)}n.encode=u;function i(t,s){return{...(t.getU8(0)&1)!=0?{tab:p(t.getEnumValue(ie,4))}:{}}}n.decode=i})(d=e.OpenSettingsController_OpenSettings_Params||(e.OpenSettingsController_OpenSettings_Params={}));class N{constructor(c){this._endpoint=new T(c.endpointState,!0),this._version=0}static create(){const[c,u]=y.createChannel(e);return[new N(c),u]}static createToBrowser(){const[c,u]=this.create();return Mojo.bindInterface(e.interfaceName,u.pipe.rawHandle),c}openSettings(c){const u={tab:c};this._endpoint.send(F.encode(0,w.None,d,u))}_endpoint;_version}e.Proxy=N;class o extends q{constructor(){super(e)}onDisconnect;bind(c,u){this.addReceiver(u,async(i,t)=>{switch(i.header.ordinal){case 0:{const s=i.decode(d);c.openSettings(s.tab);break}default:i.header.expectsResponse&&t.sendUnimplementedResponse(i.header.requestID,i.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(c)})}createRemote(c){const[u,i]=y.createChannel(e);return this.bind(c,i),u}}e.Dispatcher=o})(Se||(Se={}));class ${static interfaceName="web.bridge.DesktopSidebarController";static interfaceVersion=0}(e=>{let d;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(S){return I.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(S,b){}t.encode=f;function O(S,b){return{}}t.decode=O})(d=e.DesktopSidebarController_CloseSidebar_Params||(e.DesktopSidebarController_CloseSidebar_Params={}));let N;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(S){return I.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(S,b){}t.encode=f;function O(S,b){return{}}t.decode=O})(N=e.DesktopSidebarController_CanHideHeader_Params||(e.DesktopSidebarController_CanHideHeader_Params={}));let o;(t=>{t.VERSION_INFO=[{version:0,size:16}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(S){return I.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(S,b){let _=0;b.canHideHeader&&(_|=1),S.setU8(0,_)}t.encode=f;function O(S,b){return{canHideHeader:(S.getU8(0)&1)!=0}}t.decode=O})(o=e.DesktopSidebarController_CanHideHeader_ResponseParams||(e.DesktopSidebarController_CanHideHeader_ResponseParams={}));let n;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(S){return I.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(S,b){}t.encode=f;function O(S,b){return{}}t.decode=O})(n=e.DesktopSidebarController_BecomeMainPage_Params||(e.DesktopSidebarController_BecomeMainPage_Params={}));let c;(t=>{t.VERSION_INFO=[{version:0,size:8}],t.CURRENT_VERSION=t.VERSION_INFO[t.VERSION_INFO.length-1];function s(S){return I.bytes(t.CURRENT_VERSION.size)}t.measure=s;function f(S,b){}t.encode=f;function O(S,b){return{}}t.decode=O})(c=e.DesktopSidebarController_OpenInNewTab_Params||(e.DesktopSidebarController_OpenInNewTab_Params={}));class u{constructor(s){this._endpoint=new T(s.endpointState,!0),this._version=0}static create(){const[s,f]=y.createChannel(e);return[new u(s),f]}static createToBrowser(){const[s,f]=this.create();return Mojo.bindInterface(e.interfaceName,f.pipe.rawHandle),s}closeSidebar(){const s={};this._endpoint.send(F.encode(0,w.None,d,s))}async canHideHeader(){const s={};return(await this._endpoint.sendAndAwaitResponse(F.encode(1,w.None,N,s))).decode(o).canHideHeader}becomeMainPage(){const s={};this._endpoint.send(F.encode(2,w.None,n,s))}openInNewTab(){const s={};this._endpoint.send(F.encode(3,w.None,c,s))}_endpoint;_version}e.Proxy=u;class i extends q{constructor(){super(e)}onDisconnect;bind(s,f){this.addReceiver(f,async(O,S)=>{switch(O.header.ordinal){case 0:{O.decode(d),s.closeSidebar();break}case 1:{O.decode(N);const b=s.canHideHeader(),_=S.createResponder(o,1,O.header.requestID),x=await b;_({canHideHeader:x});break}case 2:{O.decode(n),s.becomeMainPage();break}case 3:{O.decode(c),s.openInNewTab();break}default:O.header.expectsResponse&&S.sendUnimplementedResponse(O.header.requestID,O.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(s)})}createRemote(s){const[f,O]=y.createChannel(e);return this.bind(s,O),f}}e.Dispatcher=i})($||($={}));var A;(e=>{e.VERSION_INFO=[{version:0,size:8}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size)}e.measure=d;function N(n,c){}e.encode=N;function o(n,c){return{}}e.decode=o})(A||(A={}));var l;(e=>{e.VERSION_INFO=[{version:0,size:48}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size).add(I.forString(n.id)).add(I.forString(n.fileid)).add(I.forString(n.name)).add(I.forString(n.mimetype))}e.measure=d;function N(n,c){n.setString(0,c.id),n.setString(8,c.fileid),n.setString(16,c.name),n.setU32(24,c.size),n.setString(32,c.mimetype)}e.encode=N;function o(n,c){return{id:p(n.getString(0)),fileid:p(n.getString(8)),name:p(n.getString(16)),size:p(n.getU32(24)),mimetype:p(n.getString(32))}}e.decode=o})(l||(l={}));var v;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size).add(I.forString(n.assetPointer))}e.measure=d;function N(n,c){n.setString(0,c.assetPointer),n.setU32(8,c.sizeBytes),n.setU32(12,c.width),n.setU32(16,c.height)}e.encode=N;function o(n,c){return{assetPointer:p(n.getString(0)),sizeBytes:p(n.getU32(8)),width:p(n.getU32(12)),height:p(n.getU32(16))}}e.decode=o})(v||(v={}));var k;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size).add(I.forString(n.content??null)).add(I.forObjectArray(l,n.files??null)).add(I.forObjectArray(v,n.imageAssetPointers??null))}e.measure=d;function N(n,c){n.setString(0,c.content??null),n.setObjectArray(l,8,c.files??null),n.setObjectArray(v,16,c.imageAssetPointers??null)}e.encode=N;function o(n,c){const u=n.getString(0),i=M(n.getObjectArray(l,8)),t=M(n.getObjectArray(v,16));return{...u!==null?{content:u}:{},...i!==null?{files:i}:{},...t!==null?{imageAssetPointers:t}:{}}}e.decode=o})(k||(k={}));var G;(e=>{e.VERSION_INFO=[{version:0,size:32}],e.CURRENT_VERSION=e.VERSION_INFO[e.VERSION_INFO.length-1];function d(n){return I.bytes(e.CURRENT_VERSION.size).add(I.forString(n.base64image)).add(I.forString(n.mimetype)).add(I.forString(n.filename))}e.measure=d;function N(n,c){n.setString(0,c.base64image),n.setString(8,c.mimetype),n.setString(16,c.filename)}e.encode=N;function o(n,c){return{base64image:p(n.getString(0)),mimetype:p(n.getString(8)),filename:p(n.getString(16))}}e.decode=o})(G||(G={}));class de{static interfaceName="web.bridge.WhisperContentProvider";static interfaceVersion=0}(e=>{let d;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function t(O){return I.bytes(i.CURRENT_VERSION.size).add(I.forObject(A,O.options??null))}i.measure=t;function s(O,S){O.setObjectIndirect(A,0,S.options??null)}i.encode=s;function f(O,S){const b=O.getObjectIndirect(A,0);return{...b!==null?{options:b}:{}}}i.decode=f})(d=e.WhisperContentProvider_GetWhisperContent_Params||(e.WhisperContentProvider_GetWhisperContent_Params={}));let N;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function t(O){return I.bytes(i.CURRENT_VERSION.size).add(I.forObject(k,O.content??null))}i.measure=t;function s(O,S){O.setObjectIndirect(k,0,S.content??null)}i.encode=s;function f(O,S){const b=O.getObjectIndirect(k,0);return{...b!==null?{content:b}:{}}}i.decode=f})(N=e.WhisperContentProvider_GetWhisperContent_ResponseParams||(e.WhisperContentProvider_GetWhisperContent_ResponseParams={}));let o;(i=>{i.VERSION_INFO=[{version:0,size:8}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function t(O){return I.bytes(i.CURRENT_VERSION.size)}i.measure=t;function s(O,S){}i.encode=s;function f(O,S){return{}}i.decode=f})(o=e.WhisperContentProvider_GetTabScreenshot_Params||(e.WhisperContentProvider_GetTabScreenshot_Params={}));let n;(i=>{i.VERSION_INFO=[{version:0,size:16}],i.CURRENT_VERSION=i.VERSION_INFO[i.VERSION_INFO.length-1];function t(O){return I.bytes(i.CURRENT_VERSION.size).add(I.forObject(G,O.screenshot??null))}i.measure=t;function s(O,S){O.setObjectIndirect(G,0,S.screenshot??null)}i.encode=s;function f(O,S){const b=O.getObjectIndirect(G,0);return{...b!==null?{screenshot:b}:{}}}i.decode=f})(n=e.WhisperContentProvider_GetTabScreenshot_ResponseParams||(e.WhisperContentProvider_GetTabScreenshot_ResponseParams={}));class c{constructor(t){this._endpoint=new T(t.endpointState,!0),this._version=0}static create(){const[t,s]=y.createChannel(e);return[new c(t),s]}static createToBrowser(){const[t,s]=this.create();return Mojo.bindInterface(e.interfaceName,s.pipe.rawHandle),t}async getWhisperContent(t){const s={options:t};return(await this._endpoint.sendAndAwaitResponse(F.encode(0,w.None,d,s))).decode(N).content}async getTabScreenshot(){const t={};return(await this._endpoint.sendAndAwaitResponse(F.encode(1,w.None,o,t))).decode(n).screenshot}_endpoint;_version}e.Proxy=c;class u extends q{constructor(){super(e)}onDisconnect;bind(t,s){this.addReceiver(s,async(f,O)=>{switch(f.header.ordinal){case 0:{const S=f.decode(d),b=t.getWhisperContent(S.options),_=O.createResponder(N,0,f.header.requestID),x=await b;_({content:x});break}case 1:{f.decode(o);const S=t.getTabScreenshot(),b=O.createResponder(n,1,f.header.requestID),_=await S;b({screenshot:_});break}default:f.header.expectsResponse&&O.sendUnimplementedResponse(f.header.requestID,f.header.ordinal)}return Promise.resolve()},()=>{this.onDisconnect&&this.onDisconnect(t)})}createRemote(t){const[s,f]=y.createChannel(e);return this.bind(t,f),s}}e.Dispatcher=u})(de||(de={}));class ae{dispatcher;constructor(d){this.dispatcher=new L.Dispatcher,this.dispatcher.bind(this,d)}refreshSessionContext(d,N){a.authSessionContext={authToken:d,behavior:N},a.wantsAuthSessionContext$.set(!0)}}function Ue(e){return e==="none"||e==="sent"||e==="success"||e==="failure"}class ze{prepareState;lastPrepareTimestamp;conduitToken;constructor(d,N,o){this.prepareState=Ue(d)?d:"none",this.lastPrepareTimestamp=N-performance.timeOrigin,this.conduitToken=o}}class Te{dispatcher;constructor(d){this.dispatcher=new W.Dispatcher,this.dispatcher.bind(this,d)}closeNavigationSidebar(){throw new Error("Method not implemented.")}setChatTheme(d){throw new Error("Method not implemented.")}showSearch(){throw new Error("Method not implemented.")}setWindowStyle(d){a.windowStyle$.set(d)}setModel(d){a.wantsModelSlug$.set(d)}newConversation(){a.wantsNewConversation$.set(!0),a.selectedConversationId$.set(void 0)}loadConversation(d){a.wantsNewConversation$.set(!1),a.selectedConversationId$.set(d)}requestCompletion(d,N,o){a.requestCompletion={prompt:d,systemHints:N,modelSlug:o},a.wantsRequestCompletion$.set(!0)}populatePrompt(d,N){a.populatePrompt={userMessage:d??null,targetedReply:N??null},a.wantsPopulatePrompt$.set(!0)}updateContext(d,N,o,n,c){a.context$.set({id:d,url:d,title:N,base64favicon:o,selection:n,blocked:c}),c||a.sidebarUrlTrayForcedOpen$.set(!1)}prepareConversation(d){a.prepareConversationDetails=new ze(d.prepareState,d.lastPrepareTimestampMsSince1970,d.conduitToken??void 0)}setSuperWidgetOptions(d){be.set(d.selectedTab)}setAttachments(d){a.attachments=d.map(N=>{const{id:o,name:n,size:c,mimeType:u,width:i,height:t,fileTokenSize:s}=N;return{...o&&{id:o},...n&&{name:n},...c&&{size:typeof c=="bigint"?Number(c):c},...u&&{mime_type:u},...i&&{width:i},...t&&{height:t},...s&&{file_token_size:s}}})}setWhisperContent(d){a.whisperContent=d}setTabContext(d){a.tabContext=d}setPromptOrigin(d){a.promptOrigin=d}navigate(d){Fe(d)}populateNavlinks(d,N){const o=JSON.parse(N);we.getState().updateFromEvent(d,o)}}const qe=6e4;class xe{host;logger;lastMissingAuthTime=0;constructor(d,N){this.host=d,this.logger=N}async getAccountID(){return await this.host.getAccountID()}onMissingSessionAuth(){const d=Date.now();if(d-this.lastMissingAuthTime>qe){this.lastMissingAuthTime=d;const[N,o]=P.Proxy.create();this.bindReceiver(o),this.logger.notice("onMissingSessionAuth.invoked"),N.handleMissingSessionAuth()}}recordAvailableSessionAuth(){const[d,N]=P.Proxy.create();this.bindReceiver(N),this.logger.notice("recordAvailableSessionAuth.invoked"),d.recordAvailableSessionAuth()}tryOpenAgentViewer(d){const[N,o]=Re.Proxy.create();return this.bindReceiver(o),N.tryOpenAgentViewer(d)}becomeMainPage(){const[d,N]=$.Proxy.create();this.bindReceiver(N),d.becomeMainPage()}openInNewTab(){const[d,N]=$.Proxy.create();this.bindReceiver(N),d.openInNewTab()}closeSideChat(){const[d,N]=$.Proxy.create();this.bindReceiver(N),d.closeSidebar()}supportsWebSideChatHeader(){const[d,N]=$.Proxy.create();return this.bindReceiver(N),d.canHideHeader()}async getWhisperContent(){const[d,N]=de.Proxy.create();return this.bindReceiver(N),await d.getWhisperContent({})}async getTabScreenshot(){const[d,N]=de.Proxy.create();return this.bindReceiver(N),await d.getTabScreenshot()}receivedFirstToken(){this.host.receivedFirstToken("")}async callLocalTool(d,N){const[o,n]=ce.Proxy.create();return this.bindReceiver(n),await o.callLocalTool(d,N)}bindReceiver(d){this.host.bindReceiver(d.interfaceType.interfaceName,d.pipe)}async getToolNames(){const[d,N]=ce.Proxy.create();return this.bindReceiver(N),await d.getToolNames()}}class je{proxy;constructor(d){this.proxy=d}handleLink(d,N){this.proxy.handleLink(d,N)}}class me{dispatcher;host;logger;conversationControllers=[];authStateController=[];constructor(){this.logger=pe.createLogger("web-bridge-host","info","http"),this.dispatcher=new ye.Dispatcher;const d=_e.Proxy.createToBrowser();this.host=new xe(d,this.logger),d.setFrontend(this.dispatcher.createRemote(this))}get linkHandler(){const[d,N]=Ie.Proxy.create();return this.host.bindReceiver(N),new je(d)}logConsoleMessage(d){this.logger.info(d)}sendMessage(d,N){return Promise.resolve(null)}bindReceiver(d,N){d===W.interfaceName?this.conversationControllers.push(new Te(new fe(W,N))):d===L.interfaceName&&this.authStateController.push(new ae(new fe(L,N)))}}let U;async function $e(){U=new me;const e=await U.host.getAccountID();U.logger.info(`Account ID: ${e}`)}function Be(){return U?.host}function Je(){return U?.linkHandler}async function Qe(){return U?(U.logger.debug("Getting whisper content"),await U.host.getWhisperContent()):null}async function Xe(){return U?await U.host.getTabScreenshot():null}function Ye(){if(!U)return null;U.host.closeSideChat()}function Ke(){return U?U.host.supportsWebSideChatHeader():null}export{Ye as closeSideChat,Be as getHost,Je as getLinkHandler,Qe as getSidebarWhisperContent,Xe as getTabScreenshot,$e as initHostConnection,Ke as supportsWebSideChatHeader};
//# sourceMappingURL=felxwdrg3fgsr1mu.js.map
