const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kycb7aig0n8slfqi.js","assets/gg0tb34p9fzo1omt.js","assets/g670b8vtkhx0yc6d.js","assets/root-ilxovqci.css","assets/i3lx9j7x54yd78ys.js","assets/o02mhmgcyrsuseq4.js","assets/forbprkns1cohsbl.js","assets/conversation-small-mtta3ozz.css","assets/jxtimpdotu1218er.js","assets/fz8lyjvdpywhlf94.js","assets/cs320738df36xnc1.js","assets/f51c6zie1stj9anw.js","assets/jpdmr6hprcjyd5ie.js","assets/me58wahxzwibdrxp.js","assets/pnx8yl9r7yj5moem.js","assets/felxwdrg3fgsr1mu.js","assets/kp5vchw0xez5v65l.js","assets/jp0d5synnc6qwyap.js","assets/cfjcdkqfl56916uc.js","assets/cg8klfuw4d9cqove.js","assets/euq7ybw4dhrsufo2.js","assets/go2lz3yja1ixfdzl.js"])))=>i.map(i=>d[i]);
import{d as ee,eb as Ae,dw as se,co as fs,cg as ps,gQ as Me,m as _,bV as Te,bW as Ne,a8 as gs,G as Re,e0 as Oe,jQ as xs,bm as _e,k8 as Fe,dE as He,i as I,a7 as oe,o as vs,b6 as Le,bU as S,fn as Ss,h as y,N as Cs,dD as ws,dv as bs,D as Ce,e9 as ys,bn as js,a6 as Es,b2 as Ps,aq as As,gq as Ms,b9 as we,gZ as Ts,dj as be,R as De,j3 as Ns,ea as Rs,hs as Os,g3 as _s,dQ as Fs,bg as Hs,ni as Ls,dZ as Ds,l as ks,e$ as zs}from"./g670b8vtkhx0yc6d.js";import{j as e,r as a,R as ke,u as ze,o as Us,M as ye}from"./gg0tb34p9fzo1omt.js";import{cv as Gs,b6 as Ws,fn as ae,u as qs,f6 as Ue,fo as Vs,d6 as Ge,fb as Bs,fp as Qs,fq as $s,fr as Ys,fs as Ks,ft as Zs,fu as Xs,fv as J,dH as Is,fw as Js,fx as eo,b$ as so,e$ as oo,fy as ao,fz as to,bd as ro,dv as no,fA as je,fB as io,fC as co,fD as lo,du as uo,fE as We,dc as ho,fF as mo,fG as fo,fH as po,fI as go,fJ as xo,fK as vo,fL as So,dE as Co,fM as wo,fN as bo,fO as yo,fP as jo,fQ as Eo,fR as Po,fS as Ao,F as Mo,fT as To,fU as No,fV as Ro,fW as Oo,fX as _o,fY as Fo,fZ as Ho,f_ as Lo,f$ as Do,g0 as ko,g1 as zo,g2 as Uo,g3 as Go,g4 as Wo,g5 as qo,g6 as Vo,g7 as Bo,g8 as Qo,g9 as $o,ga as Yo}from"./forbprkns1cohsbl.js";import{F as Ko}from"./cs320738df36xnc1.js";import{T as Zo}from"./jpdmr6hprcjyd5ie.js";import{S as Xo,T as Io}from"./l4lldnfjv1apahqp.js";import{supportsWebSideChatHeader as Jo}from"./felxwdrg3fgsr1mu.js";import{C as ea}from"./fz8lyjvdpywhlf94.js";import"./k5ngqk6bkqja3f09.js";const sa=({clientThreadId:s})=>{const i=ee(),l=Ae(w=>w.activeStageSidebar),r=se(s),m=Gs(Ws.WorkspaceShareLinks),{isUnauthenticated:d}=fs(),j=ps(),n=Me(s),C=ae(n),M=_(i,"16480203"),p=qs(),E=m&&r&&!d&&!j&&(!C||M)&&!p,g=!l;return e.jsx("div",{className:"flex items-center",id:"conversation-header-actions",children:e.jsx(ea,{showShareButton:E,showProfileDropdown:g,clientThreadId:s})})},oa=Te(()=>Ne(()=>import("./kycb7aig0n8slfqi.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])).then(s=>s.GizmoUsingAsOwnerNotice)),Ee="text-lg",Pe="icon-sm";function aa({clientThreadId:s,transparentBackground:i,isEmptyState:l}){const[r,m]=a.useState(!1),d=ee(),j=Ue(d),n=Me(s),C=ae(n),M=Vs(),{data:p}=gs(n),E=Re(d),g=Oe(),w=xs(),[Q,F]=_e(h=>[Fe(h),He(h)]),T=I(s),H=Ae(h=>h.isConversationScrolledFromTop),N=oe(s,h=>y.hasUserMessage(h))||!T,u=Ge(),L=u&&w,c=Bs()&&N&&!u,R=!n&&!c&&!r,x=Qs({clientThreadId:s})&&!L;a.useEffect(()=>{if(!F){m(!1);return}(async()=>{const h=await Jo();m(h??!1)})()},[F]);const D=!vs(d)&&!N&&Le(d,"1697094676").get("hide_dropdown",!1),k=e.jsx(Is,{clientThreadId:s,children:e.jsx(sa,{clientThreadId:s})}),v=Q&&!c?{textClassName:Ee,chevronClassName:Pe}:{},z=c?e.jsx(ta,{clientThreadId:s,conversationActions:k,dropdownTextClassName:Ee,dropdownChevronClassName:Pe}):r?e.jsx(Xs,{clientThreadId:s}):g&&(C||!n)?D?null:e.jsx(J,{clientThreadId:s}):D?null:e.jsx(J,{clientThreadId:s,...v});return e.jsxs(e.Fragment,{children:[e.jsxs($s,{id:"page-header",className:S("pointer-events-none select-none [view-transition-name:var(--vt-page-header)] *:pointer-events-auto motion-safe:transition",!c&&!r&&"max-md:hidden",l&&"absolute start-0 end-0",C&&T&&"sharp-edge-on-scroll-start sticky top-0",R&&"@[84rem]/thread:absolute @[84rem]/thread:start-0 @[84rem]/thread:end-0 @[84rem]/thread:shadow-none!",R&&!u&&"@[84rem]/thread:bg-transparent",i&&!u&&!c&&!r&&"bg-transparent",!j&&H?"[box-shadow:var(--sharp-edge-top-shadow)]":"[box-shadow:var(--sharp-edge-top-shadow-placeholder)]",j&&"[box-shadow:var(--sharp-edge-top-shadow-placeholder)] group-data-scroll-from-top/thread:[box-shadow:var(--sharp-edge-top-shadow)]",H&&x&&"@[84rem]/thread:bg-token-main-surface-primary @[84rem]/thread:[box-shadow:var(--sharp-edge-top-shadow)]!"),children:[!r&&e.jsxs("div",{className:"absolute start-1/2 ltr:-translate-x-1/2 rtl:translate-x-1/2",children:[p!=null&&E?.isWorkspaceAccount()&&p.gizmo.tags?.includes(Ss.WorkspaceDisabled)&&e.jsx(oa,{gizmo:p}),e.jsx(Ys,{gizmoId:n,clientThreadId:s}),x?e.jsx(Ks,{}):null,L&&e.jsx(Xo,{})]}),e.jsx("div",{className:S("flex",c||r?"w-full":"items-center"),children:z}),!c&&!r&&e.jsx("div",{className:"flex items-center",children:k})]}),M&&e.jsx(Zs,{})]})}function ta({clientThreadId:s,className:i,conversationActions:l,dropdownTextClassName:r,dropdownChevronClassName:m}){return e.jsxs("div",{className:S("grid w-full grid-cols-[minmax(max-content,1fr)_auto_minmax(0,1fr)] lg:grid-cols-[1fr_auto_1fr]",eo,i),children:[e.jsx("div",{className:"col-start-1 row-start-1 justify-self-start pe-2",children:e.jsx(J,{clientThreadId:s,textClassName:r,chevronClassName:m})}),e.jsx("div",{className:"col-span-2 col-start-2 row-start-1 me-7 min-w-0 place-self-center [justify-self:end] lg:col-span-1 lg:me-0 lg:min-w-(--thread-content-max-width) lg:flex-1 lg:[justify-self:center]",children:e.jsx(Js,{textClassName:"text-base"})}),e.jsx("div",{className:"col-start-3 row-start-1 hidden items-center justify-self-end overflow-visible lg:flex",children:l})]})}const ra=Te(()=>Ne(()=>import("./cfjcdkqfl56916uc.js"),__vite__mapDeps([18,1,2,3,19,6,7,20,21])));function na({clientThreadId:s}){const i=ze(),l=se(s),r=oe(s,y.getGizmoId),m=async()=>{l&&(await De.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:l}},requestBody:{is_archived:!1},intercomEventOnError:"fetch-error:conversation:edit"}),i.invalidateQueries({queryKey:["conversation",s]}),ks(l,d=>{d.isArchived=!1}),We(i,r))};return e.jsxs("div",{className:"my-6 flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"text-token-text-secondary px-3 text-center text-sm",children:e.jsx(ye,{id:"thread.archivedConversationDescription",defaultMessage:"This conversation is archived. To continue, please unarchive it first."})}),e.jsx("div",{children:e.jsx(Hs,{disabled:!l,onClick:m,icon:Bo,children:e.jsx(ye,{id:"thread.unarchiveButton",defaultMessage:"Unarchive"})})})]})}const ia=function({clientThreadId:s,getGizmosCompletionParams:i,hideDisclaimer:l,hideHeader:r,messagesVerticalAlign:m="top",renderEmptyState:d}){"use forget";const j=Cs(),n=ee(),C=Ue(n),M=Oe(),p=ws(),{data:E}=bs({isGizmo:!!p}),g=so(s),[w,Q,F,T,H,N,u,L]=oe(s,o=>[o?.isLoading,y.getCurrentLeafId(o),y.hasUserMessage(o),y.getConversationTurns(o).length,y.isArchived(o),o?.modelId,o?y.getGizmoId(o):p,o?.conversationOrigin===zs.APPLE]),c=se(s),R=ze(),{prefetchSearchPromises:x}=oo(),[D]=Us(),k=!!D.get("message"),[v]=a.useState(x?.query),[z,h]=a.useState(x?.navlink);a.useEffect(()=>{w||(I(s)?Ce.addTiming("chatgpt.web.chatPage.renderNewConversation"):Ce.addTiming("chatgpt.web.chatPage.renderExistingConversation"))},[s,w]);const{setTargetedContent:te}=ao(),qe=j?.includes(to),Ve=null,re=T>=2,Be=_(n,"1909635392"),Qe=a.useContext(ys),[$,U,$e]=_e(o=>[js(o),He(o),Fe(o)]),ne=ro(),G=Ge(),{isOpen:ie}=no(),f=!!u,t=I(s)&&!re&&(je(g)||g?.kind===Es.GizmoTest)&&!ne&&!G&&x==null&&(!$||f),Ye=_(n,"733205176"),Ke=_(n,"537200474");io(c,Ye),co();const ce=t&&!F&&x==null&&(!$||f),Ze=Ps(E).id,P=N??Ze,le=!!N,Y=As.useStore();a.useEffect(()=>{if(P===Ms)return Y.setActiveSystemHint(we,{locked:!0,analyticsMetadata:{clientThreadId:s}}),()=>{Y.setActiveSystemHint(null,{locked:!1,ifPrevSystemHint:we,analyticsMetadata:{clientThreadId:s}})}},[P,Y,s]);const Xe=Ts(E?.models,P),W=lo(s,g),de=uo();a.useEffect(()=>{de||te(void 0)},[s,te,de,Q]),a.useEffect(()=>{be.setIsConversationScrolledFromTop(!1)},[s]),a.useEffect(()=>{const o=new URLSearchParams(window.location.search),O=o.get("src");if(O==="history_search"){o.delete("src");const B=o.toString(),ms=`${window.location.pathname}${B?`?${B}`:""}${window.location.hash}`;window.history.replaceState({},document.title,ms)}c&&O==="history_search"&&De.safePatch("/conversation/{conversation_id}",{parameters:{path:{conversation_id:c}},requestBody:{touch:!0},intercomEventOnError:"fetch-error:conversation:edit"}).then(()=>{We(R,u)})},[c,u,R]);const ue=ho(s),he=a.useCallback(o=>{ue(i?i(o):o)},[ue,i]),me=mo(),Ie=Ns(),K=a.useRef(null);K.current=o=>{t&&!Ie&&!$&&Le(n,"3253785454").get("should_animate_composer",!1)?fo({className:Yo["composer-slide"],update:()=>he(o)}):he(o)};const A=a.useCallback(o=>K.current?.(o),[K]);a.useEffect(()=>{me.signalTransitionReady()},[me,s]),po(),go(s,A),xo(s),vo(t);const Je=So({clientThreadId:s,handleRequestCompletion:A,prefetchSearchThreadIdPromise:x?.threadId})&&v==null,q=a.useRef(null),es=o=>{if(C)return e.jsx(Qo,{allowScrollToEnd:!U,allowScrollToTop:!U&&L,clientThreadId:s,initScrolledToEnd:v==null&&!k,threadFooterRef:X,threadRootRef:pe,children:o});{const O=e.jsx("div",{className:"relative h-full",children:e.jsxs("div",{className:S("flex h-full flex-col overflow-y-auto [scrollbar-gutter:stable_both-edges]",!$e&&"@[84rem]/thread:pt-(--header-height)"),ref:q,children:[e.jsx(Ls,{setIsScrolledToEdge:B=>{be.setIsConversationScrolledFromTop(B)},options:{root:q?.current}}),o]})});return v!=null?O:e.jsx(Ds,{children:e.jsxs(a.Suspense,{fallback:null,children:[e.jsx($o,{}),O]})})}};a.useEffect(()=>{G||(document.title=W??"ChatGPT")},[W,Ve,G]);const ss=Rs(Qe),Z=Re(n),os=Z&&!Z.isTeam()&&!Z.isEnterprisey(),fe=!l&&!ss&&!U&&!(t&&os)&&je(g),as=Co(s).isOdysseyMode,pe=a.useRef(null),ge=a.useRef(null),X=a.useRef(null),xe=wo(o=>o.composerHeight),ts=a.useMemo(()=>({threadContentScrollContainerElementRef:ge,footerRootContainerElementRef:X}),[]),ve=!t&&!ie,rs=Os(),ns=ae(u),b=f&&ns,V=!b,is=t,cs=a.useCallback(()=>h(void 0),[]),{isSingleLine:Se}=_s(),ls=bo();function ds(){return e.jsx(Wo,{clientThreadId:s,scrollContainerRef:q})}function us(){return w||Je?null:ce?d??e.jsx(e.Fragment,{children:f?e.jsx(qo,{clientThreadId:s,gizmoId:u,onRequestCompletion:A,currentModelId:P}):e.jsx(Vo,{clientThreadId:s,currentModelId:P,isModelLoaded:le})}):re||v!=null?es(e.jsx(Io,{onRequestCompletion:A,clientThreadId:s,scrollContainerRef:q,pageLoadSearchQuery:v,prefetchNavlink:z,clearPrefetchNavlink:cs},s)):null}const hs=_(n,"422449809");return e.jsx(yo.Provider,{value:z?"user-query-with-navlink":v?"user-query":null,children:e.jsx(jo,{serverThreadId:c,children:e.jsx(Eo,{clientThreadId:s,children:e.jsxs(Fs,{clientThreadId:s,children:[e.jsx(la,{clientThreadId:s,conversationTurnsLength:T}),qe&&e.jsx(ra,{}),!G&&e.jsx(Po,{children:W!=null&&e.jsx("title",{children:W})}),e.jsx(Ao.Provider,{value:A,children:e.jsxs(Mo,{children:[e.jsx("div",{id:"thread",ref:pe,className:S("group/thread @container/thread h-full w-full",C&&Fo.threadRoot),children:e.jsxs(Ko,{noKeyboard:!0,clientThreadId:s,currentModelConfig:Xe,className:S("composer-parent flex h-full flex-col focus-visible:outline-0",!b&&"overflow-hidden"),children:[e.jsxs(To,{value:ts,children:[!r&&e.jsx(aa,{transparentBackground:t,clientThreadId:s,isEmptyState:ce}),Be&&e.jsx(No,{clientThreadId:s}),e.jsxs("div",{ref:ge,className:S("relative flex basis-auto flex-col",ve&&"-mb-(--composer-overlap-px)",ve&&(Se?"[--composer-overlap-px:28px]":"[--composer-overlap-px:55px]"),b||f||!t?"grow":"shrink",!t&&"overflow-hidden",t&&!b&&!f&&"flex-col justify-end min-[510px]:min-h-[42svh] @max-[510px]/thread:grow @max-[510px]/thread:justify-center"),style:{"--composer-height":xe?`${xe}px`:void 0},children:[ls&&ds(),us(),!1]})]}),e.jsxs("div",{id:"thread-bottom-container",className:S("relative isolate z-10 w-full basis-auto has-data-has-thread-error:pt-2 has-data-has-thread-error:[box-shadow:var(--sharp-edge-bottom-shadow)] md:border-transparent md:pt-0 dark:border-white/20 md:dark:border-transparent",!t&&"content-fade",Se&&"single-line",t&&"min-h-0",!fe&&!U&&!as&&"mb-4",f||b||!t?"":V&&t&&rs?"@lg/thread:grow":"lg:grow",V&&"flex flex-col"),ref:X,children:[H?e.jsx(na,{clientThreadId:s}):e.jsxs(e.Fragment,{children:[(!t||V)&&!ie&&e.jsxs(e.Fragment,{children:[e.jsx(Zo,{isGizmoThread:f,isProjectThread:b,clientThreadId:s,isNewThread:t,currentModelId:P,onRequestCompletion:A,shouldUseUnifiedComposer:V,isModelLoaded:le}),M&&t&&Ke&&e.jsx(Ro,{clientThreadId:s})]}),is&&e.jsx(Oo,{clientThreadId:s,isGizmoThread:f,isNewThread:t,isProjectThread:b})]}),fe?e.jsx("div",{className:"text-token-text-secondary relative mt-auto flex min-h-8 w-full items-center justify-center p-2 text-center text-xs md:px-[60px]",children:e.jsx(_o,{clientThreadId:s})}):null]})]})}),e.jsx(Ho,{clientThreadId:s,isStaticSharedThread:!1,isDynamicSharedThread:ne}),e.jsx(Lo,{}),hs&&e.jsx(Do,{}),e.jsx(ko,{conversationId:s}),e.jsx(zo,{}),e.jsx(Uo,{})]})})]})})})})},Ca=ke.memo(ia);function ca({clientThreadId:s,conversationTurnsLength:i}){return Go(i,s),null}const la=ke.memo(ca);export{sa as C,Ca as M};
//# sourceMappingURL=m1ohh9p1gptum5w5.js.map
