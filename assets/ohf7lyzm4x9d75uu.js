import{b as h,r as u,j as e,M as g,A as x,m as b}from"./gg0tb34p9fzo1omt.js";import{bU as w,el as j,dX as v}from"./g670b8vtkhx0yc6d.js";import{bv as N,dR as f}from"./forbprkns1cohsbl.js";import{p as k,g as F}from"./h6uvwty3c3amaxiz.js";import{F as L}from"./h9p1albvmprbl3kb.js";import{g as T,l as y}from"./nir0q9e2l94u37hi.js";import"./hu61i4occl5w2buc.js";import"./iot1vlqga29hiiwl.js";import"./c7e30quc1do1jojv.js";import"./kv8a9039cr2p5scx.js";import"./ogvupmk4xezkmrqf.js";import"./juuj7s9t3x7u9it2.js";import"./lptwpbjabrvjmhsj.js";import"./kqivh2k2gjqolo2l.js";import"./ewqfcp1vbowm20lj.js";import"./fzrn137102spawew.js";import"./f36jz1b044mtoyky.js";import"./ii534sx9kl9dq5ip.js";import"./e3erq0emp0cqk1ou.js";import"./epts3f5f624a6l7w.js";import"./mu0w85wyyiji3bj8.js";import"./b40xa0ca5oqnzth6.js";import"./b451x40oixvdmzqh.js";import"./hsr6nqstg4abtqru.js";import"./k5ngqk6bkqja3f09.js";import"./jgs7169reknaons9.js";import"./cnl9n9geu2oxb8o4.js";import"./f4wsvwai0sxxe1lf.js";const C="_glow_1o0tc_1",p={glow:C};function M({diffFiles:t,onClickFile:o,startOpen:m=!1,isActive:r=!1}){const a=h(),[s,c]=u.useState(m);return t.length?e.jsxs("div",{className:w("bg-token-bg-primary flex flex-col rounded-2xl border",r?"border-token-border-heavy outline-2 outline-black/5":"border-token-border-light"),children:[e.jsx("button",{className:"cursor-pointer p-2 focus-visible:outline-0",onClick:()=>{t.length&&o?.(t[0]),(r||!s)&&c(!s)},"aria-label":a.formatMessage({id:"wham.diff.changedFileList.titleAriaLabel",defaultMessage:"Toggle file list diffs"}),children:e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("div",{className:"gap-1 px-2 py-1 text-sm",children:e.jsx("span",{className:"text-token-text-primary font-medium",children:e.jsx(g,{id:"wham.diff.changedFileList.title",defaultMessage:"{numFiles, plural, one {File ({numFiles})} other {Files ({numFiles})}}",values:{numFiles:t.length}})})}),s?e.jsx(N,{className:"icon"}):e.jsx(j,{className:"icon"})]})}),e.jsx(x,{initial:!m,children:s&&e.jsx(b.ul,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.1},className:"overflow-clip px-2 pb-2",children:t.map((l,n)=>{const d=`${l._oldFileName??n}-${l._newFileName}`;return e.jsx(R,{diffFile:l,onClick:()=>o?.(l)},d)})})})]}):null}function R({diffFile:t,onClick:o}){const m=h(),r=u.useRef(null),a=u.useRef(null),s=u.useRef(null),[c,l]=u.useState(!1),n=F(t),d=`${t._oldFileName??""}-${t._newFileName}`;return e.jsx("li",{className:"group w-full",children:e.jsx(v,{label:n,labelTextAlign:"left",open:c?void 0:!1,children:e.jsxs("button",{className:"hover:bg-token-border-light after:bg-token-border-light relative flex h-10 w-full items-center justify-start rounded-lg px-2 text-sm after:absolute after:inset-x-2 after:bottom-0 after:h-[1px] after:content-[''] group-last:after:hidden focus-visible:outline-0",onClick:()=>{o?.(),requestAnimationFrame(()=>{r.current!=null&&window.clearTimeout(r.current);const i=document.querySelector(`[data-diff-header="${n}"]`);i?.classList.remove(p.glow),i?.scrollIntoView({behavior:"instant",block:"start"}),i?.classList.add(p.glow),r.current=window.setTimeout(()=>{i?.classList.remove(p.glow)},5e3)})},"aria-label":m.formatMessage({id:"wham.diff.changedFileList.fileAriaLabel",defaultMessage:"View file {file}"},{file:n}),children:[e.jsxs("div",{className:"relative flex min-w-0 shrink pe-2",children:[e.jsx("span",{"aria-hidden":!0,className:"invisible fixed inline-block whitespace-nowrap",ref:f({axis:"width",onChange:({width:i})=>{a.current=i,s.current!=null&&l(s.current<i)}}),children:n}),e.jsx("span",{ref:f({axis:"width",onChange:({width:i})=>{s.current=i,a.current!=null&&l(i<a.current)}}),className:"inline-block max-w-full min-w-0 shrink truncate",children:n})]}),e.jsx("span",{className:"ms-auto",children:e.jsx(L,{diffFile:t,fallback:e.jsx(y,{linesAdded:t.additionLength,linesRemoved:t.deletionLength})})})]})})},d)}function re({assistantTurn:t,onClickFile:o,startOpen:m=!1,isActive:r=!1,showFullDiff:a=!1}){const s=T(t,!0).length>0,c=k({assistantTurn:t,followUp:s&&!a}).map(l=>l.diffFile);return e.jsx(M,{diffFiles:c,onClickFile:o,startOpen:m,isActive:r})}export{M as ChangedFileList,re as ChangedFileListFromTaskTurn};
//# sourceMappingURL=ohf7lyzm4x9d75uu.js.map
